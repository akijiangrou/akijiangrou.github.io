<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MissSweety&#39;s Blog</title>
  <subtitle>never say never</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://misssweety.github.io/"/>
  <updated>2017-09-12T11:15:20.000Z</updated>
  <id>https://misssweety.github.io/</id>
  
  <author>
    <name>Jessica</name>
    <email>zcx900308@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Reactç”Ÿå‘½å‘¨æœŸ</title>
    <link href="https://misssweety.github.io/2017/09/12/React%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    <id>https://misssweety.github.io/2017/09/12/Reactç”Ÿå‘½å‘¨æœŸ/</id>
    <published>2017-09-12T11:07:41.000Z</published>
    <updated>2017-09-12T11:15:20.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="reactç”Ÿå‘½å‘¨æœŸ"><a href="#reactç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="reactç”Ÿå‘½å‘¨æœŸ"></a>reactç”Ÿå‘½å‘¨æœŸ</h1><p>åœ¨è‡ªå®šä¹‰Reactç»„ä»¶æ—¶ï¼Œä¼šæ ¹æ®éœ€è¦åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µå®ç°ä¸åŒçš„é€»è¾‘ã€‚æœ¬æ–‡æºç æ˜¯ã€15.6.1ã€‘</p>
<h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><p>è€Œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåœ¨ä¸åŒçŠ¶æ€ä¸‹çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p>
<h4 id="é¦–æ¬¡æŒ‚è½½ç»„ä»¶"><a href="#é¦–æ¬¡æŒ‚è½½ç»„ä»¶" class="headerlink" title="é¦–æ¬¡æŒ‚è½½ç»„ä»¶"></a>é¦–æ¬¡æŒ‚è½½ç»„ä»¶</h4><ul>
<li>getDefaultProps</li>
<li>getInitialState</li>
<li>componentWillMount</li>
<li>render</li>
<li>componentDidMount</li>
</ul>
<h4 id="é‡æ–°æŒ‚è½½ç»„ä»¶"><a href="#é‡æ–°æŒ‚è½½ç»„ä»¶" class="headerlink" title="é‡æ–°æŒ‚è½½ç»„ä»¶"></a>é‡æ–°æŒ‚è½½ç»„ä»¶</h4><ul>
<li>getInitialState</li>
<li>componentWillMount</li>
<li>render</li>
<li>componentDidMount</li>
</ul>
<h4 id="å†æ¬¡æ¸²æŸ“ç»„ä»¶-props-CHANGE"><a href="#å†æ¬¡æ¸²æŸ“ç»„ä»¶-props-CHANGE" class="headerlink" title="å†æ¬¡æ¸²æŸ“ç»„ä»¶-props CHANGE"></a>å†æ¬¡æ¸²æŸ“ç»„ä»¶-props CHANGE</h4><ul>
<li>componentWillReceiveProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>render</li>
<li>componentDidUpdate</li>
</ul>
<h4 id="å†æ¬¡æ¸²æŸ“ç»„ä»¶-state-CHANGE"><a href="#å†æ¬¡æ¸²æŸ“ç»„ä»¶-state-CHANGE" class="headerlink" title="å†æ¬¡æ¸²æŸ“ç»„ä»¶-state CHANGE"></a>å†æ¬¡æ¸²æŸ“ç»„ä»¶-state CHANGE</h4><ul>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>render</li>
<li>componentDidUpdate</li>
</ul>
<p>ä¸‹é¢å°±æ˜¯æ­ç§˜Reactä¸ºä½•ä¼šæŒ‰ç…§ä¸Šé¢è¿™ä¸ªæ‰§è¡Œç”Ÿå‘½å‘¨æœŸã€‚</p>
<h2 id="ç”Ÿå‘½å‘¨æœŸè¯¦è§£"><a href="#ç”Ÿå‘½å‘¨æœŸè¯¦è§£" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸè¯¦è§£"></a>ç”Ÿå‘½å‘¨æœŸè¯¦è§£</h2><p>è‡ªå®šä¹‰ç»„ä»¶å£°æ˜å‘¨æœŸå­˜åœ¨3ä¸ªé˜¶æ®µï¼š<br><strong>MOUNTING</strong>, <strong>RECEIVE_PROPS</strong>, <strong>UNMOUNTING</strong></p>
<p>åˆ†åˆ«å¯¹åº”3ç§æ–¹æ³•ã€‚</p>
<ul>
<li>mountComponentï¼Œ</li>
<li>updateComponent</li>
<li>unmountComponent</li>
</ul>
<p>ä»¥ä¸Šæ¯ä¸ªéƒ½æä¾›äº†å‡ ç§å¤„ç†æ–¹æ³•ã€‚willå‰ç¼€çš„æ–¹æ³•åœ¨è¿›å…¥çŠ¶æ€ä¹‹å‰è°ƒç”¨ï¼Œdidåœ¨è¿›å…¥çŠ¶æ€ä¹‹åè°ƒç”¨ã€‚</p>
<h3 id="ä½¿ç”¨createClassåˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶"><a href="#ä½¿ç”¨createClassåˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="ä½¿ç”¨createClassåˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶"></a>ä½¿ç”¨createClassåˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶</h3><p>ES6ç¼–å†™Reactç»„ä»¶æ—¶ï¼š</p>
<pre><code>class MyComponent extends React.Component
</code></pre><p>æ˜¯è°ƒç”¨<code>createClass</code>åˆ›å»ºç»„ä»¶ï¼Œåˆ©ç”¨åŸå‹ç»§æ‰¿<code>ReactClassComponent</code>çˆ¶ç±»ï¼Œåˆå¹¶<code>mixins</code>ï¼Œåˆå§‹åŒ–<code>defaultProps</code>ï¼Œè¿”å›æ„é€ å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä»£ç ã€‚</p>
<p>å…³äºcreateClassï¼šã€isomorphic/class/createClass.jsã€‘  </p>
<pre><code>&apos;use strict&apos;;

var {Component} = require(&apos;ReactBaseClasses&apos;);
var {isValidElement} = require(&apos;ReactElement&apos;);
var ReactNoopUpdateQueue = require(&apos;ReactNoopUpdateQueue&apos;);
var factory = require(&apos;create-react-class/factory&apos;);

module.exports = factory(Component, isValidElement, ReactNoopUpdateQueue);
</code></pre><p>factory: [react/addons/create-react-class/factory.js];</p>
<p>componentå¦‚ä¸Šï¼Œä½†æ˜¯<code>createClass</code>å®é™…ä¸Šå¯¼å‡ºçš„æ˜¯ç”±<code>factory``åŒ…è£¹çš„å‡½æ•°ã€‚å„ç§ç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯åœ¨factory</code>é‡Œæ„é€ çš„ã€‚<code>factory</code>é‡Œå®šä¹‰äº†ï¼Œ<code>ReactClassInterface</code>ï¼Œé‡Œé¢è§„å®šäº†å¥½å¤šåè®®ï¼ˆå¦‚renderç­‰ï¼‰</p>
<pre><code>// Helper function to allow the creation of anonymous functions which do not
// have .name set to the name of the variable being assigned to.
function identity(fn) {
  return fn;
}

function factory(ReactComponent, isValidElement, ReactNoopUpdateQueue) {
  var injectedMixins = [];
  // å®šä¹‰reactclassä¸­çš„åè®®ï¼ˆå…¶å®å°±æ˜¯æ–¹æ³•ï¼‰
  var ReactClassInterface = {
    mixins: &apos;DEFINE_MANY&apos;,
    statics: &apos;DEFINE_MANY&apos;,
    propTypes: &apos;DEFINE_MANY&apos;,
    contextTypes: &apos;DEFINE_MANY&apos;,
    childContextTypes: &apos;DEFINE_MANY&apos;,
    getDefaultProps: &apos;DEFINE_MANY_MERGED&apos;,
    getInitialState: &apos;DEFINE_MANY_MERGED&apos;,
    getChildContext: &apos;DEFINE_MANY_MERGED&apos;,
    render: &apos;DEFINE_ONCE&apos;,
    componentWillMount: &apos;DEFINE_MANY&apos;,
    componentDidMount: &apos;DEFINE_MANY&apos;,
    componentWillReceiveProps: &apos;DEFINE_MANY&apos;,
    shouldComponentUpdate: &apos;DEFINE_ONCE&apos;,
    componentWillUpdate: &apos;DEFINE_MANY&apos;,
    componentDidUpdate: &apos;DEFINE_MANY&apos;,
    componentWillUnmount: &apos;DEFINE_MANY&apos;,
    updateComponent: &apos;OVERRIDE_BASE&apos;
};

  var ReactClassComponent = function() {};
  _assign(
    ReactClassComponent.prototype,
    ReactComponent.prototype,
    ReactClassMixin
  );

  function createClass(spec) {
    // Constructor.name !== &apos;Constructor&apos;.ç¡®ä¿ä¸ä¼šå°†æ²¡æœ‰displayNameçš„ç±»è¯†åˆ«ä¸º&apos;Constructor&apos;ã€‚é‡å†™äº†contructorå‡½æ•°~~~~
     var Constructor = identity(function(props, context, updater) {
     // è‡ªåŠ¨ç»‘å®š
     if (this.__reactAutoBindPairs.length) {
      bindAutoBindMethods(this);
    }

    this.props = props;
    this.context = context;
    this.refs = emptyObject;
    this.updater = updater || ReactNoopUpdateQueue;

    this.state = null;
    // reactClassesæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œé€šè¿‡getInitialStateï¼Œä¸componentWillMountæ¥è¿›è¡Œåˆå§‹åŒ–ã€‚
    var initialState = this.getInitialState ? this.getInitialState() : null;
    // åŸå‹ç»§æ‰¿è‡ªçˆ¶ç±»ã€‚
    Constructor.prototype = new ReactClassComponent();
    Constructor.prototype.constructor = Constructor;
    Constructor.prototype.__reactAutoBindPairs = [];

    injectedMixins.forEach(mixSpecIntoComponent.bind(null, Constructor));
// æŠŠdidmountï¼Œwillunmountèµ‹ç»™åŸå‹
    mixSpecIntoComponent(Constructor, IsMountedPreMixin);
    mixSpecIntoComponent(Constructor, spec);
    mixSpecIntoComponent(Constructor, IsMountedPostMixin);

    // Initialize the defaultProps property after all mixins have been merged.
    // æ‰€æœ‰mixinåˆå¹¶åï¼Œå¼€å§‹åˆå§‹åŒ–defaultProps
    if (Constructor.getDefaultProps) {
      Constructor.defaultProps = Constructor.getDefaultProps();
    }
    // å‡å°‘æŸ¥æ‰¾å¹¶è®¾ç½®åŸå‹çš„æ—¶é—´ã€‚
    for (var methodName in ReactClassInterface) {
      if (!Constructor.prototype[methodName]) {
        Constructor.prototype[methodName] = null;
      }
    }

    return Constructor;
  } 
  return createClass;
}
</code></pre><p>ä»¥ä¸Šæ˜¯åˆå§‹åŒ–çš„é˜¶æ®µï¼Œç¬¬ä¸€æ¬¡mountingå‰ï¼Œ<code>createClass</code>è¿”å›<code>Constructor</code>å‡½æ•°ã€‚<code>getDefaultProps</code> æ˜¯åœ¨constructoré˜¶æ®µè°ƒç”¨çš„ï¼Œæ‰€ä»¥ç”Ÿæˆä¸€ä¸ªå®ä¾‹åï¼Œå°±ä¸ä¼šå†è°ƒç”¨äº†ã€‚æ‰€ä»¥åªæœ‰åˆæ¬¡æŒ‚è½½çš„æ—¶å€™æ‰ä¼šè°ƒç”¨ã€‚ã€‚ã€‚</p>
<h3 id="mountComponenté˜¶æ®µ"><a href="#mountComponenté˜¶æ®µ" class="headerlink" title="mountComponenté˜¶æ®µ"></a>mountComponenté˜¶æ®µ</h3><p>mountComponentè´Ÿè´£ç®¡ç†ç”Ÿå‘½å‘¨æœŸçš„<code>getInitialState</code>ï¼Œ<code>componentWillMount</code>ï¼Œ<code>render</code>ï¼Œå’Œ<code>componentDidMount</code>.</p>
<p>mountComponentæŒ‚è½½ç»„ä»¶ï¼Œåˆå§‹åŒ–åºå·ï¼Œæ ‡è®°ç­‰å‚æ•°ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ— çŠ¶æ€ç»„ä»¶ï¼Œä»¥åŠåˆå§‹åŒ–æ“ä½œã€‚ä½¿ç”¨<code>getInitialState</code>è·å–åˆå§‹åŒ–stateã€‚åœ¨<code>componentWillMount</code>ä¸­è°ƒç”¨setStateï¼Œ<strong>ä¸è§¦å‘re-render</strong>ï¼Œè€Œæ˜¯merge stateã€‚è¿™ä¸ªçŠ¶æ€çš„this.stateå¹¶ä¸æ˜¯æœ€æ–°çš„ã€‚åœ¨renderä¸­æ‰å¯ä»¥è·å–æ›´æ–°çš„this.stateã€‚  </p>
<p>[ä»£ç é‡Œ]</p>
<pre><code>// When mounting, calls to `setState` by `componentWillMount` will set
  // `this._pendingStateQueue` without triggering a re-render.
  if (this._pendingStateQueue) {
    inst.state = this._processPendingState(inst.props, inst.context);
    // merge state 
  }
</code></pre><p>åˆ©ç”¨ï¼š<code>this._pendingStateQueue</code> , <code>this._pendingReplaceState</code>, <code>this._pendingForceUpdate</code> å®ç°setStateçš„å¼‚æ­¥è·Ÿæ–°æœºåˆ¶ã€‚</p>
<p>renderåï¼Œè‹¥å­˜åœ¨didMountï¼Œåˆ™è°ƒç”¨ã€‚</p>
<p>mountComponenté€šè¿‡é€’å½’æ¸²æŸ“çš„ï¼Œç”±äºæ˜¯é€’å½’ï¼Œè‚¯å®šæ˜¯çˆ¶çš„willMOUNT, çˆ¶çš„RENDER, å­çš„willMountï¼Œå­renderï¼Œå­didMountï¼Œçˆ¶didmountã€‚</p>
<p>mountComponent,åˆå§‹åŒ–stateï¼Œæ‰§è¡Œ<code>initialMount</code>ï¼Œè¿”å›markupã€‚</p>
<pre><code>mountComponent: function(
    transaction,
    hostParent,
    hostContainerInfo,
    context,
  ){
    ...
    var initialState = inst.state;
    if (initialState === undefined) {
      inst.state = initialState = null;
    }

    this._pendingStateQueue = null;
    this._pendingReplaceState = false;
    this._pendingForceUpdate = false;

    var markup;
    if (inst.unstable_handleError) {
      markup = this.performInitialMountWithErrorHandling(
        renderedElement,
        hostParent,
        hostContainerInfo,
        transaction,
        context,
      );
    } else {
      markup = this.performInitialMount(
        renderedElement,
        hostParent,
        hostContainerInfo,
        transaction,
        context,
      );
    }

    if (inst.componentDidMount) {
      if (__DEV__) {
        transaction.getReactMountReady().enqueue(() =&gt; {
          measureLifeCyclePerf(
            () =&gt; inst.componentDidMount(),
            this._debugID,
            &apos;componentDidMount&apos;,
          );
        });
      } else {
        transaction.getReactMountReady().enqueue(inst.componentDidMount, inst);
      }
    }

    return markup;
  } 
</code></pre><p>åœ¨<code>performInitialMount</code>å‡½æ•°ä¸­, ä½¿ç”¨ReactReconcilerï¼Œè¿›è¡Œé€’å½’æ¸²æŸ“ç»„ä»¶ã€‚</p>
<pre><code>var markup = ReactReconciler.mountComponent(
  child,
  transaction,
  hostParent,
  hostContainerInfo,
  this._processChildContext(context),
  debugID,
);
</code></pre><h3 id="RECEIVEâ€”props-updateçš„è¿‡ç¨‹"><a href="#RECEIVEâ€”props-updateçš„è¿‡ç¨‹" class="headerlink" title="RECEIVEâ€”props updateçš„è¿‡ç¨‹"></a>RECEIVEâ€”props updateçš„è¿‡ç¨‹</h3><p>æºç é‡Œé¢ï¼šupdateComponentè´Ÿè´£ç®¡ç†ç”Ÿå‘½å‘¨æœŸçš„ <code>componentWillReceiveProps</code>ï¼Œ<code>shouldComponentUpdate</code>, <code>componentWillUpdate</code>, <code>componentDidUpdate</code>;</p>
<p>é¦–å…ˆé€šè¿‡<code>updateComponent</code>æ›´æ–°ç»„ä»¶ï¼Œå¦‚æœå…ƒç´ ä¸ä¸€è‡´ï¼Œè¯´æ˜è¦è¿›è¡Œç»„ä»¶æ›´æ–°ã€‚<br>ä»£ç ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå¦‚æœæœ‰<code>componentWillReceiveProps</code>æ‰§è¡Œï¼Œå…¶ä¸­æœ‰<code>setState</code>ä¼šåˆå¹¶stateï¼Œä¸”åœ¨<code>componentWillReceivePropsï¼ŒshouldComponentUpdateï¼ŒcomponentWillUpdate</code>ä¸­ä¸ä¼šè·å–åˆ°æ–°çš„stateã€‚åªèƒ½åœ¨renderå’ŒdidçŠ¶æ€æ‰èƒ½è·å–ã€‚å‰©ä¸‹å‡ ä¸ªçŠ¶æ€ä¹Ÿæ˜¯æœ‰å°±æ‰§è¡Œï¼Œä¸”é¡ºåºä¸ºï¼š<br><code>shouldComponentUpdate</code><br><code>componentWillUpdate</code><br><code>render</code><br><code>componentDidUpdate</code></p>
<p>åœ¨<code>updateComponent</code>ä¸­</p>
<pre><code>updateComponent: function(
transaction,
prevParentElement,
nextParentElement,
prevUnmaskedContext,
nextUnmaskedContext,
</code></pre><p>  ) {<br>    var inst = this._instance;<br>    â€¦<br>    var willReceive = false;</p>
<pre><code>// åˆ¤æ–­contextå˜åŒ–ä¸å¦ï¼Œè®¾ç½®willReceiveã€‚
if (this._context === nextUnmaskedContext) {
  nextContext = inst.context;
} else {
  nextContext = this._processContext(nextUnmaskedContext);
  willReceive = true;
}

var prevProps = prevParentElement.props;
var nextProps = nextParentElement.props;
// åˆ¤æ–­propså˜åŒ–ä¸å¦ï¼Œè®¾ç½®willReceiveã€‚
if (prevParentElement !== nextParentElement) {
  willReceive = true;
}

if (willReceive &amp;&amp; inst.componentWillReceiveProps) {
...
åˆ¤æ–­å’Œæ‰§è¡ŒcomponentWillReceiveProps
}

var nextState = this._processPendingState(nextProps, nextContext);
var shouldUpdate = true;
... ä¸‹é¢æ˜¯å…³äºshouldupdateçš„åˆ¤æ–­å’Œæ‰§è¡Œã€‚
</code></pre><p>shouldComponentUpdateï¼Œå¦‚æœç”¨æˆ·è‡ªå®šä¹‰äº†ï¼Œåˆ™æŒ‰ç…§è‡ªå®šä¹‰åˆ¤æ–­æ¥è¿”å›shouldUpdateï¼Œå¦åˆ™æ‰§è¡Œé»˜è®¤æ“ä½œï¼š</p>
<pre><code>if (!this._pendingForceUpdate) {
if (inst.shouldComponentUpdate) {
    if (__DEV__) {
      shouldUpdate = measureLifeCyclePerf(
        () =&gt; inst.shouldComponentUpdate(nextProps, nextState, nextContext),
        this._debugID,
        &apos;shouldComponentUpdate&apos;,
      );
    } else {
      shouldUpdate = inst.shouldComponentUpdate(
        nextProps,
        nextState,
        nextContext,
      );
    }
  } else {
    if (this._compositeType === CompositeTypes.PureClass) {
      shouldUpdate =
        !shallowEqual(prevProps, nextProps) ||
        !shallowEqual(inst.state, nextState);
    }
  }
  }
</code></pre><p>åé¢renderè¦æ ¹æ®shouldUpdateçš„çŠ¶æ€æ¥æ‰§è¡Œã€‚</p>
<pre><code> if (shouldUpdate) {
  this._pendingForceUpdate = false;
  // Will set `this.props`, `this.state` and `this.context`.
  this._performComponentUpdate(
    nextParentElement,
    nextProps,
    nextState,
    nextContext,
    transaction,
    nextUnmaskedContext,
  );
} else {
  // å¦‚æœç¡®å®šä¸æ›´æ–°ï¼Œä¹Ÿè¦è®¾ç½®propsï¼Œstateï¼Œcontext
  this._currentElement = nextParentElement;
  this._context = nextUnmaskedContext;
  inst.props = nextProps;
  inst.state = nextState;
  inst.context = nextContext;
}
</code></pre><p>å¦‚æœåº”è¯¥updateåˆ™è°ƒç”¨ä¸€ä¸‹å‡½æ•°<br><code>this._performComponentUpdate</code><br>è§„å®šäº†å¦‚æœæœ‰componentWillUpdateï¼Œè°ƒç”¨ã€‚<br>ç„¶åæ˜¯_updateRenderedComponentï¼Œè¿›è¡Œre-renderï¼Œè°ƒåŠ¨renderæ–¹æ³•æ›´æ–°dom<br>æ¥ç€ï¼Œå¦‚æœæœ‰hasComponentDidUpdateï¼Œè°ƒç”¨ã€‚</p>
<pre><code>_updateRenderedComponent: function(transaction, context) {
// å¦‚æœéœ€è¦æ›´æ–°ï¼Œåˆ™è°ƒç”¨ReactReconciler.receiveComponentè·Ÿæ–°ç»„ä»¶
  if (shouldUpdateReactComponent(prevRenderedElement, nextRenderedElement)) {
      ReactReconciler.receiveComponent(
        prevComponentInstance,
        nextRenderedElement,
        transaction,
        this._processChildContext(context),
      );
   } else {
     // æ¸²æŸ“ç»„ä»¶ï¼Œrenderé€’å½’
     var nextMarkup = ReactReconciler.mountComponent(
        child,
        transaction,
        this._hostParent,
        this._hostContainerInfo,
        this._processChildContext(context),
        debugID,
      );
    }
</code></pre><p>ä¹Ÿæ˜¯é€’å½’renderçš„ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯çˆ¶çš„å…ˆwillUpdateï¼Œç„¶åå­çš„willUpdate,å­çš„didUpdateï¼Œçˆ¶çš„DidUpdate</p>
<h3 id="unmounting"><a href="#unmounting" class="headerlink" title="unmounting"></a>unmounting</h3><p>è´Ÿè´£ç®¡ç†<code>componentWillUnmount</code></p>
<p>å¦‚æœè§„å®šäº†componentWillUnmountï¼Œåˆ™æ‰§è¡Œå¹¶é‡ç½®æ‰€æœ‰å‚æ•°ï¼Œæ›´æ–°é˜Ÿåˆ—ä»¥åŠçŠ¶æ€ã€‚æœ‰setStateï¼Œä¸ä¼šæ‰§è¡Œre-renderã€‚å¹¶æ¸…é™¤äº†å½“å‰çš„è¿™ä¸ªå®ä¾‹ã€‚</p>
<h3 id="æ— çŠ¶æ€ç»„ä»¶"><a href="#æ— çŠ¶æ€ç»„ä»¶" class="headerlink" title="æ— çŠ¶æ€ç»„ä»¶"></a>æ— çŠ¶æ€ç»„ä»¶</h3><p>åªæ˜¯ä¸€ä¸ªrenderæ–¹æ³•ï¼Œæ²¡æœ‰ç»„ä»¶å®ä¾‹åŒ–è¿‡ç¨‹ã€‚å› ä¸ºæ²¡æœ‰çŠ¶æ€ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ¥æ”¶propsç”Ÿæˆdomç»“æ„ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;reactç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;a href=&quot;#reactç”Ÿå‘½å‘¨æœŸ&quot; class=&quot;headerlink&quot; title=&quot;reactç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;/a&gt;reactç”Ÿå‘½å‘¨æœŸ&lt;/h1&gt;&lt;p&gt;åœ¨è‡ªå®šä¹‰Reactç»„ä»¶æ—¶ï¼Œä¼šæ ¹æ®éœ€è¦åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µå®ç°ä¸åŒçš„é€»è¾‘ã€‚æœ¬æ–‡æºç 
    
    </summary>
    
    
      <category term="react" scheme="https://misssweety.github.io/tags/react/"/>
    
      <category term="ç”Ÿå‘½å‘¨æœŸ" scheme="https://misssweety.github.io/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    
  </entry>
  
  <entry>
    <title>d3-basic-line</title>
    <link href="https://misssweety.github.io/2017/06/29/d3-basic-line/"/>
    <id>https://misssweety.github.io/2017/06/29/d3-basic-line/</id>
    <published>2017-06-29T04:19:49.000Z</published>
    <updated>2017-06-29T04:27:31.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="d3-æŠ˜çº¿å›¾"><a href="#d3-æŠ˜çº¿å›¾" class="headerlink" title="d3-æŠ˜çº¿å›¾"></a>d3-æŠ˜çº¿å›¾</h1><p>ä»ä¸€ä¸ªæœ€åŸºæœ¬çš„æŠ˜çº¿å›¾å¼€å§‹ï¼Œçœ‹çœ‹d3æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä»¥åŠç”¨åˆ°å“ªäº›çŸ¥è¯†</p>
<h2 id="éœ€è¦çš„çŸ¥è¯†"><a href="#éœ€è¦çš„çŸ¥è¯†" class="headerlink" title="éœ€è¦çš„çŸ¥è¯†"></a>éœ€è¦çš„çŸ¥è¯†</h2><ul>
<li><a href="https://github.com/d3/d3-scale" target="_blank" rel="external">scale</a></li>
<li><a href="https://github.com/d3/d3-array/blob/master/README.md#extent" target="_blank" rel="external">extent</a></li>
<li><a href="https://github.com/d3/d3/blob/master/API.md#transitions-d3-transition" target="_blank" rel="external">transition</a></li>
<li><a href="https://github.com/d3/d3-shape/blob/master/README.md#lines" target="_blank" rel="external">line</a></li>
<li><a href="https://github.com/d3/d3-shape/blob/master/README.md#curves" target="_blank" rel="external">curve</a></li>
<li><a href="https://github.com/d3/d3-axis" target="_blank" rel="external">axis</a></li>
</ul>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol>
<li><p>è·å–svgå®¹å™¨</p>
<pre><code>&lt;svg width=&quot;500&quot; height=&quot;270&quot; class=&quot;testline&quot;&gt;&lt;/svg&gt;

const svg = d3.select(&apos;.testline&apos;);
const margin = {top: 20, right: 20, bottom: 20, left: 20};
const width = +svg.attr(&quot;width&quot;) - margin.left - margin.right;
const height = +svg.attr(&quot;height&quot;) - margin.top - margin.bottom;
const g = svg.append(&quot;g&quot;).attr(&quot;transform&quot;, `translate(${margin.left},${margin.top})`);
</code></pre></li>
</ol>
<ol>
<li><p>xï¼Œyè½´ç¼©æ”¾<br>è¿™é‡Œï¼Œå¦‚æœxè½´æ˜¯ä¸æ—¶é—´æœ‰å…³çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨d3æä¾›çš„scaleTime()æ¥å®ç°æ—¶é—´çš„è½¬æ¢ã€‚å…³äºscaleè¿˜æœ‰å¥½å¤šå†…å®¹ï¼Œå¾…æ€»ç»“ã€‚è¿™é‡Œéœ€è¦ç¡®å®šä¸¤ä¸ªè½´ï¼Œç¼©æ”¾çš„ç±»å‹ï¼Œä»¥åŠxyè½´å›¾åƒåœ¨å±å¹•ä¸­çš„å®é™…å®½é«˜å€¼ã€‚<br>è¿™é‡Œçš„<code>x</code>, <code>y</code> å…¶å®æ˜¯å‡½æ•°ï¼ˆæ ¹æ®ç»™å‡ºçš„æ•°æ®ï¼Œå¾—å‡ºè¯¥æ•°æ®çš„xï¼Œyåæ ‡å€¼ï¼‰ã€‚</p>
<pre><code>const x = d3.scaleTime().range([0, width]);
const y = d3.scaleLinear().range([height, 0]);
</code></pre></li>
<li><p>line<br>lineçš„ç”Ÿæˆå°±éœ€è¦ä¸Šé¢çš„è½´ç¼©æ”¾å‡½æ•°ã€‚ è¿™é‡Œæ˜¯å› ä¸ºdateå‡½æ•°å¯ä»¥æ¥å—msçš„unixæ—¶é—´æˆ³ï¼Œæ‰€ä»¥ä¹˜ä»¥1000.è¿™é‡Œä¹Ÿå¯ä»¥åŠ ä¸€äº›ç‚¹ä¸ç‚¹ä¹‹é—´çš„è¿æ¥æ–¹å¼ã€‚ <code>curveMonotoneX</code>å¹³æ»‘, <code>curveLinear</code>çº¿æ€§ã€‚éœ€è¦ä¸¤æ­¥ï¼Œlineå‡½æ•°ç”Ÿæˆã€‚lineå‘ˆç°ã€‚<br>å…³äºlineçš„å±•ç¤ºï¼Œéœ€è¦æŠŠæ•°æ®ç»‘å®šåˆ°pathæ ‡ç­¾ä¸Šï¼Œå°†lineå‡½æ•°è¿ç”¨åˆ°pathçš„då±æ€§ä¸Šã€‚å°±å¯ä»¥ç»˜åˆ¶å‡ºçº¿äº†ï¼Œtransitionè¿™é‡Œæ˜¯ä¸ºäº†å®ç°ç®€å•çš„åŠ¨ç”»æ•ˆæœã€‚<br>æ³¨æ„ï¼Œlineå±•ç¤ºçš„æ—¶å€™ï¼Œdata([data]) ä¹Ÿå¯åº”ç”¨datum(data)ï¼Œå‰è€…åˆ äº†æ•°ç»„æ ‡è®°æ˜¯ä¸å¯ä»¥çš„ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆ</p>
<pre><code>const line = d3.line()
  .x((d, i) =&gt; x(d.ts * 1000))
  .y(d =&gt; y(d.y))
  .curve(d3.curveMonotoneX);

// line çš„å±•ç¤ºã€‚
g.append(&apos;path&apos;)
      .data([data]).attr(&apos;fill&apos;, &apos;none&apos;).attr(&apos;d&apos;, line).attr(&apos;stroke&apos;, &apos;#f33155&apos;)
      .transition(500)
      .attr(&apos;stroke-width&apos;, 3);
</code></pre></li>
<li><p>xåæ ‡è½´ï¼Œyåæ ‡è½´<br>domainæ˜¯å°†åæ ‡è½´å¯¹åº”çš„çœŸå®æ•°æ®è¿æ¥èµ·æ¥ï¼Œä¸€èˆ¬å°±æ˜¯å°†åæ ‡è½´è¦å±•ç¤ºçš„æ•°æ®çš„æœ€å¤§æœ€å°å€¼æ”¾è¿›æ¥ã€‚<code>d3.extent</code>å¯ä»¥è‡ªåŠ¨çš„ç®—å‡ºæ•°ç»„å†…çš„æœ€å°ï¼Œæœ€å¤§å€¼ï¼Œå¾ˆæ–¹ä¾¿ã€‚å¦‚ä¸‹xè½´çš„è®¡ç®—ã€‚<br>v4æ”¯æŒaxisBottomï¼ŒaxisTopï¼ŒaxisRightï¼ŒaxisLeftç­‰å¿«æ·æ“ä½œï¼Œå°±æ˜¯è¯´æ˜åæ ‡è½´çš„å±•ç°æ–¹å¼ã€‚<br>è§„å®šå¥½domainåï¼Œå¯ä»¥å°†è½´å±•ç¤ºåœ¨å›¾åƒä¸­äº†ã€‚ç»™å‡ºselectorç„¶åè°ƒç”¨call(å¦‚æœæ˜¯xè½´ï¼Œè®°å¾—æŠŠä¸Šé¢xè½´å‡½æ•°ä¼ è¿›æ¥ï¼Œyè½´åŒç†)ï¼ŒåŒæ—¶ï¼Œè¿™é‡Œå¯ä»¥è§„å®šè½´çº¿æ ·å¼å’Œ<a href="https://github.com/d3/d3-axis" target="_blank" rel="external">åˆ»åº¦</a>çš„ç›¸å…³å†…å®¹ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¯è§„å®šäº†ï¼Œæœ€å¤§æœ€å°å€¼ä¸­é—´è¿˜å¯ä»¥æœ‰å¤šå°‘ä¸ªåˆ»åº¦ã€‚</p>
<pre><code>x.domain(d3.extent(data, d =&gt; d.ts * 1000));
y.domain([0, d3.max(data, d =&gt; d.y * 1.1 )]);
// Add the X Axis
g.append(&quot;g&quot;).attr(&quot;transform&quot;, `translate(0,${height})`)
  .call(d3.axisBottom(x).ticks(5));
// Add the Y Axis
g.append(&quot;g&quot;).attr(&quot;transform&quot;, `translate(0,0)`)
  .call(d3.axisLeft(y).ticks(8));
</code></pre></li>
<li><p>çº¿ä¸Šæ‰“ç‚¹<br>çº¿ä¸Šæ‰“ç‚¹ï¼Œä¸»è¦æ˜¯é€šè¿‡lineå‡½æ•°ï¼Œè·å–ç‚¹çš„centerä½ç½®ã€‚éœ€è¦å°†dataç»‘å®šåˆ°circleæ ‡ç­¾ä¸Šï¼Œæœ€åæ ¹æ®lineå‡½æ•°ç»˜åˆ¶å‡ºæ¥ã€‚</p>
<pre><code>g.selectAll(&quot;.dot&quot;)
.data(data).enter().append(&quot;circle&quot;).attr(&apos;class&apos;, &apos;.dot&apos;)
.attr(&quot;cx&quot;, line.x()).attr(&quot;cy&quot;, line.y())
.transition(500)
.attr(&quot;r&quot;, 3.5).attr(&apos;fill&apos;, &apos;white&apos;).attr(&apos;stroke&apos;, &apos;#f33155&apos;);
</code></pre></li>
</ol>
<ol>
<li><p>æ•°æ®label<br>ç±»ä¼¼çš„ï¼Œlabelä¹Ÿæ˜¯æ ¹æ®lineå‡½æ•°è·å–ä½ç½®ï¼Œç„¶åå°†è¦ç°å®çš„å€¼ï¼Œç”¨textå±æ€§æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<pre><code>g.selectAll(&quot;.text&quot;)
    .data(this.data).enter().append(&quot;text&quot;)
    .attr(&apos;class&apos;, &apos;.text&apos;).attr(&apos;font-size&apos;, 12)
    .attr(&quot;x&quot;, line.x()).attr(&quot;y&quot;, line.y())
    .attr(&apos;dx&apos;, -15).attr(&apos;dy&apos;, 7)
    .text(function(d) { return d.y})
    .transition(500)
    .attr(&apos;fill&apos;, &apos;#333&apos;).attr(&apos;stroke&apos;, &apos;#333&apos;);
</code></pre></li>
</ol>
<p>å½“ç»‘å®šäº†dataæ•°æ®åï¼Œxå‡½æ•°ï¼Œyå‡½æ•°ï¼Œä¼šè‡ªåŠ¨æŒ‰é¡ºåºè·å–æ•°æ®ã€‚</p>
<p>æœ€åç»“æœï¼š<br><a href="https://codepen.io/akixiao/pen/eRyBdY" target="_blank" rel="external">å‚è€ƒ</a><br><img src="./line.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;d3-æŠ˜çº¿å›¾&quot;&gt;&lt;a href=&quot;#d3-æŠ˜çº¿å›¾&quot; class=&quot;headerlink&quot; title=&quot;d3-æŠ˜çº¿å›¾&quot;&gt;&lt;/a&gt;d3-æŠ˜çº¿å›¾&lt;/h1&gt;&lt;p&gt;ä»ä¸€ä¸ªæœ€åŸºæœ¬çš„æŠ˜çº¿å›¾å¼€å§‹ï¼Œçœ‹çœ‹d3æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä»¥åŠç”¨åˆ°å“ªäº›çŸ¥è¯†&lt;/p&gt;
&lt;h2 id=&quot;éœ€è¦çš„çŸ¥è¯†&quot;&gt;&lt;a
    
    </summary>
    
    
      <category term="d3" scheme="https://misssweety.github.io/tags/d3/"/>
    
      <category term="line" scheme="https://misssweety.github.io/tags/line/"/>
    
      <category term="å¯è§†åŒ–" scheme="https://misssweety.github.io/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>gitå®ç”¨æŒ‡ä»¤</title>
    <link href="https://misssweety.github.io/2017/06/02/git%E5%AE%9E%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
    <id>https://misssweety.github.io/2017/06/02/gitå®ç”¨æŒ‡ä»¤/</id>
    <published>2017-06-02T02:51:14.000Z</published>
    <updated>2017-06-02T03:23:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®ç”¨æŒ‡ä»¤"><a href="#å®ç”¨æŒ‡ä»¤" class="headerlink" title="å®ç”¨æŒ‡ä»¤"></a>å®ç”¨æŒ‡ä»¤</h1><h2 id="å›æ»šç›¸å…³"><a href="#å›æ»šç›¸å…³" class="headerlink" title="å›æ»šç›¸å…³"></a>å›æ»šç›¸å…³</h2><p>æœ€è¿‘åˆå¥½å¥½å¤ä¹ äº†ä¸‹resetæŒ‡ä»¤ã€‚<br>ä¸€èˆ¬è¿™äº›å›æ»šçš„æ“ä½œæœ€å¥½ä¸è¦ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤šäººå¼€å‘çš„æ—¶å€™ï¼Œä½†æ˜¯å¶å°”æƒ³ç”¨ï¼Œè¿˜æœ‰ç‚¹æ¨¡ç³Šäº†ï¼Œè¿™æ¬¡åœ¨è®°å½•ä¸€ä¸‹ã€‚</p>
<h3 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h3><p>æ­¥éª¤ï¼š<br>readmeä¸­åˆ†åˆ«æ·»åŠ   </p>
<p>test1<br>tess2<br>test3  </p>
<p>æ¯ä¸€å¥æ·»åŠ ä¸€ä¸ªcommit<br>å…ˆçœ‹ä¸‹log</p>
<pre><code>git log
</code></pre><p><img src="./reset-1.png" width="400px"></p>
<p>æš‚å­˜åŒºæœ‰å…¶ä»–ä¿®æ”¹ï¼Œä½†æ²¡æœ‰addã€‚</p>
<p>æ­¤æ—¶ï¼Œ<strong>æˆ‘æ”¹é”™äº†</strong>ï¼Œæƒ³<strong>å›é€€åˆ°test1</strong>çš„çŠ¶æ€ã€‚ç”¨</p>
<pre><code>git reset --hard 46670a
</code></pre><p>æ‰§è¡Œåï¼Œæš‚å­˜åŒºçš„å†…å®¹ä¹Ÿæ¸…ç©ºäº†ï¼Œreadmeä¸­ï¼Œåªæœ‰test1 äº†ã€‚<br>æŸ¥çœ‹git logå‰ä¸¤ä¸ªæäº¤ä¹Ÿä¸è§äº†ã€‚</p>
<p><img src="./reset-2.png" width="400px"></p>
<p>å‡å¦‚æˆ‘åæ‚”äº†ï¼Œæˆ‘åˆä¸æƒ³å›é€€äº†ï¼Œæˆ‘è¿˜æƒ³åœ¨test3çš„æƒ…å†µä¸‹ä¿®æ”¹ã€‚</p>
<p>git reflog<br><img src="./reset-3.png" width="400px"><br>å¯ä»¥çœ‹åˆ°æŒ‡ä»¤çš„logï¼Œä»è¿™é‡Œå¯ä»¥æ‰¾å›ä¹‹å‰å›é€€çš„ç›¸å…³commit<br>è¿™é‡Œä¼šè®°å½•ç€è¿˜æœªè¢«å›æ”¶çš„commitå·ã€‚<br>æ­¤æ¬¡ï¼Œæˆ‘æŠŠå†…å®¹æ·»åŠ åˆ°æš‚å­˜åŒºäº†ï¼Œä¹Ÿå°±æ˜¯addè¿‡äº†ï¼Œ<br>å†æ¬¡ä½¿ç”¨resetï¼Œå›æ»šåˆ°åŸæ¥çš„test3çš„çŠ¶æ€</p>
<pre><code>git reset --hard 9d91688
</code></pre><p>å†…å®¹å›åˆ°test3 å¤„çš„commitï¼Œå¹¶ä¸”ï¼Œä¹‹å‰addåˆ°æš‚å­˜åŒºçš„éƒ½æ²¡äº†</p>
<p>çœŸæƒ³å›æ»šï¼Œç”¨<code>reset</code>å°±å¤Ÿäº†ã€‚</p>
<h3 id="revert"><a href="#revert" class="headerlink" title="revert"></a>revert</h3><p>å…¶å®æ˜¯å–æ¶ˆæŸä¸ªæäº¤çš„æ„æ€ã€‚<br>revert  åŠŸèƒ½ï¼šrevertæ˜¯æ’¤é”€æŸä¸€æ¬¡çš„æäº¤ï¼Œå¹¶ä¸æ˜¯å›æ»šåˆ°è¿™æ¬¡æäº¤æ—¶çš„çŠ¶æ€ï¼ï¼ï¼  </p>
<p>revert çš„å†å²ä¿ç•™åœ¨commitä¸­</p>
<h3 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h3><p>ç”¨æ¥åˆå¹¶å¤šä¸ªcommits<br>åœºæ™¯ï¼Œæˆ‘ä»¬è‡ªå·±åœ¨æœ¬åœ°æ”¹äº†å¥½å¤šä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œä½†æ˜¯å¹¶ä¸æƒ³è®©æ‰€æœ‰çš„commitä¿¡æ¯ï¼Œæ¯”å¦‚fixä¹‹ç±»çš„éƒ½æäº¤ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨rebase é…åˆ squash ï¼Œåˆå¹¶commitã€‚</p>
<p>è¿‡ç¨‹å¦‚ä¸‹ï¼š<br>å…ˆ</p>
<pre><code>git logï¼š
</code></pre><p><img src="./rebase-1.png" width="400px"></p>
<p>æˆ‘ä»¬æƒ³å°†0fad78ccc3åˆ°ç°åœ¨çš„commitéƒ½åˆå¹¶, é‚£ä¹ˆå…ˆrebaseåˆ°é‚£ä¸ªä¸å˜åŠ¨çš„commit</p>
<pre><code>git rebase -i 4c9bc3a7
</code></pre><p>å¦‚ä¸‹ï¼š<br><img src="./rebase-2.png" width="400px"></p>
<p>éœ€è¦ç•™ä¸€ä¸ªpickï¼Œå…¶ä»–éƒ½æ”¹æˆsquash, å¦‚ä¸‹<br><img src="./rebase-3.png" width="400px"></p>
<p><code>esc</code> <code>:wq</code><br>ä¿å­˜åï¼Œè¿™æ ·å°±æŠŠå…¶ä»–çš„æäº¤éƒ½åˆå¹¶äº†ã€‚è‡ªåŠ¨è·³åˆ°å¦‚ä¸‹ç•Œé¢(è¿™é‡Œå¯ä»¥é‡å†™åˆå¹¶çš„commitå†…å®¹äº†)<br><img src="./rebase-4.png" width="400px"></p>
<p>ä¿®æ”¹å®Œæ¯•ï¼Œ<code>esc</code>  <code>:wq</code> ä¿å­˜<br><img src="./rebase-5.png" width="400px"></p>
<p>æœ€åï¼Œçœ‹ä¸‹git logï¼Œå¹²å‡€äº†ï¼ï¼ï¼ï¼</p>
<h3 id="è¿œç«¯åˆ†æ”¯å›æ»š"><a href="#è¿œç«¯åˆ†æ”¯å›æ»š" class="headerlink" title="è¿œç«¯åˆ†æ”¯å›æ»š"></a>è¿œç«¯åˆ†æ”¯å›æ»š</h3><p>å¦‚æœè¿œç«¯å¯¹åº”çš„åˆ†æ”¯ä¹Ÿæƒ³ä¿®æ”¹ï¼Œå¿…é¡»è¦â€”force</p>
<pre><code>git push --force origin branch-name
</code></pre><h3 id="åˆªé™¤è¿œç«¯åˆ†æ”¯"><a href="#åˆªé™¤è¿œç«¯åˆ†æ”¯" class="headerlink" title="åˆªé™¤è¿œç«¯åˆ†æ”¯"></a>åˆªé™¤è¿œç«¯åˆ†æ”¯</h3><pre><code>git push origin --delete target_branch
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å®ç”¨æŒ‡ä»¤&quot;&gt;&lt;a href=&quot;#å®ç”¨æŒ‡ä»¤&quot; class=&quot;headerlink&quot; title=&quot;å®ç”¨æŒ‡ä»¤&quot;&gt;&lt;/a&gt;å®ç”¨æŒ‡ä»¤&lt;/h1&gt;&lt;h2 id=&quot;å›æ»šç›¸å…³&quot;&gt;&lt;a href=&quot;#å›æ»šç›¸å…³&quot; class=&quot;headerlink&quot; title=&quot;å›æ»šç›¸å…³&quot;&gt;&lt;/a
    
    </summary>
    
    
      <category term="git" scheme="https://misssweety.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½</title>
    <link href="https://misssweety.github.io/2017/05/25/%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96/"/>
    <id>https://misssweety.github.io/2017/05/25/ç½‘ç»œä¼˜åŒ–/</id>
    <published>2017-05-25T02:48:54.000Z</published>
    <updated>2017-05-25T03:02:09.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½"><a href="#å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½" class="headerlink" title="å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½"></a>å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½</h1><p>ä¸€ä¸ªç½‘ç«™ä»å¼€å§‹è®¿é—®ï¼Œå‘é€è¯·æ±‚ï¼Œé¡µé¢æ¸²æŸ“ï¼Œå¼‚æ­¥è¯·æ±‚ï¼Œåˆ°æœ€ç»ˆå‘ˆç°ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰å„è‡ªä¸åŒçš„ä¼˜åŒ–ç‚¹ã€‚  </p>
<p>å‰ä¸€æ®µæ—¶é—´ï¼Œè‡ªå·±é¡¹ç›®çš„ç½‘ç«™åœ¨åŠ è½½å’Œæ¸²æŸ“çš„æ—¶å€™è¡¨ç°å¾ˆå¥‡æ€ªï¼Œé‚ä»”ç»†ç”¨èµ·chromeçš„networkä»¥åŠtimelineé¢æ¿ï¼ŒæœŸå¾…æ‰¾åˆ°é—®é¢˜çš„æ ¹æºã€‚ç”¨çš„æ—¶å€™å‘ç°å¾ˆå¤šè‡ªå·±ç¼ºå¤±çš„çŸ¥è¯†ï¼Œäºæ˜¯å°±æœ‰è¿™ç¯‡æ–‡ç« è®°å½•æŸ¥ç¼ºè¡¥æ¼çš„å†…å®¹ã€‚</p>
<p>è¿™é‡Œå…ˆä»ç½‘ç»œæ€§èƒ½è§’åº¦æ¥çœ‹ï¼Œå®ƒå°†ä»åˆå§‹é˜¶æ®µå½±å“ç½‘ç«™çš„æ€§èƒ½ã€‚<br>ä¸‹é¢ä¼šä»¥chromeä¸­çš„networké¢æ¿å‡ºå‘ï¼Œä»ä¸‰ç‚¹ä»‹ç»ç½‘ç»œæ€§èƒ½ç›¸å…³å†…å®¹ï¼Œåˆ†åˆ«åŒ…æ‹¬ï¼š<strong>ä¸»è¦ç½‘ç»œå±æ€§</strong>ï¼Œ<strong>å¦‚ä½•åœ¨chrome devtoolä¸­æŸ¥çœ‹ç½‘ç»œæ€§èƒ½</strong>ï¼Œ<strong>å¦‚ä½•ä¼˜åŒ–</strong>  </p>
<h2 id="ä¸»è¦ç½‘ç»œå±æ€§"><a href="#ä¸»è¦ç½‘ç»œå±æ€§" class="headerlink" title="ä¸»è¦ç½‘ç»œå±æ€§"></a>ä¸»è¦ç½‘ç»œå±æ€§</h2><p>è¿™é‡Œä¸»è¦å…³æ³¨timingè¿™ä¸ªå±æ€§ã€‚æŸä¸ªè¯·æ±‚çš„timingå¦‚ä¸‹ï¼š<br><img src="./å±å¹•å¿«ç…§ 2017-05-23 ä¸‹åˆ8.33.48.png"></p>
<p>åœ¨networké¡µé¢ç‚¹å‡»å…·ä½“çš„è¯·æ±‚urlå³å¯è¿›å…¥ä¸Šè¿°é¡µé¢ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ä¸€æ¡èµ„æºä»åˆ—é˜Ÿã€åœæ»ã€ä»£ç†åè®®ã€åˆå§‹åŒ–è¿æ¥ã€SSLåè®®ã€å‘é€requestã€ç­‰å¾…åŠå†…å®¹ä¸‹è½½æ‰€è€—çš„æ—¶é—´ã€‚ </p>
<h3 id="ä¸»è¦å±æ€§"><a href="#ä¸»è¦å±æ€§" class="headerlink" title="ä¸»è¦å±æ€§"></a>ä¸»è¦å±æ€§</h3><ul>
<li>Queueingæ—¶é—´ï¼šè¯·æ±‚æ’é˜Ÿçš„æ—¶é—´ï¼Œå‡ºç°åŸå› æœ‰ï¼šæ›´é«˜ä¼˜å…ˆçº§çš„è¯·æ±‚ï¼Œæˆ–è€…åœ¨HTTP/1.0å’ŒHTTP/1.1ä¸­ï¼Œå·²ç»æœ‰6ä¸ªåŒæºè¯·æ±‚åœ¨è¿›è¡Œä¸­</li>
<li>Stalledé˜»å¡æ—¶é—´ï¼šåŸå› å¦‚ä¸Šqueueing</li>
<li>DNS Lookup. æµè§ˆå™¨è§£æè¯·æ±‚çš„ipåœ°å€éœ€è¦çš„æ—¶é—´</li>
<li>Proxy negotiation. ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡éœ€è¦çš„æ—¶é—´</li>
<li>Initial Connection / connecting: å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ï¼ŒåŒ…å«TCPæ¡æ‰‹/é‡è¯•ï¼Œå•†å®šSSL</li>
<li>SSL: å®ŒæˆSSLæ¡æ‰‹é˜¶æ®µ</li>
<li>Request sentï¼šå‘é€è¯·æ±‚è€—æ—¶ï¼Œé€šå¸¸åªè¦ä¸åˆ°1msçš„æ—¶é—´</li>
<li>ServiceWorker Preparation.æµè§ˆå™¨å¯åŠ¨æœåŠ¡workerçš„æ—¶é—´</li>
<li>Request to ServiceWorker.The request is being sent to the service worker.</li>
<li>Waiting (TTFB). æ”¶åˆ°é¦–å­—èŠ‚çš„æ—¶é—´ã€‚</li>
<li>Content Download. æµè§ˆå™¨æ¥æ”¶å“åº”æ•°æ®çš„æ—¶é—´ã€‚</li>
</ul>
<h3 id="performance-api"><a href="#performance-api" class="headerlink" title="performance api"></a>performance api</h3><p>ä¸Šé¢è¿™äº›èµ„æºæ•°æ®æ˜¯æ ¹æ®jsçš„æ€§èƒ½apiè®¡ç®—çš„ã€‚<br><strong>window.performance.getEntries()</strong> è·å–èµ„æºåŠ è½½æ—¶é—´åˆ—è¡¨ã€‚æ¯ä¸ªperformanceResourceTimingå¤§æ¦‚å¦‚ä¸‹ï¼š<br><img src="./å±å¹•å¿«ç…§ 2017-05-23 ä¸‹åˆ8.34.34.png"> </p>
<ul>
<li>connectEndï¼šæµè§ˆå™¨ä¸æœåŠ¡å™¨å®Œæˆå»ºç«‹ç”¨ä»¥æ£€ç´¢èµ„æºçš„ç½‘ç»œè¿æ¥çš„æ—¶é—´æˆ³  </li>
<li>connectStartï¼šæµè§ˆå™¨ä¸æœåŠ¡å™¨å¼€å§‹å»ºç«‹ç”¨ä»¥æ£€ç´¢èµ„æºçš„ç½‘ç»œè¿æ¥çš„æ—¶é—´æˆ³</li>
<li>damainLookupEndï¼šæµè§ˆå™¨å®Œæˆèµ„æºçš„åŸŸåè§£æçš„æ—¶é—´æˆ³</li>
<li>damainLookupStartï¼šæµè§ˆå™¨å¼€å§‹è¿›è¡Œèµ„æºçš„åŸŸåè§£æçš„æ—¶é—´æˆ³</li>
<li>durationï¼šèµ„æºè¯·æ±‚ä»å¼€å§‹åˆ°ç»“æŸçš„æ—¶é—´å·®</li>
<li>entryTypeï¼šPerformanceEntryå¯¹è±¡çš„ç±»å‹ï¼Œè¯¥å¯¹è±¡å°è£…ä¸€ä¸ªå•ä¸€çš„æ€§èƒ½æŒ‡æ ‡ä½œä¸ºæ€§èƒ½è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œæ­¤ç±»å‹æ˜¯<code>frame</code>, <code>mark</code>, <code>measure</code>, <code>navigation</code>, <code>resource</code>,<code>server</code>çš„å…¶ä¸­ä¸€ä¸ªã€‚</li>
<li>fetchStartï¼šæµè§ˆå™¨å¼€å§‹è·å–èµ„æºçš„æ—¶é—´æˆ³</li>
<li>initiatorTypeï¼šèµ„æºæ–‡ä»¶çš„ç±»å‹</li>
<li>nameï¼šèµ„æºçš„url</li>
<li>redirectEndï¼šæ¥æ”¶åˆ°é‡å®šå‘èµ„æºçš„æœ€åä¸€ä¸ªå“åº”å­—èŠ‚çš„æ—¶é—´æˆ³</li>
<li>redirectStartï¼šå¯åŠ¨é‡å®šå‘ä»¥è·å–èµ„æºçš„å¼€å§‹æ—¶é—´æˆ³</li>
<li>requestStartï¼šæµè§ˆå™¨ä»æœåŠ¡å™¨è¯·æ±‚èµ„æºçš„å¼€å§‹æ—¶é—´æˆ³</li>
<li>responseEndï¼šæµè§ˆå™¨æ¥æ”¶åˆ°èµ„æºæœ€åä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´æˆ³ï¼Œæˆ–è€…å…³é—­ä¼ è¾“è¿æ¥çš„æ—¶é—´æˆ³</li>
<li>responseStartï¼šæµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´æˆ³</li>
<li>secureConnectionStartï¼šæµè§ˆå™¨å¼€å§‹æ¡æ‰‹åè®®ï¼Œä»¥ä¿æŠ¤å½“å‰è¿æ¥çš„å®‰å…¨æ€§ï¼Œæ¡æ‰‹å¼€å§‹çš„æ—¶é—´</li>
<li>startTimeï¼šæµè§ˆå™¨å¼€å§‹è·å–èµ„æºå‰çš„æ—¶é—´æˆ³(æ•´ä¸ªè¿‡ç¨‹çš„å¼€å§‹æ—¶é—´)</li>
<li>workerStartï¼šå¦‚æœå½“å‰ä¸Šä¸‹æ–‡æ˜¯â€workerâ€ï¼Œè¿”å›å¼€å§‹è·å–èµ„æºçš„æ—¶é—´æˆ³ï¼Œå¦åˆ™è¿”å›0(åº”è¯¥æ˜¯åº”ç”¨äºåŒå·¥é€šä¿¡çš„)</li>
</ul>
<p>ä¸‹é¢è¿™å¼ å›¾å®šä¹‰äº†PerformanceResourceTiming æ¥å£çš„å„ä¸ªæ—¶é—´å±æ€§ï¼š</p>
<p><img src="./resource-timing-overview-1.png"></p>
<p><strong>performance.timing()</strong> è·å–é¡µé¢æ•´ä½“çš„æ—¶é—´å‚æ•°<br><img src="./å±å¹•å¿«ç…§ 2017-05-24 ä¸Šåˆ11.56.02.png"></p>
<p>è¿™ä¸ªapiå¯ä»¥å‚è€ƒè¿™ä¸ªéæ­£å¼çš„æ ‡å‡†è§„èŒƒ<a href="https://www.w3.org/TR/resource-timing/" target="_blank" rel="external">Resouce timing - w3c</a>   <a href="https://www.w3.org/TR/performance-timeline/#sec-PerformanceEntry-interface" target="_blank" rel="external">old one</a></p>
<p>è¯¥è§„èŒƒå®šä¹‰äº†ä¸€ä¸ªç”¨äºWebåº”ç”¨ç¨‹åºçš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£å¯ä»¥è®¿é—®æ–‡æ¡£éœ€è¦çš„èµ„æºçš„å®Œæ•´æ—¶åºä¿¡æ¯ã€‚ æ¥å£çš„è¯¦ç»†è¯´æ˜è¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œç»†èŠ‚äº†è§£éœ€è¦è‡ªå·±å»è¯»æ ‡å‡†ã€‚ ä¸‹é¢åªæŒ‘å’Œæˆ‘ä»¬ç›¸å…³çš„å†…å®¹ã€‚ </p>
<p>ç”±ä¸Šé¢è¿™ä¸ªå›¾ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°chromeç½‘ç»œé¢æ¿ä¸­ï¼Œtimingçš„ç›¸å…³ä¿¡æ¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼š   </p>
<p>é¡µé¢æ•´ä½“çš„æ—¶é—´å‚æ•° ï¼ˆmtaåº”è¯¥æœ‰ç”¨åˆ°ä»¥ä¸‹å‚æ•°ï¼‰ </p>
<pre><code>pageloadtime = t.loadEventStart - t.navigationStart,  
dns = t.domainLookupEnd - t.domainLookupStart,  
tcp = t.connectEnd - t.connectStart,  
ttfb = t.responseStart - t.navigationStart; 
</code></pre><p>æŸä¸ªèµ„æºçš„æ—¶é—´å‚æ•° </p>
<pre><code>var r0 = performance.getEntriesByType(&quot;resource&quot;)[0],
    loadtime = r0.duration,
    dns = r0.domainLookupEnd - r0.domainLookupStart,
    tcp = r0.connectEnd - r0.connectStart,
    ttfb = r0.responseStart - r0.startTime;
</code></pre><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æµ‹é‡æ—¶é—´çš„é—®é¢˜ï¼Œè¯·å‚è€ƒ<a href="http://mutongwu.iteye.com/blog/2164917?utm_source=tuicool" target="_blank" rel="external">performanceçš„èµ„æºè®¡æ—¶ç»Ÿè®¡</a><br>å…¶ä»–æ–¹æ³•ä½¿ç”¨ï¼Œå‚è€ƒ<a href="http://www.alloyteam.com/2015/09/explore-performance/" target="_blank" rel="external">åˆæ¢performance-ç›‘æ§ç½‘é¡µä¸ç¨‹åºæ€§èƒ½</a>  </p>
<h2 id="å¦‚ä½•åœ¨chrome-devtoolä¸­æŸ¥çœ‹ç½‘ç»œæ€§èƒ½"><a href="#å¦‚ä½•åœ¨chrome-devtoolä¸­æŸ¥çœ‹ç½‘ç»œæ€§èƒ½" class="headerlink" title="å¦‚ä½•åœ¨chrome devtoolä¸­æŸ¥çœ‹ç½‘ç»œæ€§èƒ½"></a>å¦‚ä½•åœ¨chrome devtoolä¸­æŸ¥çœ‹ç½‘ç»œæ€§èƒ½</h2><p>åœ¨chrome devtoolä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå„ç§ç½‘ç»œç¯å¢ƒï¼Œå¯ä»¥è¿‡æ»¤è¯·æ±‚ï¼ŒæŸ¥çœ‹httpè¯·æ±‚ä¿¡æ¯ï¼Œäº†è§£domåŠ è½½æ—¶é—´ï¼Œcookieä¿¡æ¯ï¼Œèµ„æºçš„ä¸Šä¸‹æ¸¸ç­‰ç­‰ã€‚</p>
<p>å†…å®¹ç•¥å¤šï¼Œå‚è€ƒè¿™é‡Œï¼Œchrome developers å®˜ç½‘<a href="https://developers.google.com/web/tools/chrome-devtools/network-performance/" target="_blank" rel="external">æµ‹é‡ç½‘ç»œæ€§èƒ½</a><br>è‹±æ–‡ä¸å¥½çš„å¯ä»¥çœ‹è¿™ä¸ªï¼š<a href="http://www.jianshu.com/p/471950517b07" target="_blank" rel="external">Chrome DevTools ä¹‹ Networkï¼Œç½‘ç»œåŠ è½½åˆ†æåˆ©å™¨</a></p>
<h2 id="å¦‚ä½•ä¼˜åŒ–"><a href="#å¦‚ä½•ä¼˜åŒ–" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–"></a>å¦‚ä½•ä¼˜åŒ–</h2><p>ç½‘ç«™åŠ è½½æ—¶é—´å¯¹ç”¨æˆ·çš„å½±å“ï¼š<br>0.1ç§’ï¼šç§’å¼€<br>100-300 ï¼šæ¯”è¾ƒå°çš„å¯å¯Ÿè§‰çš„å»¶è¿Ÿ<br>300-1sï¼šMachine is working<br>1ç§’ï¼šè¿˜èƒ½æ¥å—ï¼Œä½†æ˜¯å·²ç»ä¸å¼€å¿ƒäº†<br>10ç§’ï¼šä»€ä¹ˆç ´ç©æ„ï¼Œä¸æƒ³çœ‹äº†<br>chrome developeré‡Œæåˆ°ï¼Œç›®æ ‡æ˜¯250ms</p>
<p>ä¼˜åŒ–ä¸»è¦ä»å››ä¸ªå±æ€§å…¥æ‰‹ï¼Œä»¥ä¸‹åŸºæœ¬ç¿»è¯‘è‡ªchrome devtool </p>
<h3 id="Queued-or-stalled-requests"><a href="#Queued-or-stalled-requests" class="headerlink" title="Queued or stalled requests"></a>Queued or stalled requests</h3><p>è¿™ä¸¤ä¸ªæŒ‡æ ‡å¦‚æœæ—¶é—´å¾ˆé•¿ï¼Œè¯´æ˜å¾ˆå¤šèµ„æºç­‰å¾…<br><strong>é€ æˆçš„åŸå› </strong>ï¼šè®¿é—®åŒä¸€ä¸ªåŸŸåçš„è¯·æ±‚å¤ªå¤šï¼Œå¯¹äºhttp1.1æ¥è¯´ï¼Œæ¯ä¸ªhostæœ€å¤šåŒæ—¶æ”¯æŒ6ä¸ªtcpè¿æ¥ã€‚</p>
<p><strong>è§£å†³</strong>ï¼š</p>
<ul>
<li>åŸŸååˆ†ç‰‡ï¼šå°†èµ„æºæ”¾åœ¨ä¸åŒçš„åŸŸåä¸­ï¼Œç”¨æ¥å…‹æœæµè§ˆå™¨å¯¹åŒä¸€ä¸ªåŸŸåè®¿é—®çš„é™åˆ¶ï¼Œä½†æ˜¯ä¸èƒ½è¿‡å¤šå› ä¸ºdnsè§£æä¹Ÿéœ€è¦æ—¶é—´  </li>
</ul>
<p><strong>[å¤‡æ³¨]</strong>domain sharding (åŸŸååˆ†ç‰‡)ï¼ˆ<a href="https://wp-rocket.me/blog/difference-cdn-and-domain-sharding/" target="_blank" rel="external">å’Œcdnçš„ä¸åŒ</a>åŸŸååˆ†ç‰‡æ˜¯ä¸€ç§åˆ†å¸ƒæ–¹å¼ï¼Œæ˜¯å°†èµ„æºåˆ†å¸ƒåœ¨ä¸åŒçš„åŸŸåä¸­è¾¾åˆ°å…‹æœæµè§ˆå™¨è®¿é—®é™åˆ¶çš„ç›®çš„ï¼›cdnåˆ™æ˜¯åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šæ‰˜ç®¡ä¸–ç•Œå„åœ°çš„ç½‘ç«™èµ„æºã€‚<br>ï¼‰</p>
<ul>
<li>ä½¿ç”¨http2.0<br>è®©é‡è¦çš„è¯·æ±‚å…ˆå‘èµ·ï¼Œä¸é‡è¦çš„removeæˆ–è€…æ¨è¿Ÿã€‚</li>
</ul>
<h3 id="Slow-Time-To-First-Byte-TTFB"><a href="#Slow-Time-To-First-Byte-TTFB" class="headerlink" title="Slow Time To First Byte (TTFB)"></a>Slow Time To First Byte (TTFB)</h3><p><strong>èµ·å› ï¼š</strong> clientä¸serverçš„è¿æ¥æ…¢ï¼›serverå“åº”å¤ªæ…¢</p>
<p><strong>è§£å†³ï¼š</strong></p>
<ul>
<li>è¿æ¥æ…¢ï¼Œ ä½¿ç”¨cdnï¼Œæˆ–è€…æ¢ä¸ªæœåŠ¡å•†</li>
<li>å¦‚æœserveræ…¢ï¼Œä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ï¼Œç”¨ç¼“å­˜ï¼Œä¿®æ”¹serveré…ç½®ç­‰ã€‚</li>
</ul>
<h3 id="Slow-content-download"><a href="#Slow-content-download" class="headerlink" title="Slow content download"></a>Slow content download</h3><p><strong>åŸå› ï¼š</strong>ç½‘ç»œä¸å¥½ï¼›å†…å®¹è¿‡å¤§</p>
<p><strong>è§£å†³ï¼š</strong></p>
<ul>
<li>è¿æ¥æ…¢ï¼Œ ä½¿ç”¨cdnï¼Œæˆ–è€…æ¢ä¸ªæœåŠ¡å•†ï¼›</li>
<li>ä¼˜åŒ–è¯·æ±‚ä½¿æ•°æ®æ›´å°‘ã€‚</li>
</ul>
<p><hr><br>ä»¥ä¸Šæ˜¯å…³äºç½‘ç»œå±‚é¢çš„ç½‘ç«™ä¼˜åŒ–å†…å®¹ï¼Œä¸å‰ç«¯äººå‘˜å¼€å‘æŠ€æœ¯èƒ½åŠ›ç›¸å…³æ€§ä¸å¤§ï¼Œéœ€è¦ä¸€äº›ç½‘ç»œå±‚é¢ä»¥åŠåå°æ¥æ”¯æŒã€‚å½“æˆ‘ä»¬å‘ç°ç½‘é¡µåŠ è½½è¿‡æ…¢çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆä»ç½‘ç»œè¿™è¾¹å…¥æ‰‹ï¼ŒæŠŠç½‘ç»œå’Œè¿æ¥çš„åŸºç¡€é—®é¢˜æ’æŸ¥åï¼Œå†ä»ä¼˜åŒ–è‡ªå·±å†™çš„ä»£ç å…¥æ‰‹ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½&quot;&gt;&lt;a href=&quot;#å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½&quot; class=&quot;headerlink&quot; title=&quot;å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½&quot;&gt;&lt;/a&gt;å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½&lt;/h1&gt;&lt;p&gt;ä¸€ä¸ªç½‘ç«™ä»å¼€å§‹è®¿é—®ï¼Œå‘é€è¯·æ±‚ï¼Œé¡µé¢æ¸²æŸ“ï¼Œå¼‚æ­¥è¯·æ±‚ï¼Œåˆ°æœ€ç»ˆå‘ˆç°ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰å„è‡ªä¸åŒçš„
    
    </summary>
    
    
      <category term="timing" scheme="https://misssweety.github.io/tags/timing/"/>
    
  </entry>
  
  <entry>
    <title>é«˜å¾·åœ°å›¾apiä½¿ç”¨æ€»ç»“</title>
    <link href="https://misssweety.github.io/2017/05/18/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BEapi%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"/>
    <id>https://misssweety.github.io/2017/05/18/é«˜å¾·åœ°å›¾apiä½¿ç”¨æ€»ç»“/</id>
    <published>2017-05-18T04:28:44.000Z</published>
    <updated>2017-05-18T07:11:35.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¸¸ç”¨çš„é«˜å¾·åœ°å›¾api"><a href="#å¸¸ç”¨çš„é«˜å¾·åœ°å›¾api" class="headerlink" title="å¸¸ç”¨çš„é«˜å¾·åœ°å›¾api"></a>å¸¸ç”¨çš„é«˜å¾·åœ°å›¾api</h1><p>å…³äºappkeyï¼Œåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯apiè°ƒç”¨çš„keyï¼Œä¸€ä¸ªæ˜¯åœ°å›¾æœåŠ¡çš„keyï¼Œä¾‹å¦‚ï¼Œè·å–é—¨åº—ä¿¡æ¯ï¼ŒsearchåŠŸèƒ½ç­‰ç­‰ã€‚</p>
<h2 id="è„šæœ¬åŠ è½½"><a href="#è„šæœ¬åŠ è½½" class="headerlink" title="è„šæœ¬åŠ è½½"></a>è„šæœ¬åŠ è½½</h2><pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;http://webapi.amap.com/maps?v=1.3&amp;key=æ‚¨ç”³è¯·çš„keyå€¼&quot;&gt;&lt;/script&gt;
</code></pre><p>éœ€è¦æŠŠè¿™ä¸ªè„šæœ¬åŠ è½½å®Œæˆåï¼Œæ‰èƒ½ä½¿ç”¨AMapã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<code>map-div</code>è¿™ä¸ªç»„ä»¶ã€‚</p>
<p>å¦‚æœæ­é…reactï¼Œéœ€è¦åœ¨componentDidMounté˜¶æ®µï¼Œè°ƒç”¨<code>map-div</code> ä¸­çš„createMapå‡½æ•°ã€‚é…å¥—çš„ï¼Œæœ€å¥½å°†è¯¥åœ°å›¾å®ä¾‹ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªflagä½œä¸ºåœ°å›¾åŠ è½½å®Œæˆçš„æ ‡å¿—ä½ï¼Œä»¥ä¾¿reactä½¿ç”¨ã€‚</p>
<p>ç¤ºä¾‹ï¼š  </p>
<pre><code>mapInstance.js

let __value = null;
export default {
  getter: () =&gt; __value,
  setter: (val) =&gt; { __value = val; },
};
---------------------------------------

const mapConfig = {
  name: &apos;AMap&apos;,
  initOpts: {
    zoom: MAP_CONFIG.zoom,
    zooms: MAP_CONFIG.zooms,
  },
  query: {
    plugin: &apos;AMap.Geocoder,AMap.CitySearch&apos;,
  },
};

componentDidMount() {
  (async () =&gt; {
    const mapIns = await createMap(mapConfig, &apos;mapComponent&apos;);
    mapInstance.setter(mapIns);
    this.props.setMapInstanceFlag(true);
    // ä¸€äº›äº‹ä»¶ç›‘å¬
    mapEventHandler(mapIns, &apos;dragend&apos;, &apos;on&apos;, throttle(this.handleMapScale, 800));
    mapEventHandler(mapIns, &apos;click&apos;, &apos;on&apos;, throttle(this.handleMapClick, 800));

    ...
  })();

  ...
}
</code></pre><h2 id="åˆ›å»ºåœ°å›¾å¯¹è±¡"><a href="#åˆ›å»ºåœ°å›¾å¯¹è±¡" class="headerlink" title="åˆ›å»ºåœ°å›¾å¯¹è±¡"></a>åˆ›å»ºåœ°å›¾å¯¹è±¡</h2><p>éœ€è¦ç»™å‡ºä¸€ä¸ªdivä½œä¸ºåœ°å›¾çš„å®¹å™¨ã€‚</p>
<pre><code>&lt;div id=&quot;container&quot; style=&quot;width:800px; height:500px&quot;&gt;&lt;/div&gt;

var map = new AMap.Map(&apos;container&apos;,{ config })
</code></pre><p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä¸åŠ centerï¼Œåœ°å›¾é»˜è®¤æ˜¾ç¤ºç”¨æˆ·å½“å‰åŸå¸‚èŒƒå›´</p>
<h3 id="configå¸¸ç”¨åŸºæœ¬é…ç½®"><a href="#configå¸¸ç”¨åŸºæœ¬é…ç½®" class="headerlink" title="configå¸¸ç”¨åŸºæœ¬é…ç½®"></a>configå¸¸ç”¨åŸºæœ¬é…ç½®</h3><table>
<thead>
<tr>
<th>options</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>zoom</td>
<td>ç¼©æ”¾çº§åˆ«</td>
</tr>
<tr>
<td>center</td>
<td>åœ°å›¾ä¸­å¿ƒç‚¹åæ ‡[lon, lat]</td>
</tr>
<tr>
<td>zooms</td>
<td>åœ°å›¾å¯ä»¥ç¼©æ”¾çš„èŒƒå›´ ï¼Œæ•°ç»„æ ¼å¼[max, min]</td>
</tr>
<tr>
<td>zoomEnable</td>
<td>æ˜¯å¦å¯ç¼©æ”¾ï¼Œé»˜è®¤ä¸ºtrue</td>
</tr>
<tr>
<td>dragEnable</td>
<td>æ˜¯å¦å¯æ‹–æ‹½ï¼Œé»˜è®¤ä¸ºtrue</td>
</tr>
<tr>
<td>mapStyle</td>
<td>åœ°å›¾æ˜¾ç¤ºæ ·å¼ï¼Œnormalï¼ˆé»˜è®¤æ ·å¼ï¼‰ã€darkï¼ˆæ·±è‰²æ ·å¼ï¼‰ã€lightï¼ˆæµ…è‰²æ ·å¼ï¼‰ã€fresh(osmæ¸…æ–°é£æ ¼æ ·å¼)ã€blue_night</td>
</tr>
<tr>
<td>features</td>
<td>åœ°å›¾ä¸Šæ˜¾ç¤ºçš„å…ƒç´ ç§ç±»ï¼Œ é»˜è®¤éƒ½æ˜¾ç¤ºï¼Œæ”¯æŒâ€™bgâ€™ï¼ˆåœ°å›¾èƒŒæ™¯ï¼‰ã€â€™pointâ€™ï¼ˆPOIç‚¹ï¼‰ã€â€™roadâ€™ï¼ˆé“è·¯ï¼‰ã€â€™buildingâ€™ï¼ˆå»ºç­‘ç‰©ï¼‰</td>
</tr>
</tbody>
</table>
<h2 id="å¸¸ç”¨çš„åœ°å›¾å®ä¾‹æ–¹æ³•"><a href="#å¸¸ç”¨çš„åœ°å›¾å®ä¾‹æ–¹æ³•" class="headerlink" title="å¸¸ç”¨çš„åœ°å›¾å®ä¾‹æ–¹æ³•"></a>å¸¸ç”¨çš„åœ°å›¾å®ä¾‹æ–¹æ³•</h2><h3 id="åœ°å›¾å¸¸ç”¨æ–¹æ³•"><a href="#åœ°å›¾å¸¸ç”¨æ–¹æ³•" class="headerlink" title="åœ°å›¾å¸¸ç”¨æ–¹æ³•"></a>åœ°å›¾å¸¸ç”¨æ–¹æ³•</h3><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>getZoom()ï¼Œ setZoom()</td>
<td>ç¼©æ”¾çº§åˆ«</td>
</tr>
<tr>
<td>getCenter(), setCenter()</td>
<td>è·å–åœ°å›¾ä¸­å¿ƒç‚¹åæ ‡[lon, lat]</td>
</tr>
<tr>
<td>setZoomAndCenter</td>
<td>åŒæ—¶è®¾å®šç¼©æ”¾çº§åˆ«å’Œä¸­å¿ƒç‚¹åæ ‡</td>
</tr>
<tr>
<td>setCity(city:Stringï¼Œcallback:Functon)</td>
<td>é€šè¿‡è®¾ç½®åŸå¸‚åç§°æ¥è®¾ç½®åœ°å›¾æ˜¾ç¤ºçš„ä¸­å¿ƒç‚¹</td>
</tr>
<tr>
<td>zoomIn</td>
<td>åœ°å›¾æ”¾å¤§ä¸€çº§</td>
</tr>
<tr>
<td>zoomOut</td>
<td>åœ°å›¾ç¼©å°ä¸€çº§</td>
</tr>
</tbody>
</table>
<h3 id="åœ°å›¾å¸¸ç”¨äº‹ä»¶ç±»å‹"><a href="#åœ°å›¾å¸¸ç”¨äº‹ä»¶ç±»å‹" class="headerlink" title="åœ°å›¾å¸¸ç”¨äº‹ä»¶ç±»å‹"></a>åœ°å›¾å¸¸ç”¨äº‹ä»¶ç±»å‹</h3><ul>
<li>click: é¼ æ ‡å·¦é”®å•å‡»  </li>
<li>mapmove: åœ°å›¾å¹³ç§»æ—¶è§¦å‘</li>
<li>movestart: åœ°å›¾å¹³ç§»å¼€å§‹æ—¶è§¦å‘</li>
<li>moveend: åœ°å›¾ç§»åŠ¨ç»“æŸåè§¦å‘ï¼ŒåŒ…æ‹¬å¹³ç§»å’Œç¼©æ”¾(ç»è¯•éªŒï¼Œç¼©æ”¾å¹¶æ²¡æœ‰è§¦å‘moveend)ã€‚</li>
<li>zoomchange: åœ°å›¾ç¼©æ”¾çº§åˆ«æ›´æ”¹åè§¦å‘</li>
<li>zoomstart: ç¼©æ”¾å¼€å§‹æ—¶è§¦å‘</li>
<li>zoomend: ç¼©æ”¾åœæ­¢æ—¶è§¦å‘</li>
<li>dragstart: å¼€å§‹æ‹–æ‹½åœ°å›¾æ—¶è§¦å‘</li>
<li>dragend: åœæ­¢æ‹–æ‹½åœ°å›¾æ—¶è§¦å‘</li>
<li>dragging: æ‹–æ‹½åœ°å›¾è¿‡ç¨‹ä¸­è§¦å‘</li>
</ul>
<p>å¦‚æœåœ°å›¾æ“ä½œåä¼šæœ‰å…¶ä»–æ“ä½œï¼Œä¸€èˆ¬ç›‘å¬  XXXend æ–¹æ³•ã€‚<br>æ³¨æ„ï¼šsetCityï¼ŒsetCenterç­‰æ“ä½œä¸ä¼šè§¦å‘dragç›¸å…³å†…å®¹ã€‚</p>
<h3 id="å…³äºamapçš„äº‹ä»¶ç»‘å®š"><a href="#å…³äºamapçš„äº‹ä»¶ç»‘å®š" class="headerlink" title="å…³äºamapçš„äº‹ä»¶ç»‘å®š"></a>å…³äºamapçš„äº‹ä»¶ç»‘å®š</h3><p>æœ‰ä¸¤ç§æ–¹æ³•ï¼š  </p>
<ul>
<li><p>é’ˆå¯¹Mapã€è¦†ç›–ç‰©ç­‰å¸¸ç”¨ç±»<br>ç›´æ¥ä½¿ç”¨onï¼Œ off æ–¹æ³•æ¥å®ç°äº‹ä»¶çš„ç®€å•ç»‘å®šå’Œç§»é™¤</p>
</li>
<li><p>ä½¿ç”¨AMap.eventå‘½åç©ºé—´<br>addDomListener(domobj, eventName, handler, context(æ²¡ç”¨è¿‡ï¼Œä¸æ¸…æ¥š))<br>addListener(obj, eventName, handler, context(æ²¡ç”¨è¿‡ï¼Œä¸æ¸…æ¥š))<br>removeListener(listener): å¯ä»¥ç§»é™¤domå’Œédomäº‹ä»¶ã€‚</p>
<p><a href="http://lbs.amap.com/api/javascript-api/example/event/dom-event/" target="_blank" rel="external">å‚è€ƒ</a></p>
</li>
</ul>
<h3 id="äº‹ä»¶eventä¸­çš„å†…å®¹"><a href="#äº‹ä»¶eventä¸­çš„å†…å®¹" class="headerlink" title="äº‹ä»¶eventä¸­çš„å†…å®¹"></a>äº‹ä»¶eventä¸­çš„å†…å®¹</h3><ul>
<li>æ‰€æœ‰çš„CLICKäº‹ä»¶<br>ç‚¹å‡»ä½ç½®çš„ç»çº¬åº¦ï¼Œå¯¹åº”åœ¨ç”»å¸ƒä¸Šçš„æ¨ªçºµåæ ‡ï¼Œäº‹ä»¶targetï¼Œ äº‹ä»¶type<br><img src="./pic2.png"></li>
<li>å…¶ä»–ç±»å‹äº‹ä»¶ï¼Œå¦‚moveendï¼Œzoom<br>eventä¸­åªæœ‰äº‹ä»¶ç±»å‹type</li>
</ul>
<p>é’ˆå¯¹ä»¥ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åœ°å›¾äº‹ä»¶è¿›è¡Œå°è£…ï¼Œä¸€èˆ¬éœ€è¦çš„æ˜¯äº‹ä»¶å‘ç”Ÿçš„zoomï¼Œåœ°å›¾èŒƒå›´ï¼Œç‚¹å‡»ä½ç½®çš„ç»çº¬åº¦ã€‚<br>ğŸŒ°å¦‚ä¸‹:</p>
<pre><code>const eventInjector = (ev, mapINS, cb) =&gt; {
    const bounds = mapINS.getBounds();
    const param = {
        sw: bounds.getSouthWest(),
        ne: bounds.getNorthEast(),
        zoom: mapINS.getZoom(),
        type: ev.type,
        lng: ev.lnglat ? ev.lnglat.getLng() : &apos;&apos;,
        lat: ev.lnglat ? ev.lnglat.getLat() : &apos;&apos;,
    };
      if (cb) cb(param);
};

const mapEventHandler = (mapINS, type, opt, cb) =&gt; mapINS[opt](type, (ev) =&gt; eventInjector(ev, mapINS, cb));

//ä½¿ç”¨
mapEventHandler(mapIns, &apos;dragend&apos;, &apos;on&apos;, this.handleMapScale);
mapEventHandler(mapIns, &apos;dragend&apos;, &apos;off&apos;,this.handleMapScale);

//handleMapScale
 handleMapScale(ev) {
   console.log(ev);
   const { ne, sw, zoom, type } = ev;
   ...
 }
</code></pre><p>ä¹‹åï¼Œå¦‚æœåœ¨åœ°å›¾ä¸Šå‘ç”Ÿdragendï¼Œeventçš„ç»“æœå¦‚ä¸‹ï¼š<br><img src="./pic1.png"></p>
<h2 id="å¸¸ç”¨åœ°å›¾åŸºæœ¬ç±»å‹"><a href="#å¸¸ç”¨åœ°å›¾åŸºæœ¬ç±»å‹" class="headerlink" title="å¸¸ç”¨åœ°å›¾åŸºæœ¬ç±»å‹"></a>å¸¸ç”¨åœ°å›¾åŸºæœ¬ç±»å‹</h2><h3 id="LngLat-ï¼š-ç»çº¬åº¦åæ ‡ï¼Œç¡®å®šåœ°å›¾ä¸Šçš„ä¸€ä¸ªç‚¹"><a href="#LngLat-ï¼š-ç»çº¬åº¦åæ ‡ï¼Œç¡®å®šåœ°å›¾ä¸Šçš„ä¸€ä¸ªç‚¹" class="headerlink" title="LngLat ï¼š ç»çº¬åº¦åæ ‡ï¼Œç¡®å®šåœ°å›¾ä¸Šçš„ä¸€ä¸ªç‚¹"></a>LngLat ï¼š ç»çº¬åº¦åæ ‡ï¼Œç¡®å®šåœ°å›¾ä¸Šçš„ä¸€ä¸ªç‚¹</h3><p>æ„é€ å‡½æ•°ï¼š AMap.LngLat(lng: 119.78, lat: 39.99);<br>ç”Ÿæˆä¸€ä¸ªç»çº¬åº¦ä¸º[119.78, 39.99]çš„åœ°ç†åæ ‡å¯¹è±¡ã€‚<br>å¸¸ç”¨æ–¹æ³•ï¼š  </p>
<pre><code>- getLng()    è·å–ç»åº¦
- getLat()    è·å–çº¬åº¦
- offset(w:2,s:-3)   wç»åº¦ï¼Œsçº¬åº¦ï¼Œå‚æ•°ä¸ºæ•°å­—ã€‚å°†å½“å‰ç»çº¬åº¦åæ ‡å€¼å˜åŒ–ã€‚ç»åº¦æ˜¯è¶Šå‘å³è¶Šå¤§ï¼Œæ‰€ä»¥å‘å³ä¸ºæ­£ã€‚åŒç†ï¼Œçº¬åº¦è¶Šå‘ä¸Šè¶Šå¤§ï¼Œæ‰€ä»¥å‘ä¸Šä¸ºæ­£ã€‚    
- distance(lnglat: LngLat | [lng, lat])  å½“å‰ç»çº¬åº¦ä¸ä¼ å…¥çš„ç»çº¬åº¦çš„è¿çº¿çš„åœ°é¢è·ç¦»
- equals(lnglat:LngLat)
</code></pre><h3 id="Boundsï¼šç»çº¬åº¦èŒƒå›´çŸ©å½¢æ¡†"><a href="#Boundsï¼šç»çº¬åº¦èŒƒå›´çŸ©å½¢æ¡†" class="headerlink" title="Boundsï¼šç»çº¬åº¦èŒƒå›´çŸ©å½¢æ¡†"></a>Boundsï¼šç»çº¬åº¦èŒƒå›´çŸ©å½¢æ¡†</h3><p>AMap.Bounds(southWest:LngLat1, northEast:LngLat2);<br>ç”Ÿæˆä¸€ä¸ªä¸œåŒ—è§’æ˜¯LngLat2ï¼Œè¥¿å—è§’æ˜¯LngLat1  çš„çŸ©å½¢åœ°ç‰©æ¡†ã€‚<br>å¸¸ç”¨æ–¹æ³•ï¼š    </p>
<pre><code>- contains(point: LngLat)   ç»™å‡ºçš„ç»çº¬åº¦ç‚¹æ˜¯å¦åŒ…å«åœ¨çŸ©å½¢èŒƒå›´å†…
- getCenter()
- getSouthWest()
- getNorthEast()
</code></pre><h2 id="å¸¸ç”¨è¦†ç›–ç‰©"><a href="#å¸¸ç”¨è¦†ç›–ç‰©" class="headerlink" title="å¸¸ç”¨è¦†ç›–ç‰©"></a>å¸¸ç”¨è¦†ç›–ç‰©</h2><h3 id="AMap-Marker"><a href="#AMap-Marker" class="headerlink" title="AMap.Marker"></a>AMap.Marker</h3><ul>
<li>æ„é€ ï¼šAMap.Marker({ markeroptions })  </li>
<li>å¸¸ç”¨é€‰é¡¹<br><strong>map</strong>:markeræ‰€åœ¨çš„åœ°å›¾<br><strong>position</strong>: LngLatç±»å‹ï¼Œç‚¹åœ¨åœ°å›¾ä¸Šçš„ä½ç½®<br><strong>offset</strong>: åƒç´ ç±»å‹(-75ï¼Œ-75)ï¼Œmarkerè·ç¦»å·¦ä¸Šè§’çš„åç§»<br><strong>content</strong>: string/object  è¿™é‡Œå¯ä»¥è‡ªå®šä¹‰markeræ˜¾ç¤ºçš„å†…å®¹ï¼Œå›¾ç‰‡ï¼Œsvgç­‰éƒ½å¯ä»¥ã€‚<br><strong>bubble</strong>: å°†è¦†ç›–ç‰©çš„äº‹ä»¶å†’æ³¡åˆ°åœ°å›¾ä¸Šï¼Œé»˜è®¤false<br><strong>zIndex</strong>: å åŠ é¡ºåº<br><strong>title</strong>: é¼ æ ‡æ»‘è¿‡æ—¶ï¼Œç‚¹æ ‡è®°çš„æ–‡å­—æç¤ºã€‚<br><strong>extData</strong>: ç”¨æˆ·è‡ªå®šä¹‰å±æ€§<br><strong>draggable</strong>: æ ‡è®°ç‚¹æ˜¯å¦å¯ä»¥æ‹–æ‹½ç§»åŠ¨</li>
<li>æ–¹æ³•ç•¥å¤šï¼Œè¿™é‡Œå°±ä¸å†™äº†ï¼ŒåŸºæœ¬å¯¹åº”æ¯ä¸ªé€‰é¡¹éƒ½ä¼šæœ‰ä¸ªgetï¼Œsetæ–¹æ³•ã€‚hideï¼Œshowæ§åˆ¶ç‚¹æ ‡è®°çš„éšè—ï¼Œè¿˜åœ¨mapä¸­ã€‚setMapæ¯”è¾ƒæœ‰ç”¨ï¼Œå¦‚æœè®¾ä¸ºnullï¼Œåˆ™åœ¨åœ°å›¾ä¸Šç§»é™¤å½“å‰Markerç›¸å…³çš„divã€‚è¿˜æœ‰ä¸€äº›ç§»åŠ¨ç±»çš„åº”ç”¨ï¼Œç›®å‰è¿˜æ²¡ä½¿ç”¨è¿‡ï¼Œè¿™é‡Œå°±ä¸è¯¦è¿°äº†ï¼Œä¸»è¦æœ‰ï¼š<code>moveAlong</code>, <code>moveTo</code>, <code>stopMove</code>, <code>pauseMove</code>, <code>resumeMove</code>ã€‚</li>
<li>äº‹ä»¶ä¸åœ°å›¾å¯¹è±¡åŸºæœ¬ä¸€è‡´ï¼Œå°‘äº†ä¸ªreadyã€‚å¤šäº†ä¸€äº›moveçš„è¡Œä¸ºï¼Œ<a href="http://lbs.amap.com/api/javascript-api/reference/overlay#Marker" target="_blank" rel="external">å…·ä½“å¯å‚è€ƒ</a></li>
</ul>
<h3 id="AMap-Polygon"><a href="#AMap-Polygon" class="headerlink" title="AMap.Polygon"></a>AMap.Polygon</h3><ul>
<li>æ„é€ ï¼šAMap.Polygon({ options })  </li>
<li><p>å¸¸ç”¨é€‰é¡¹<br><strong>map</strong>:markeræ‰€åœ¨çš„åœ°å›¾<br><strong>path</strong>: å‚æ•°ä¸ºï¼ŒåŒ…å«ç»çº¬åº¦æ•°ç»„çš„æ•°ç»„.  </p>
<pre><code>egï¼š[
         [116.368904, 39.913423],
        [116.382122, 39.901176],
        [116.387271, 39.912501],
        [116.398258, 39.904600]
    ] 
</code></pre></li>
</ul>
<p>  <strong>bubble</strong>: å°†è¦†ç›–ç‰©çš„äº‹ä»¶å†’æ³¡åˆ°åœ°å›¾ä¸Šï¼Œé»˜è®¤falseã€‚<br>  <strong>zIndex</strong>: å åŠ é¡ºåº, é»˜è®¤æ¯”markerä½ã€‚<br>  <strong>ç±»ä¼¼svgçš„å¤šè¾¹å½¢å±æ€§</strong>: strokeColorï¼ŒstrokeOpacityï¼Œ strokeWeightï¼Œ fillColorï¼Œ fillOpacityï¼Œ strokeStyleï¼Œ strokeDasharrayã€‚<br>  <strong>extData</strong>: è‡ªå®šä¹‰å±æ€§</p>
<ul>
<li>æ–¹æ³•ã€‚å¯¹åº”pathï¼ŒextDataï¼Œ optionséƒ½ä¼šæœ‰ä¸ªgetï¼Œsetæ–¹æ³•ã€‚hideï¼Œshowæ§åˆ¶å¤šè¾¹å½¢çš„éšè—ï¼Œå¤šè¾¹å½¢è¿˜åœ¨mapä¸­ã€‚setMapæ¯”è¾ƒæœ‰ç”¨ï¼Œå¦‚æœè®¾ä¸ºnullï¼Œåˆ™åœ¨åœ°å›¾ä¸Šç§»é™¤å½“å‰polygonç›¸å…³çš„divã€‚getBounds,çŸ©å½¢èŒƒå›´å¯¹è±¡ï¼Œè¿”å›Boundsç±»å‹ã€‚getArea,è·å–å¤šè¾¹å½¢é¢ç§¯ã€‚contains(point:LngLat)ï¼Œç‚¹æ˜¯å¦åœ¨polygonå†…ã€‚</li>
<li>äº‹ä»¶å¾ˆå¤šï¼Œå¸¸ç”¨çš„åˆmouseoverï¼Œ clickç­‰ã€‚<a href="http://lbs.amap.com/api/javascript-api/reference/overlay#Polygon" target="_blank" rel="external">å…·ä½“å¯å‚è€ƒ</a>  </li>
</ul>
<h3 id="AMap-Circle"><a href="#AMap-Circle" class="headerlink" title="AMap.Circle"></a>AMap.Circle</h3><ul>
<li>æ„é€ ï¼šAMap.Circle({ options })  </li>
<li><p>å¸¸ç”¨é€‰é¡¹<br><strong>map</strong>:markeræ‰€åœ¨çš„åœ°å›¾<br><strong>center</strong>: LngLatç±»å‹ï¼Œåœ†å¿ƒåœ¨åœ°å›¾ä¸Šçš„ä½ç½®<br><strong>radius</strong>: åŠå¾„ï¼Œnumberç±»å‹ï¼Œå•ä½æ˜¯ç±³<br><strong>bubble</strong>: å°†è¦†ç›–ç‰©çš„äº‹ä»¶å†’æ³¡åˆ°åœ°å›¾ä¸Šï¼Œé»˜è®¤false<br><strong>zIndex</strong>: å åŠ é¡ºåº, é»˜è®¤æ¯”markerä½ã€‚<br><strong>extData</strong>: ç”¨æˆ·è‡ªå®šä¹‰å±æ€§<br><strong>ç±»ä¼¼svgçš„å¤šè¾¹å½¢å±æ€§</strong>ï¼š åŒä¸Špolygon</p>
</li>
<li><p>æ–¹æ³•ã€‚å¯¹åº”centerï¼ŒextDataï¼Œ radiusï¼Œoptionséƒ½ä¼šæœ‰ä¸ªgetï¼Œsetæ–¹æ³•ã€‚hideï¼Œshowæ§åˆ¶éšè—ï¼Œè¿˜åœ¨mapä¸­ã€‚setMapåŒä¸Šã€‚getBoundsï¼Œåœ†å¤–åˆ‡çŸ©å½¢èŒƒå›´å¯¹è±¡ï¼Œè¿”å›Boundsç±»å‹ã€‚contains(point:LngLat)ï¼Œç‚¹æ˜¯å¦åœ¨åœ†å†…ã€‚</p>
</li>
<li>äº‹ä»¶ç±»å‹ç±»ä¼¼polygon  <a href="http://lbs.amap.com/api/javascript-api/reference/overlay#Circle" target="_blank" rel="external">å…·ä½“å¯å‚è€ƒ</a></li>
</ul>
<h3 id="AMap-Polyline"><a href="#AMap-Polyline" class="headerlink" title="AMap.Polyline"></a>AMap.Polyline</h3><ul>
<li>æ„é€ ï¼šAMap.Marker({ markeroptions })  </li>
<li>å¸¸ç”¨é€‰é¡¹ï¼Œä¸polygonå·®ä¸å¤šã€‚å¤šä¸€äº›çº¿æ¡ç›¸å…³çš„å†…å®¹ï¼Œ<a href="http://lbs.amap.com/api/javascript-api/reference/overlay#Polyline" target="_blank" rel="external">å…·ä½“å¯å‚è€ƒ</a></li>
<li>æ–¹æ³•å’Œäº‹ä»¶ä¸polygonå·®ä¸å¤š</li>
</ul>
<h2 id="å¸¸ç”¨å›¾å±‚"><a href="#å¸¸ç”¨å›¾å±‚" class="headerlink" title="å¸¸ç”¨å›¾å±‚"></a>å¸¸ç”¨å›¾å±‚</h2><p>å›¾å±‚æ˜¯ä½äºæœ€åº•å±‚çš„æ¨¡å—ï¼Œä»–å¯èƒ½åœ¨åœ°å›¾ä¸Šçš„å…¶ä»–ç‰©ä»¶è¿˜æ²¡åŠ è½½å®Œå°±å·²ç»ç”Ÿæˆäº†ã€‚å›¾å±‚éƒ½éœ€è¦åœ°å›¾ä»¥pluginçš„å½¢å¼å¼•è¿›ã€‚  </p>
<h3 id="AMap-Heatmap"><a href="#AMap-Heatmap" class="headerlink" title="AMap.Heatmap"></a>AMap.Heatmap</h3><p>heatmapæ˜¯ä¸ªpluginï¼Œéœ€è¦æ·»åŠ pluginï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­ç”ŸæˆAMap.Heatmapå®ä¾‹ã€‚</p>
<pre><code>const heatmap;
map.plugin([&quot;AMap.Heatmap&quot;], function() {
  heatmap = new AMap.Heatmap(map, {
        radius: 25, //ç»™å®šåŠå¾„
        opacity: [0, 0.8]
    });
});
</code></pre><p>ä¸Šé¢çš„configï¼ŒåŒ…å«<code>radius``gradient``opacity``zooms</code>(æ”¯æŒçš„ç¼©æ”¾çº§åˆ«ï¼Œä¸åœ¨èŒƒå›´å†…ï¼Œå°±ä¸æ˜¾ç¤ºçƒ­åŠ›å›¾äº†)<br>æ¸å˜å¯ä»¥æŒ‰ç…§å¦‚ä¸‹è®¾ç½®  </p>
<pre><code>gradient: { 0.4: &apos;red&apos;, 0.8: &apos;yellow&apos;, 1: &apos;blue&apos;}
</code></pre><p><strong>æ–¹æ³•</strong><br>ä¸è¦†ç›–ç‰©çš„å·®ä¸å¤šï¼Œé™¤äº†ï¼Œ  </p>
<pre><code>addDataPoint(lng: Lng, lat: Lat, count: number)  
setDataSet(data: obj, url:jsonpæ ¼å¼æ•°æ®çš„æœåŠ¡åœ°å€ï¼ŒurlDataParser:å¯ä»¥ä¼ é€’å‡½æ•°è¿›è¡Œæ•°æ®è½¬åŒ–) 
// è¿™ä¸¤ä¸ªå¯ä»¥é…åˆzoomï¼Œä¸åŒçš„zoomï¼Œçƒ­åŠ›å›¾å¯¹åº”çš„æ•°æ®é›†ä¸åŒã€‚ 
</code></pre><p>å…¶ä¸­ï¼Œdataæ ¼å¼ä¸ºï¼š</p>
<pre><code>{ max: number,
  data: [
  { lng: 116.7, lat: 39.9, count: 10 }, 
  { lng: 116.7, lat: 39.9, count: 10 }],
}
</code></pre><h3 id="AMap-CustomLayer"><a href="#AMap-CustomLayer" class="headerlink" title="AMap.CustomLayer"></a>AMap.CustomLayer</h3><p>åŒæ ·éœ€è¦pluginæ¥å¼•å…¥ã€‚</p>
<p>ç»™å‡ºçš„å±æ€§å’Œæ–¹æ³•å¾ˆå°‘ï¼Œä½†æ˜¯åŠŸèƒ½å¼ºå¤§ï¼Œéœ€è¦è‡ªå·±å¼€å‘ï¼Œ<a href="http://lbs.amap.com/api/javascript-api/example/layers/custom-layer/" target="_blank" rel="external">å‚è€ƒå®ä¾‹</a>  </p>
<p>ä¸€èˆ¬æ˜¯è‡ªå·±åšä¸€äº›canvasï¼Œç„¶åæŒ‚è½½åœ¨mapä¸Šå³å¯ã€‚<br>è‡ªå®šä¹‰å›¾å±‚æœ‰ä¸ªrenderå±æ€§ï¼Ÿä½¿å…¶ç­‰äºç»˜åˆ¶å‡½æ•°ï¼Œå°±å¯ä»¥åœ¨åœ°å›¾ä¸Šç»˜åˆ¶å‡ºæ¥ã€‚</p>
<h2 id="æœç´¢æœåŠ¡"><a href="#æœç´¢æœåŠ¡" class="headerlink" title="æœç´¢æœåŠ¡"></a>æœç´¢æœåŠ¡</h2><p>æ”¯æŒæœç´¢æœåŠ¡è„±ç¦»åœ°å›¾ä½¿ç”¨ï¼Œå³ä½¿ç”¨æœç´¢æœåŠ¡ä¸å†éœ€è¦å…ˆå®ä¾‹åŒ–åœ°å›¾ã€‚é€šè¿‡AMap.pluginæ–¹æ³•ï¼ŒåŠ è½½éœ€è¦çš„æœåŠ¡</p>
<h3 id="AMap-Autocomplete"><a href="#AMap-Autocomplete" class="headerlink" title="AMap.Autocomplete"></a>AMap.Autocomplete</h3><ul>
<li><p>å¸¸ç”¨é€‰é¡¹ï¼š<br><strong>city:</strong>è¾“å…¥æç¤ºè¢«é™å®šçš„åŸå¸‚<br><strong>citylimit:</strong> æ˜¯å¦å¼ºåˆ¶é™åˆ¶åœ¨è®¾ç½®çš„åŸå¸‚å†…æœç´¢<br><strong>input:</strong>æŒ‡å®šä¸€ä¸ªè¾“å…¥æ¡†ï¼Œå†…å®¹åˆ™ä½œä¸ºinputçš„idï¼Œåœ¨inputè¾“å…¥æ–‡å­—åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªä¸‹æ‹‰é€‰æ‹©åˆ—è¡¨ã€‚</p>
</li>
<li><p>searchæ–¹æ³•ï¼Œå¯ä»¥ç»“åˆä»–çš„searchæ–¹æ³•ï¼Œè·å–æ•°æ®ï¼Œç„¶åè‡ªå·±renderæ ·å¼~~</p>
<p>AutocompleteResultå¯¹è±¡ï¼š </p>
<pre><code>{ infoï¼š çŠ¶æ€è¯´æ˜,
  count: è¾“å…¥æç¤ºæ¡æ•°,
  tips: [
    { name: åç§°, district: æ‰€å±åŒºåŸŸ, ,adcode: åŒºåŸŸç¼–ç },
    { name: åç§°, district: æ‰€å±åŒºåŸŸ, ,adcode: åŒºåŸŸç¼–ç }...
  ]
}
</code></pre></li>
</ul>
<p>é€šå¸¸autocompleteé…åˆplaceSearchè¿›è¡Œä½¿ç”¨çš„</p>
<h3 id="AMap-PlaceSearch"><a href="#AMap-PlaceSearch" class="headerlink" title="AMap.PlaceSearch"></a>AMap.PlaceSearch</h3><ul>
<li><p>å¸¸ç”¨é€‰é¡¹ï¼š<br><strong>city:</strong>è¾“å…¥æç¤ºè¢«é™å®šçš„åŸå¸‚<br><strong>citylimit:</strong> æ˜¯å¦å¼ºåˆ¶é™åˆ¶åœ¨è®¾ç½®çš„åŸå¸‚å†…æœç´¢<br><strong>type:</strong>å…´è¶£ç‚¹ç±»åˆ«ï¼Œå¯ä»¥é€šè¿‡setTypeè®¾ç½®<br><strong>pageSize:</strong>å•é¡µæ˜¾ç¤ºç»“æœæ¡æ•°<br><strong>extensions:</strong> â€˜allâ€™ è¿”å›åŸºæœ¬+è¯¦ç»†ä¿¡æ¯<br><strong>panel&amp;renderStyle</strong>ç»“æœåˆ—è¡¨çš„htmlå®¹å™¨idï¼Œæˆ–è€…å®¹å™¨å…ƒç´ ï¼Œç»“æœåˆ—è¡¨å°†åœ¨ç»™å‡ºçš„å®¹å™¨ä¸­è¿›è¡Œå±•ç¤ºï¼Œè‡ªå·±å¯ä»¥renderæ ·å¼ã€‚</p>
</li>
<li><p>å¯ç”¨æ–¹æ³•è§<a href="http://lbs.amap.com/api/javascript-api/reference/search#m_AMap.PlaceSearch" target="_blank" rel="external">å‚è€ƒ</a>å§</p>
</li>
</ul>
<p>ä¸Šä¸ªsearchä½¿ç”¨ç¤ºä¾‹ï¼š  </p>
<pre><code>htmlï¼š 
&lt;img
  className={styles.searchIcon}
  src={searchIcon}
  alt=&quot;search&quot;
  onClick={() =&gt; this.handleSearch()}
/&gt;

js:
handleSearch() {
// this.state.placeSearchæ˜¯ä¸ªAMap.Autocompleteå®ä¾‹
    this.state.placeSearch.search(this.refs.searchInput.value,             this.handleSearchSelect);
 }

 handleSearchSelect(search, result) {
    if (result.info === &apos;OK&apos;) {
      // mapInstanceæ˜¯ä¸ªå°è£…äº†AMapçš„å¯¹è±¡ã€‚
      const mapIns = mapInstance.getter();
      // è‡ªå®šä¹‰æœç´¢ç»“æœçš„markeræ ·å¼ã€‚å¹¶ç»˜åˆ¶åœ¨åœ°å›¾ä¸Š
      this.generateSearchMarkers(result.poiList);
      if (result.poiList.pois.length &gt; 0) {
        const { lng, lat } = result.poiList.pois[0].location;
        // å°†mapçš„ä¸­å¿ƒå®šä½åˆ°è·å–åˆ°çš„ç¬¬ä¸€ä¸ªpoiçš„ä½ç½®ä¸Šã€‚
        mapIns.setCenter([lng, lat]);
        mapIns.zoomIn();
      }
    }
  }
</code></pre><p> å¦‚æœæŸ¥åˆ°ç»“æœsearchResultæœ‰ä»¥ä¸‹å†…å®¹ï¼š<br> <img src="/Users/zcx/Desktop/å±å¹•å¿«ç…§ 2017-05-18 ä¸‹åˆ2.38.49.png"></p>
<p>å…¶ä»–è¿˜æœ‰å¥½å¤šå…·ä½“çš„æœç´¢çš„æœåŠ¡ã€‚ç”±äºæ²¡æœ‰ç”¨åˆ°ï¼Œå°±æ²¡çœ‹ã€‚ã€‚ã€‚</p>
<h2 id="ä¿¡æ¯çª—ä½“"><a href="#ä¿¡æ¯çª—ä½“" class="headerlink" title="ä¿¡æ¯çª—ä½“"></a>ä¿¡æ¯çª—ä½“</h2><h3 id="AMap-InfoWindow"><a href="#AMap-InfoWindow" class="headerlink" title="AMap.InfoWindow"></a>AMap.InfoWindow</h3><p>ç”¨äºåœ¨åœ°å›¾ä¸Šå¼¹å‡ºä¸€ä¸ªè¯¦ç»†ä¿¡æ¯å±•ç¤ºçª—ä½“ï¼Œåœ°å›¾ä¸Šåªå…è®¸åŒæ—¶å±•ç¤º1ä¸ªä¿¡æ¯çª—ä½“  </p>
<ul>
<li>å±æ€§<br><strong>isCustomï¼š</strong> æ˜¯å¦è‡ªå®šä¹‰çª—ä½“ï¼Œtrue åˆ™å®Œå…¨æŒ‰ç…§contentä¸­çš„è§„å®šæ¥æ˜¾ç¤º<br><strong>autoMoveï¼š</strong> å°†çª—ä½“å®Œå…¨å±•ç°åœ¨è§†å›¾ä¸­ã€‚<br><strong>closeWhenClickMap: </strong>é¼ æ ‡ç‚¹å‡»åœ°å›¾åæ˜¯å¦å…³é—­ä¿¡æ¯çª—ä½“<br><strong>position: </strong>ä¿¡æ¯çª—ä½“æ˜¾ç¤ºä½ç½®ï¼Œç±»å‹ä¸ºç»çº¬åº¦å¯¹è±¡  </li>
<li>æ–¹æ³•äº‹ä»¶ç±»ä¼¼polygonï¼Œæœ‰ä¸€äº›å±æ€§çš„getï¼Œsetæ–¹æ³•ï¼Œopenï¼Œcloseæ–¹æ³•ã€‚</li>
</ul>
<h2 id="å®šä½"><a href="#å®šä½" class="headerlink" title="å®šä½"></a>å®šä½</h2><h3 id="AMap-CitySearch"><a href="#AMap-CitySearch" class="headerlink" title="AMap.CitySearch"></a>AMap.CitySearch</h3><p>é¡¹ç›®ä¸­ç”¨åˆ°è¿™ä¸ªapiã€‚å®ƒä¸»è¦æ˜¯æ ¹æ®ipè¿”å›å¯¹åº”çš„åŸå¸‚ä¿¡æ¯ï¼Œæ ¹æ®è¾“å…¥ipæˆ–è‡ªåŠ¨è·å–ipæ¥è·å–åŸå¸‚ä¿¡æ¯ã€‚<br>è¯¥apiä¹Ÿæ˜¯ä¸ªpluginï¼Œå¯ä»¥åœ¨åˆå§‹loaderåœ°å›¾çš„æ—¶å€™ï¼Œå°±å°†å…¶é…ç½®è¿›å»ï¼Œå°†è„šæœ¬åŠ è½½æ—¶çš„ä»£ç ã€‚  </p>
<p>ä¸¤ä¸ªæ–¹æ³•ï¼š<br>getLocalCity((status, citySearchResult) =&gt; {â€¦})<br>getCityById(ip, (status, citySearchResult) =&gt; {})</p>
<p>ä¾‹å­ï¼š   </p>
<pre><code>// citysearchéƒ¨åˆ†ä»£ç ï¼Œçœç•¥åœ°å›¾å®ä¾‹äº†ï¼Œç”¨mapInsä»£æ›¿
citysearch.getLocalCity((status, result) =&gt; {
    if (status === &apos;complete&apos; &amp;&amp; result.info === &apos;OK&apos;) {
      if (result &amp;&amp; result.city &amp;&amp; result.bounds) {
        const city = R.slice(0, -1, result.city);
        const cindex = R.indexOf(city, R.pluck(&apos;cityName&apos;, cityList));
        const ccode = R.pluck(&apos;cityCode&apos;, cityList);
        if (cindex !== -1 &amp;&amp; city !== &apos;åŒ—äº¬&apos;) {
          mapIns.setCity(city);
          mapIns.setZoom(11);
        }
      }
    }
});
</code></pre><p>citySearchResult çš„å±æ€§ï¼šcityï¼Œ bounds</p>
<h2 id="ä½ç½®è§£æ"><a href="#ä½ç½®è§£æ" class="headerlink" title="ä½ç½®è§£æ"></a>ä½ç½®è§£æ</h2><h3 id="AMap-Geocoder"><a href="#AMap-Geocoder" class="headerlink" title="AMap.Geocoder"></a>AMap.Geocoder</h3><p>Geocoderæ˜¯è¿›è¡Œåœ°å€æè¿°ä¸åœ°ç†åæ ‡é—´çš„ç›¸äº’è½¬æ¢ã€‚ä¹Ÿå°±æ˜¯ï¼Œç»™å‡ºä¸€ä¸ªåœ°å€åç§°ï¼Œè½¬æ¢ä¸ºåœ°ç†åæ ‡çš„ç»çº¬åº¦ç­‰ä¿¡æ¯ã€‚æˆ–è€…ç»™å‡ºä¸€ä¸ªç»çº¬åº¦ï¼Œç¡®å®šè¿™ä¸ªç‚¹çš„åœ°å€åç§°ä¿¡æ¯ã€‚  </p>
<p>ç›¸å…³æ–¹æ³•ï¼š</p>
<ul>
<li><p>è·å–åœ°ç†ç¼–ç ï¼š<br>getLocation(address:String, (status:String,result:info/GeocodeResult) =&gt; {})</p>
</li>
<li><p>é€†åœ°ç†ç¼–ç ï¼š<br>getAddress(location:LngLat|Array.<lnglat>,<br>(status:String,result:info/ReGeocodeResult) =&gt; {})<br>// æœ€å¤š20ä¸ªåœ°å€æ•°ç»„ã€‚</lnglat></p>
</li>
</ul>
<p>s<br>ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯é€†åœ°ç†ç¼–ç ï¼Œæ¯”å¦‚è‡ªå·±åšä¸€ä¸ªåœ¨åœ°å›¾ä¸Šç‚¹å‡»ï¼Œç„¶åæ‰¾å‡ºè¯¥ä½ç½®çš„ç›¸å…³ä¿¡æ¯ã€‚<br>é€†åœ°ç†ç¼–ç çš„è¿”å›ç»“æœå±æ€§ï¼šæƒ³å±•ç¤ºä»€ä¹ˆï¼Œå°±ä»ä»¥ä¸‹é€‰æ‹©å§<br><img src="./pic3.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å¸¸ç”¨çš„é«˜å¾·åœ°å›¾api&quot;&gt;&lt;a href=&quot;#å¸¸ç”¨çš„é«˜å¾·åœ°å›¾api&quot; class=&quot;headerlink&quot; title=&quot;å¸¸ç”¨çš„é«˜å¾·åœ°å›¾api&quot;&gt;&lt;/a&gt;å¸¸ç”¨çš„é«˜å¾·åœ°å›¾api&lt;/h1&gt;&lt;p&gt;å…³äºappkeyï¼Œåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯apiè°ƒç”¨çš„keyï¼Œä¸€ä¸ªæ˜¯åœ°å›¾æœåŠ¡çš„key
    
    </summary>
    
    
      <category term="js" scheme="https://misssweety.github.io/tags/js/"/>
    
      <category term="åœ°å›¾api" scheme="https://misssweety.github.io/tags/%E5%9C%B0%E5%9B%BEapi/"/>
    
      <category term="æ€»ç»“" scheme="https://misssweety.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>css3å®ç°3dæ•ˆæœ</title>
    <link href="https://misssweety.github.io/2017/05/15/css3%E5%AE%9E%E7%8E%B03d%E6%95%88%E6%9E%9C/"/>
    <id>https://misssweety.github.io/2017/05/15/css3å®ç°3dæ•ˆæœ/</id>
    <published>2017-05-15T08:34:12.000Z</published>
    <updated>2017-05-18T07:11:59.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="css3å®ç°3Dæ•ˆæœ"><a href="#css3å®ç°3Dæ•ˆæœ" class="headerlink" title="css3å®ç°3Dæ•ˆæœ"></a>css3å®ç°3Dæ•ˆæœ</h2><h3 id="ç›¸å…³å±æ€§"><a href="#ç›¸å…³å±æ€§" class="headerlink" title="ç›¸å…³å±æ€§"></a>ç›¸å…³å±æ€§</h3><ul>
<li>transform: rotateX(â€¦)</li>
<li>transfrom-origin: left center;</li>
<li>transform-style: preserve-3d;</li>
<li>perspective: 200px;</li>
<li>perpective-origin: left center;</li>
<li>backface-visibility: true;</li>
</ul>
<h3 id="3dæ•ˆæœåŸºç¡€çŸ¥è¯†"><a href="#3dæ•ˆæœåŸºç¡€çŸ¥è¯†" class="headerlink" title="3dæ•ˆæœåŸºç¡€çŸ¥è¯†"></a>3dæ•ˆæœåŸºç¡€çŸ¥è¯†</h3><p>ä¸€èˆ¬æ˜¯åœ¨æ—‹è½¬åæ‰èƒ½è¡¨ç°å‡º3dæ•ˆæœï¼Œcssä¸­è§„å®šçš„æ—‹è½¬è§„åˆ™å¦‚ä¸‹ï¼š<br><img src="./axis.png" alt="alt axis"></p>
<p>rotateXæ˜¯ä»¥å±å¹•çš„æ°´å¹³æ–¹å‘ä¸ºè½´æ—‹è½¬ï¼ŒrotateYæ˜¯ä»¥å±å¹•çš„å‚ç›´æ–¹å‘ä¸ºè½´ï¼ŒrotateZæ˜¯ä»¥ä¸å±å¹•å¹³é¢å‚ç›´çš„æ–¹å‘ä¸ºè½´ã€‚<br>å…¶å®rotatex rotateYå·²ç»èƒ½å®ç°3dæ•ˆæœäº†ï¼Œä½†æ˜¯ä¸æ˜¯å¾ˆç›´è§‚ã€‚æ­é…ä¸Šperspectiveï¼Œperfectï¼</p>
<h3 id="perspective"><a href="#perspective" class="headerlink" title="perspective"></a>perspective</h3><p>å«ä¹‰ï¼šé€è§†æ•ˆæœã€‚æŒ‡å®šäº†è§‚å¯Ÿè€…ä¸z=0å¹³é¢çš„è·ç¦»ï¼Œä½¿å…·æœ‰ä¸‰ç»´ä½ç½®å˜æ¢çš„å…ƒç´ äº§ç”Ÿé€è§†æ•ˆæœã€‚ç­‰åŒäºç»˜ç”»ä¸­çš„1ç‚¹é€è§†||å¹³è¡Œé€è§†ã€‚<br>ä¸€ä¸ªç‰©ä½“å¦‚æœz-indexä¸ºæ­£ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ç”»å¸ƒä¸­å®é™…çœ‹åˆ°çš„å°±è¦åå¤§ã€‚å¦‚ä¸‹ç¬¬ä¸€ä¸ªå›¾ã€‚å¦‚æœä¸€ä¸ªç‰©ä½“çš„z-indexä¸ºè´Ÿï¼Œé‚£ä¹ˆæ˜¾ç¤ºåœ¨ç”»å¸ƒè§†å›¾ä¸­ï¼Œåˆ™åå°ï¼Œå¦‚ç¬¬äºŒä¸ªå›¾<br><img src="./view.png" alt="alt perspective"></p>
<p><strong>ä¸¤ç§å†™æ³•:</strong><br><code>aï¼šperspectiveï¼š300px;</code><br><code>bï¼štransform: perspective(300px) rotateX(aa);</code>  </p>
<p><strong>åŒºåˆ«</strong>ï¼šç¬¬ä¸€ä¸ªéœ€è¦å†™åœ¨ä¸€ä¸ªçˆ¶çº§å…ƒç´ ä¸Šï¼Œä»–è§„å®šäº†è¿™ä¸ªçˆ¶çº§å…ƒç´ çš„é€è§†ç‚¹ä½ç½®ï¼Œæ¢ä¸ªè§’åº¦è¯´ï¼Œå½“ä¸ºå…ƒç´ è§„å®šperspective å±æ€§æ—¶ï¼Œå…¶ç›´æ¥å­å…ƒç´ ä¼šè·å¾—é€è§†æ•ˆæœï¼Œè€Œä¸æ˜¯å…ƒç´ æœ¬èº«ã€‚ç¬¬äºŒä¸ªå¯ä»¥ç›´æ¥ä½œç”¨åœ¨å½“å‰å…ƒç´ ä¸Šï¼Œä¹Ÿå¯ä»¥ç»“åˆå…¶ä»–transformå±æ€§ï¼Œè§„å®šäº†å½“å‰å…ƒç´ çš„é€è§†ç‚¹ä½ç½®ï¼Œå¯¹å…¶ä»–å…ƒç´ æ— å½±å“ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>perspective</strong> å€¼è¶Šå¤§ï¼Œ3dæ•ˆæœè¶Šä¸æ˜æ˜¾ï¼›è¶Šå°è¶Šæ˜æ˜¾ã€‚æƒ³åƒæˆé•œå¤´åˆ°ç‰©ä½“çš„è·ç¦»ï¼Œè¶Šè¿‘è¶Šèƒ½çœ‹å‡ºé«˜ä½èµ·ä¼ï¼Œè¶Šè¿œçº¿æ¡å±•ç¤ºçš„è¶Šå¹³ç¼“ã€‚<br>ä¸¤ç§å†™æ³•ä»¥åŠperspectiveå¯¹æ¯”ï¼Œ<a href="https://codepen.io/akixiao/pen/wdwdgW" target="_blank" rel="external">æŸ¥çœ‹ç¤ºä¾‹</a></p>
<h3 id="webkit-perspective-origin"><a href="#webkit-perspective-origin" class="headerlink" title="-webkit-perspective-origin"></a>-webkit-perspective-origin</h3><p>æ¶ˆå¤±ç‚¹çš„ä½ç½®ï¼Œ<br>è¯­æ³•ï¼š<code>-webkit-perspective-origin: xpos ypos</code><br>xpos,ypos å¯ä»¥é€‰æ‹©å…³é”®å­—ï¼Œleft|right|center     top|bottom|center ã€‚å¦‚æœæ˜¯å…³é”®å­—ï¼Œåˆ™æ˜¯å¦å¯¹åº”xyæ— å…³ç´§è¦ï¼Œæµè§ˆå™¨ä¼šè‡ªå·±é€‰æ‹©ã€‚å¦‚æœæ˜¯æ•°å€¼ï¼Œç™¾åˆ†æ¯”æˆ–è€…åƒç´ ï¼Œåˆ™è¦æŒ‰ç…§xï¼Œyçš„é¡ºåºå†™ã€‚<br><a href="https://codepen.io/akixiao/pen/qmWeqj" target="_blank" rel="external">å‚è€ƒå®ä¾‹</a></p>
<h3 id="backface-visibility"><a href="#backface-visibility" class="headerlink" title="backface-visibility"></a>backface-visibility</h3><p><code>backface-visibility</code> å±æ€§å®šä¹‰å½“å…ƒç´ ä¸é¢å‘å±å¹•æ—¶æ˜¯å¦å¯è§ã€‚æœ‰äº›æ—¶å€™å‰é¢çš„divå¦‚æœè®¾ç½®äº†é€æ˜åº¦ï¼Œå°±ä¼šçœ‹åˆ°åé¢çš„å¯¹è±¡ï¼Œè¿™æ˜¯å¯ä»¥å°†è¯¥å±æ€§è®¾ä¸ºhiddenå°±å¯ä»¥äº†ã€‚é»˜è®¤ï¼š<code>visible</code></p>
<h3 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h3><p>è¿™é‡Œä¸»è¦æå’Œ3dæœ‰å…³çš„å‡ ä¸ªå±æ€§  </p>
<ul>
<li>rotateX( angle )</li>
<li>rotateY( angle )</li>
<li>rotateZ( angle )</li>
<li>translateZ( tz )</li>
<li>scaleZ( sz )</li>
<li>translateZï¼ŒscaleZä¼šå°†å¯¹è±¡åœ¨ä¸å±å¹•å¹³è¡Œçš„æ–¹å‘å˜åŒ–ç‰©ä½“ã€‚ä¼šæœ‰å¤±çœŸã€‚</li>
</ul>
<p>ä¹Ÿæœ‰ç»¼åˆçš„å†™æ³•ï¼š  </p>
<ul>
<li>translate3d( tx, ty, tz )</li>
<li>scale3d( sx, sy, sz )</li>
<li>rotate3d( rx, ry, rz, angle )</li>
</ul>
<p>rotate3dè¿™é‡Œï¼Œå‰ä¸‰ä¸ªè§„å®šæ—‹è½¬è½´åœ¨ç©ºé—´ä¸­çš„æ–¹å‘ï¼Œæ¯”å¦‚xè½´ï¼Œå°±æ˜¯ï¼ˆ1ï¼Œ0ï¼Œ0ï¼‰<br><code>rotate3d(1,0,0,90deg)   ===  rotateX(90deg)</code></p>
<h3 id="transform-origin"><a href="#transform-origin" class="headerlink" title="transform-origin"></a>transform-origin</h3><p>è§„å®šå˜åŒ–çš„ä¸­å¿ƒç‚¹ã€‚ä¸€èˆ¬éƒ½æ˜¯å¯¹è±¡çš„é‡å¿ƒã€‚å¯ä»¥ä¿®æ”¹æˆä»»æ„çš„å€¼ï¼Œä»¥æ—‹è½¬ä¸ºä¾‹:</p>
<pre><code>html
&lt;div class=&quot;test1&quot;&gt;test&lt;/div&gt;
&lt;div class=&quot;test2&quot;&gt;test2&lt;/div&gt;
css
div {
  width:200px;
  height: 200px;
  background: rgba(255, 0, 0,.5);
  margin: 20px auto;
  animation: mymove 3s infinite;
}
.test1{
  transform: perspective(500px) rotateY(0deg);
}
.test2 {
  transform-origin: left;
  transform: perspective(500px) rotateY(0deg);
}

@keyframes mymove
{
  from {transform: perspective(500px) rotateY(0deg);}
  to {transform:perspective(500px) rotateY(360deg);}
}
</code></pre><p>è¡¨ç°æ˜¯ï¼štest1å°†æ²¿ç€divçš„å®½åº¦çš„ä¸€åŠä¸ºè½´æ—‹è½¬ã€‚test2åˆ™æ²¿ç€æœ€å·¦è¾¹çš„è¾¹æ¡†ä¸ºè½´æ—‹è½¬ã€‚<br><a href="https://codepen.io/akixiao/pen/mmdKYJ?editors=0100" target="_blank" rel="external">å‚è€ƒå®ä¾‹</a></p>
<h3 id="å®ä¾‹ä¸€ï¼šç¿»ç‰Œæ•ˆæœ"><a href="#å®ä¾‹ä¸€ï¼šç¿»ç‰Œæ•ˆæœ" class="headerlink" title="å®ä¾‹ä¸€ï¼šç¿»ç‰Œæ•ˆæœ"></a>å®ä¾‹ä¸€ï¼šç¿»ç‰Œæ•ˆæœ</h3><pre><code>&lt;div class=&quot;container&quot;&gt;
  &lt;div id=&quot;card&quot;&gt;
    &lt;div class=&quot;front&quot;&gt;1&lt;/div&gt;
    &lt;div class=&quot;back&quot;&gt;2&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

//css,è®¾ç½®ä¸€ä¸ªcontainerï¼Œä»–æ˜¯ä¸ªå…·æœ‰3dæ•ˆæœçš„box
.container {
  width: 200px;
  height: 200px;
  position: relative;
  perspective: 800px;
  border: 1px solid #888;
  margin: 40px auto;
}
#card {
  width: 100%;
  height: 100%;
  position: absolute;
  transform-style: preserve-3d;
  animation: flip 2s infinite;
  transform-origin: left center;
}
#card figure {
  display: block;
  width: 100%;
  height: 100%;
  position: absolute;
  text-align: center;
  color: white;
  font-size: 40px;
  line-height: 200px;
  backface-visibility: hidden;
}
.front {
  background: tomato;

}
.back {
  background: lightblue;
  transform: rotateY( 180deg );
}

@keyframes flip {
  0% {
    transform: rotateY( 0deg );
  }
  50% {
    transform: rotateY( 180deg ) translateX(-100%);
  }
  100% {
    transform: rotateY( 360deg )
  }
}
</code></pre><p>containerä¸­çš„card divå…·æœ‰3dæ•ˆæœï¼Œå¦‚æœæƒ³è®©cardä¸­çš„divç­‰ä¹Ÿæœ‰3då˜åŒ–æ•ˆæœï¼Œå¯ä»¥é€šè¿‡å¯¹cardè®¾ç½®ï¼š <code>transform-style: preserve-3d;</code> å°†å…¶çˆ¶å…ƒç´ çš„3dé€è§†é›†æˆä¸‹æ¥ï¼Œå¹¶ä½¿æ‰€æœ‰å­å…ƒç´ ä¿æŒåœ¨åŒä¸€ä¸ª3dç©ºé—´ä¸­ã€‚èƒŒé¢é‚£å¼ ç‰Œéœ€è¦ç¿»åˆ°èƒŒé¢å»ï¼Œä¹Ÿå°±æ˜¯<code>rotateY( 180deg );</code><br><a href="http://codepen.io/akixiao/pen/WjeWqQ" target="_blank" rel="external">å‚è€ƒç¤ºä¾‹</a></p>
<p>###å®ä¾‹äºŒï¼šæ—‹è½¬çš„æ­£æ–¹ä½“<br><a href="http://codepen.io/akixiao/pen/gWYNZo" target="_blank" rel="external">å‚è€ƒç¤ºä¾‹</a><br>å…­ä¸ªdivæ‹¼å‡‘èµ·æ¥çš„ã€‚åˆ†åˆ«åœ¨xyæ–¹å‘ä¸Šè¿›è¡Œç¿»è½¬ï¼Œç«‹åˆ°å¯¹åº”çš„æ–¹å‘ã€‚æ­¤æ—¶åœ¨æ·»åŠ ä¸€ä¸ª<code>translateZ</code>æ‰èƒ½æ˜¾ç°å‡ºä»–ä»¬çš„æ•ˆæœã€‚å¦åˆ™éƒ½æ˜¯å †åœ¨zindexä¸º0çš„ä½ç½®ï¼Œä»€ä¹ˆéƒ½çœ‹ä¸è§.  </p>
<p>åˆ«çš„é…ç½®åŠæ€æƒ³åŒä¸Šé¢çš„ç¿»ç‰Œ</p>
<p>###å¸¸è§é—®é¢˜ï¼š<br>1.è®¾äº†transfrom-style:preserve-3dä¸ºä»€ä¹ˆè¿˜ä¸å¥½ä½¿ã€‚  </p>
<p>è¿™ä¸ªæ—¶å€™éœ€è¦æŸ¥çœ‹çˆ¶å…ƒç´ æ˜¯å¦è¿˜è®¾äº†ï¼Œ<code>overflowï¼Œfilterï¼Œclipï¼Œisolationï¼Œclip-pathï¼Œmask-imageï¼Œmask-box-image-sourceï¼Œ mix-blend-mode</code>ï¼Œå¦‚æœä¸æ˜¯é»˜è®¤å€¼çš„ï¼Œä¼šå°†transfrom-style:preserve-3d å¤±æ•ˆã€‚åŸå› æ˜¯å‰å‡ ä¸ªå±æ€§ï¼Œä¼šåˆ›é€ ä¸€ä¸ªflattençš„boxï¼Œè€Œpreserve-3dæ˜¯ç”Ÿæˆstacking context  çš„ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;css3å®ç°3Dæ•ˆæœ&quot;&gt;&lt;a href=&quot;#css3å®ç°3Dæ•ˆæœ&quot; class=&quot;headerlink&quot; title=&quot;css3å®ç°3Dæ•ˆæœ&quot;&gt;&lt;/a&gt;css3å®ç°3Dæ•ˆæœ&lt;/h2&gt;&lt;h3 id=&quot;ç›¸å…³å±æ€§&quot;&gt;&lt;a href=&quot;#ç›¸å…³å±æ€§&quot; class=&quot;head
    
    </summary>
    
    
      <category term="css" scheme="https://misssweety.github.io/tags/css/"/>
    
      <category term="perspective" scheme="https://misssweety.github.io/tags/perspective/"/>
    
      <category term="3Dæ•ˆæœ" scheme="https://misssweety.github.io/tags/3D%E6%95%88%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°-é—­åŒ…</title>
    <link href="https://misssweety.github.io/2017/05/08/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E9%97%AD%E5%8C%85/"/>
    <id>https://misssweety.github.io/2017/05/08/è¯»ä¹¦ç¬”è®°-é—­åŒ…/</id>
    <published>2017-05-08T03:11:08.000Z</published>
    <updated>2017-05-18T07:11:41.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç»å…¸é—­åŒ…"><a href="#ç»å…¸é—­åŒ…" class="headerlink" title="ç»å…¸é—­åŒ…"></a>ç»å…¸é—­åŒ…</h2><p>é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå¼•ç”¨ï¼‰ï¼Œå³ä½¿ä»–æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œä»–ä¹Ÿå¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸã€‚å°±æ˜¯ç”¨è¿™ä¸ªå¼•ç”¨æ¥è®¿é—®ã€‚<br><a href="https://jsbin.com/duyotivalu/1/edit?js,console,output" target="_blank" rel="external">å‚è€ƒ</a></p>
<pre><code>function foo () {
  const a = 9;
  const bar = () =&gt; {return a;}
  return bar;
}

const aa = foo();
console.log(aa());
</code></pre><p>è¿”å›9ï¼›  </p>
<p><strong>è§£æ</strong><br>åœ¨<code>foo()</code>æ‰§è¡Œåï¼Œå…¶è¿”å›å€¼èµ‹å€¼ç»™å˜é‡aaï¼Œå¹¶æ‰§è¡Œ<code>aa()</code>ï¼Œå…¶å®æ˜¯é€šè¿‡ä¸åŒçš„æ ‡è¯†ç¬¦å¼•ç”¨è°ƒç”¨äº†å†…éƒ¨å‡½æ•°<code>bar()</code>ã€‚baråœ¨å…¶è¯æ³•ä½œç”¨åŸŸå¤–è¢«æ­£å¸¸æ‰§è¡Œäº†ã€‚è€Œä¸”fooå‡½æ•°æ‰§è¡Œåï¼Œé€šå¸¸æ•´ä¸ªfooå†…éƒ¨ä½œç”¨åŸŸéƒ½è¢«é”€æ¯ï¼Œä½†æ˜¯ç”±äºbarçš„å­˜åœ¨ï¼Œæ˜¯çš„å†…éƒ¨ä½œç”¨åŸŸä¾ç„¶å­˜åœ¨ï¼Œç»„ç»‡äº†åƒåœ¾å›æ”¶ã€‚<br><code>bar()</code> æ‹¥æœ‰æ¶µç›–<code>foo()</code>å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œä½¿å¾—è¯¥ä½œç”¨åŸŸèƒ½ä¸€ç›´å­˜æ´»ã€‚<code>bar()</code>ä¾ç„¶æŒæœ‰å¯¹è¯¥ä½œç”¨åŸŸçš„é¥®ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨å°±å«åš<strong>é—­åŒ…</strong>ã€‚  </p>
<p>å¦‚æœå°†å‡½æ•°å½“ä½œç¬¬ä¸€çº§çš„å€¼ç±»å‹è¿›è¡Œä¼ é€’ï¼Œå…¶å®å°±ä¼šæœ‰é—­åŒ…çš„å­˜åœ¨ã€‚<br>ä¸€äº›å¼‚æ­¥æˆ–è€…åŒæ­¥æ“ä½œä¸­ï¼Œä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œä¹Ÿæ˜¯åœ¨ä½¿ç”¨é—­åŒ…ã€‚  </p>
<p><em>æ— å¤„ä¸åœ¨</em></p>
<p>æœ¬è´¨ä¸Šæ— è®ºä½•æ—¶ä½•åœ°ï¼Œå¦‚æœå°†å‡½æ•°(è®¿é—®å®ƒä»¬å„è‡ªçš„è¯æ³•ä½œç”¨åŸŸ)å½“ä½œç¬¬ä¸€ çº§çš„å€¼ç±»å‹å¹¶åˆ°å¤„ä¼ é€’ï¼Œä½ å°±ä¼šçœ‹åˆ°é—­åŒ…åœ¨è¿™äº›å‡½æ•°ä¸­çš„åº”ç”¨ã€‚åœ¨<code>å®šæ—¶å™¨</code>ã€<code>äº‹ä»¶ç›‘å¬å™¨</code>ã€ <code>Ajaxè¯·æ±‚</code>ã€<code>è·¨çª—å£é€šä¿¡</code>ã€<code>Web Workers</code>æˆ–è€…<code>ä»»ä½•å…¶ä»–çš„å¼‚æ­¥(æˆ–è€…åŒæ­¥)ä»»åŠ¡</code>ä¸­ï¼Œåªè¦ä½¿ç”¨äº†<code>å›è°ƒå‡½æ•°</code>ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ä½¿ç”¨é—­åŒ….  </p>
<p>æœ€å¸¸è§çš„è€ƒé¢˜</p>
<pre><code>for (var i = 1; i&lt;= 5; i++) {
  setTimeout(() =&gt;console.log(i), 1000*i);
}
</code></pre><p>è¾“å‡ºæ˜¯ï¼šäº”ä¸ª6</p>
<p>åŸå› ï¼šiæ˜¯å…¨å±€å˜é‡ï¼ŒsetTimeoutæ˜¯ç­‰å¾…æ‰§è¡Œã€‚å»¶è¿Ÿå‡½æ•°çš„å›è°ƒä¼šåœ¨å¾ªç¯ç»“æŸæ—¶æ‰æ‰§è¡Œ,æ‰§è¡Œçš„æ—¶å€™iå·²ç»è·³å‡ºå¾ªç¯ï¼Œç¬¬ä¸€ä¸ªæ»¡è¶³çš„å€¼å°±æ˜¯6.æ‰€ä»¥è¾“å‡º5ä¸ª6.</p>
<p>ä¿®æ”¹ï¼šå°†var æ”¹ä¸ºletã€‚åªåœ¨å½“æ—¶çš„å¾ªç¯ä¸­ç”Ÿæ•ˆã€‚å¯ä»¥æ¯ç§’è¾“å‡º12345</p>
<p>å¦å¤–ä¸€ä¸ªåº”ç”¨ï¼š<br>æ¨¡å—</p>
<p>ä»æ–¹ä¾¿è§‚å¯Ÿçš„è§’åº¦çœ‹ï¼Œä¸€ä¸ªä»å‡½æ•°è°ƒç”¨ æ‰€è¿”å›çš„ï¼Œåªæœ‰æ•°æ®å±æ€§è€Œæ²¡æœ‰é—­åŒ…å‡½æ•°çš„å¯¹è±¡å¹¶ä¸æ˜¯çœŸæ­£çš„æ¨¡å—ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<pre><code>function CoolModule() {
  var something = &quot;cool&quot;;
  var another = [1, 2, 3];
   function doSomething() { console.log( something ); }
  function doAnother() {
    console.log( another.join( &quot; ! &quot; ) );
  }         
  return {
    doSomething: doSomething, doAnother: doAnother
  };
}
var foo = CoolModule(); foo.doSomething(); // cool
foo.doAnother(); // 1 ! 2 ! 3
</code></pre><p>ä¸Šä¸€ä¸ªç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸€ä¸ªå«ä½œ CoolModule() çš„ç‹¬ç«‹çš„æ¨¡å—åˆ›å»ºå™¨ï¼Œå¯ä»¥è¢«è°ƒç”¨ä»»æ„å¤šæ¬¡ï¼Œ æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—å®ä¾‹ã€‚<br>å¦‚æœæƒ³å®ç°å•ä¾‹æ¨¡å¼ï¼š<br>å°±æ˜¯å°†coolmodule è½¬æ¢ä¸ºiifeï¼Œå¹¶èµ‹äºˆä¸€ä¸ªæ ‡è¯†ç¬¦ï¼š</p>
<pre><code>var foo = (...)();
foo.doSomething();
foo.doAnother(); ç»“æœåŒä¸Š
</code></pre><p>  æ¨¡å—æœ‰ä¸¤ä¸ªä¸»è¦ç‰¹å¾:(1)ä¸ºåˆ›å»ºå†…éƒ¨ä½œç”¨åŸŸè€Œè°ƒç”¨äº†ä¸€ä¸ªåŒ…è£…å‡½æ•°;(2)åŒ…è£…å‡½æ•°çš„è¿”å›å€¼å¿…é¡»è‡³å°‘åŒ…æ‹¬ä¸€ä¸ªå¯¹å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šåˆ›å»ºæ¶µç›–æ•´ä¸ªåŒ…è£…å‡½æ•°å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ã€‚   </p>
<h4 id="è¯æ³•ä½œç”¨åŸŸ"><a href="#è¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="è¯æ³•ä½œç”¨åŸŸ"></a>è¯æ³•ä½œç”¨åŸŸ</h4><pre><code>function foo() {
  console.log( a ); // 2
}
function bar() {
  var a = 3;
  foo();
}
var a = 2;
bar();
</code></pre><p>è¾“å‡ºç»“æœï¼š2ã€‚è¯æ³•ä½œç”¨åŸŸï¼Œè¿è¡Œbarï¼Œåˆ°fooçš„æ—¶å€™ï¼Œè¿™é‡Œçš„aæ˜¯å…¨å±€å˜é‡çš„aï¼Œæ‰€ä»¥ä¸º2.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç»å…¸é—­åŒ…&quot;&gt;&lt;a href=&quot;#ç»å…¸é—­åŒ…&quot; class=&quot;headerlink&quot; title=&quot;ç»å…¸é—­åŒ…&quot;&gt;&lt;/a&gt;ç»å…¸é—­åŒ…&lt;/h2&gt;&lt;p&gt;é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå¼•ç”¨ï¼‰ï¼Œå³ä½¿ä»–æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œä»–ä¹Ÿå¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸã€‚å°±æ˜¯ç”¨è¿™ä¸ªå¼•ç”¨æ¥è®¿é—®ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://misssweety.github.io/tags/js/"/>
    
      <category term="é—­åŒ…" scheme="https://misssweety.github.io/tags/%E9%97%AD%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>linux ç›®å½•ç»“æ„</title>
    <link href="https://misssweety.github.io/2017/05/08/linux%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95/"/>
    <id>https://misssweety.github.io/2017/05/08/linuxæ–‡ä»¶ç›®å½•/</id>
    <published>2017-05-08T02:46:56.000Z</published>
    <updated>2017-05-08T03:11:57.000Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ¥å­¦linuxçš„æ—¶å€™ï¼Œä¸ä¸Šå¿ƒï¼Œç°åœ¨åæ‚”è«åŠï¼Œå¼€å§‹è¡¥åŸºç¡€ã€‚<br>é¦–å…ˆæ˜¯æœ€åŸºæœ¬çš„ç›®å½•ç»“æ„ã€‚<br>linuxæ˜¯æ ‘çŠ¶ç»“æ„  </p>
<p><strong>æ ‡æ©˜è‰²ä¸ºé‡è¦ç›®å½•</strong></p>
<table>
<thead>
<tr>
<th>ç›®å½•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>ï¼</td>
<td>æ ¹ç›®å½•ï¼Œæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„çš„æ ¹ç›®å½•ï¼Œä¸€èˆ¬åªæ”¾ç›®å½•</td>
</tr>
<tr>
<td>/bin/</td>
<td>ç±»ä¼¼ <code>/usr/bin</code> å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶çš„ç›®å½•ï¼Œå¸¸ç”¨çš„lsï¼Œtarï¼Œmvï¼Œ catç­‰</td>
</tr>
<tr>
<td>/boot/</td>
<td>å¼•å¯¼ç¨‹åºæ–‡ä»¶ï¼Œæ”¾ç½®linuxç³»ç»Ÿå¯åŠ¨æ—¶ç”¨åˆ°çš„ä¸€äº›æ–‡ä»¶</td>
</tr>
<tr>
<td><font color="orange">/dev/</font></td>
<td>å­˜æ”¾linuxç³»ç»Ÿä¸‹çš„è®¾å¤‡æ–‡ä»¶ï¼Œè®¿é—®è¯¥ç›®å½•ä¸‹æŸä¸ªæ–‡ä»¶ï¼Œç›¸å½“äºè®¿é—®æŸä¸ªè®¾å¤‡</td>
</tr>
<tr>
<td><font color="orange">/etc/</font></td>
<td>ç³»ç»Ÿé…ç½®æ–‡ä»¶å­˜æ”¾çš„ç›®å½•,ä¸å»ºè®®åœ¨æ­¤ç›®å½•ä¸‹å­˜æ”¾å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‡è¦çš„é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td><font color="orange">/home/</font></td>
<td>ç³»ç»Ÿé»˜è®¤çš„ç”¨æˆ·å®¶ç›®å½•ï¼Œæ–°å¢ç”¨æˆ·è´¦å·æ—¶ï¼Œç”¨æˆ·çš„å®¶ç›®å½•éƒ½å­˜æ”¾åœ¨æ­¤ç›®å½•ä¸‹, å»ºè®®å•ç‹¬åˆ†åŒºï¼Œå¹¶è®¾ç½®è¾ƒå¤§çš„ç£ç›˜ç©ºé—´</td>
</tr>
<tr>
<td>/lib/,/usr/lib/, /usr/local/lib/</td>
<td>ç³»ç»Ÿä½¿ç”¨çš„å‡½æ•°åº“çš„ç›®å½•ï¼Œç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦è°ƒç”¨ä¸€äº›é¢å¤–çš„å‚æ•°æ—¶éœ€è¦å‡½æ•°åº“çš„ååŠ©ï¼Œæ¯”è¾ƒé‡è¦çš„ç›®å½•ä¸º/lib/modules</td>
</tr>
<tr>
<td>/lost+fount/</td>
<td>ç³»ç»Ÿå¼‚å¸¸äº§ç”Ÿé”™è¯¯æ—¶ï¼Œä¼šå°†ä¸€äº›é—å¤±çš„ç‰‡æ®µæ”¾ç½®äºæ­¤ç›®å½•ä¸‹ï¼Œé€šå¸¸è¿™ä¸ªç›®å½•ä¼šè‡ªåŠ¨å‡ºç°åœ¨è£…ç½®ç›®å½•ä¸‹ã€‚</td>
</tr>
<tr>
<td>/mnt/</td>
<td>ä¸´æ—¶æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚cdrom,uç›˜ç­‰ï¼Œç›´æ¥æ’å…¥å…‰é©±æ— æ³•ä½¿ç”¨ï¼Œè¦å…ˆæŒ‚è½½åä½¿ç”¨</td>
</tr>
<tr>
<td>/opt/</td>
<td>ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•, å¯é€‰åº”ç”¨è½¯ä»¶åŒ…ã€‚</td>
</tr>
<tr>
<td><font color="orange">/proc/</font></td>
<td>æ­¤ç›®å½•çš„æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œå¦‚ç³»ç»Ÿæ ¸å¿ƒï¼Œå¤–éƒ¨è®¾å¤‡ï¼Œç½‘ç»œçŠ¶æ€ï¼Œç”±äºæ•°æ®éƒ½å­˜æ”¾äºå†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸å ç”¨ç£ç›˜ç©ºé—´.æ¯”è¾ƒé‡è¦çš„ç›®å½•æœ‰/proc/cpuinfoã€/proc/interruptsã€/proc/dmaã€/proc/ioportsã€/proc/net/*ç­‰</td>
</tr>
<tr>
<td>/root/</td>
<td>è¶…çº§æƒé™ç”¨æˆ·çš„å®¶ç›®å½•</td>
</tr>
<tr>
<td><font color="orange">/sbin:/usr/sbin:/usr/local/sbin</font></td>
<td>æ”¾ç½®ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚fdiskã€shutdownã€mountç­‰ã€‚sbinç›®å½•ä¸‹çš„å‘½ä»¤ï¼Œæ™®é€šç”¨æˆ·éƒ½æ‰§è¡Œä¸äº†ã€‚</td>
</tr>
<tr>
<td>/tmp/</td>
<td>ä¸€èˆ¬ç”¨æˆ·æˆ–æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºä¸´æ—¶å­˜æ”¾æ–‡ä»¶çš„ç›®å½•,ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®,é‡è¦æ•°æ®ä¸å¯æ”¾ç½®åœ¨æ­¤ç›®å½•ä¸‹,åœ¨ç³»ç»Ÿé‡å¯æ—¶ç›®å½•ä¸­æ–‡ä»¶ä¸ä¼šè¢«ä¿ç•™ã€‚</td>
</tr>
<tr>
<td>/srv/</td>
<td>æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦è®¿é—®çš„æ•°æ®ç›®å½•ï¼Œå¦‚wwwæœåŠ¡éœ€è¦è®¿é—®çš„ç½‘é¡µæ•°æ®å­˜æ”¾åœ¨/srv/wwwå†…</td>
</tr>
<tr>
<td><font color="orange">/usr/</font></td>
<td>é»˜è®¤è½¯ä»¶éƒ½ä¼šå­˜äºè¯¥ç›®å½•ä¸‹ã€‚ç”¨äºå­˜å‚¨åªè¯»ç”¨æˆ·æ•°æ®çš„ç¬¬äºŒå±‚æ¬¡ï¼›åŒ…å«ç»å¤§å¤šæ•°çš„(å¤š)ç”¨æˆ·å·¥å…·å’Œåº”ç”¨ç¨‹åºã€‚</td>
</tr>
<tr>
<td><font color="orange">/var/</font></td>
<td>å˜é‡æ–‡ä»¶â€”â€”åœ¨æ­£å¸¸è¿è¡Œçš„ç³»ç»Ÿä¸­å…¶å†…å®¹ä¸æ–­å˜åŒ–çš„æ–‡ä»¶ï¼Œå¦‚éšæ—¶æ›´æ”¹çš„æ—¥å¿—æ–‡ä»¶ /var/logï¼Œ/var/log/messageï¼š æ‰€æœ‰çš„ç™»å½•æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œ/var/spool/mailï¼š é‚®ä»¶å­˜æ”¾çš„ç›®å½•ï¼Œ /var/run: ç¨‹åºæˆ–æœåŠ¡å¯åŠ¨</td>
</tr>
</tbody>
</table>
<h3 id="etc-ç›®å½•"><a href="#etc-ç›®å½•" class="headerlink" title="/etc/ç›®å½•"></a>/etc/ç›®å½•</h3><p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚<br><a href="http://yangrong.blog.51cto.com/6945369/1288072" target="_blank" rel="external">å‚è€ƒ</a><br><a href="http://www.iteye.com/topic/1125162" target="_blank" rel="external">å‚è€ƒäºŒ</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åŸæ¥å­¦linuxçš„æ—¶å€™ï¼Œä¸ä¸Šå¿ƒï¼Œç°åœ¨åæ‚”è«åŠï¼Œå¼€å§‹è¡¥åŸºç¡€ã€‚&lt;br&gt;é¦–å…ˆæ˜¯æœ€åŸºæœ¬çš„ç›®å½•ç»“æ„ã€‚&lt;br&gt;linuxæ˜¯æ ‘çŠ¶ç»“æ„  &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ‡æ©˜è‰²ä¸ºé‡è¦ç›®å½•&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç›®å½•&lt;/th&gt;
&lt;th&gt;æ
    
    </summary>
    
    
      <category term="linux" scheme="https://misssweety.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>exportç›¸å…³</title>
    <link href="https://misssweety.github.io/2017/04/18/exports/"/>
    <id>https://misssweety.github.io/2017/04/18/exports/</id>
    <published>2017-04-18T03:01:45.000Z</published>
    <updated>2017-05-18T07:11:50.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="exports-å’Œ-module-exports-çš„åŒºåˆ«"><a href="#exports-å’Œ-module-exports-çš„åŒºåˆ«" class="headerlink" title="exports å’Œ module.exports çš„åŒºåˆ«"></a>exports å’Œ module.exports çš„åŒºåˆ«</h3><p><code>exports</code> æ˜¯å¼•ç”¨ <code>module.exports</code> çš„å€¼ã€‚<code>module.exports</code> è¢«æ”¹å˜çš„æ—¶å€™ï¼Œ<code>exports</code>ä¸ä¼šè¢«æ”¹å˜ï¼Œè€Œæ¨¡å—å¯¼å‡ºçš„æ—¶å€™ï¼ŒçœŸæ­£å¯¼å‡ºçš„æ‰§è¡Œæ˜¯<code>module.exports</code>ï¼Œè€Œä¸æ˜¯<code>exports</code>ã€‚</p>
<p>æœ‰ä»¥å‡ ç‚¹éœ€è¦è®°ä½ï¼š</p>
<p>module.exports åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ {}<br>exports æ˜¯æŒ‡å‘çš„ module.exports çš„å¼•ç”¨<br>require() è¿”å›çš„æ˜¯ module.exports è€Œä¸æ˜¯ exports<br>å¦‚æœmodule.exports å½“å‰æ²¡æœ‰ä»»ä½•å±æ€§çš„è¯ï¼Œexportsä¼šæŠŠå±æ€§æ”¶é›†èµ·æ¥èµ‹ç»™module.exportsã€‚<br>å¦‚æœmodule.exports æœ‰å±æ€§çš„è¯, exportsä¸­çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥ã€‚</p>
<pre><code>foo.js
exports.a = function(){
  console.log(&apos;a&apos;)
}

module.exports = {a: 2}
exports.a = 1 

test.js
var x = require(&apos;./foo&apos;);
console.log(x.a);
è¾“å‡º ï¼š2


å¦‚æœï¼šfoo.js ä¸ºï¼š
exports.a = function(){
  console.log(&apos;a&apos;)
}
exports.a = 1

test.js è¾“å‡ºï¼š1


å¦‚æœï¼šfoo.jsä¸ºï¼š
exports.a = function(){
  console.log(&apos;a&apos;)
}
test.js è¾“å‡ºï¼š[Function]
</code></pre><p>é¦–å…ˆï¼Œnodeä¸­çš„require å¼•è¿›çš„æ˜¯module.exportsã€‚ã€‚ã€‚è§ç¬¬ä¸€ä¸ªå®ä¾‹ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼çš„å†™module.exportsï¼Œåˆ™è‡ªåŠ¨è¿æ¥exportsä¸module.exportsã€‚å¦‚æœæ˜¾ç¤ºçš„å†™äº†module.exportsï¼Œåˆ™ä¼šæ–­å¼€module.exports ä¸ exports çš„è”ç³»ã€‚</p>
<p>åº”ç”¨çš„è¯ï¼Œå¦‚æœåªæ˜¯å¯¼å‡ºæŸä¸ªå˜é‡æˆ–è€…æŸä¸ªåŠŸèƒ½ï¼Œç”¨exports.å±æ€§|æ–¹æ³•ã€‚<br>å¦‚æœæ˜¯å¯¼å‡ºå¤šä¸ªå±æ€§æˆ–æ–¹æ³•æˆ–ä½¿ç”¨å¯¹è±¡æ„é€ æ–¹æ³•ï¼Œmodule.module æ¯”è¾ƒå¥½ã€‚</p>
<h4 id="export-default-å’Œ-export-åŒºåˆ«"><a href="#export-default-å’Œ-export-åŒºåˆ«" class="headerlink" title="export default å’Œ export åŒºåˆ«"></a>export default å’Œ export åŒºåˆ«</h4><p>1.exportä¸export defaultå‡å¯ç”¨äºå¯¼å‡ºå¸¸é‡ã€å‡½æ•°ã€æ–‡ä»¶ã€æ¨¡å—ç­‰<br>2.ä½ å¯ä»¥åœ¨å…¶å®ƒæ–‡ä»¶æˆ–æ¨¡å—ä¸­é€šè¿‡import+(å¸¸é‡ | å‡½æ•° | æ–‡ä»¶ | æ¨¡å—)åçš„æ–¹å¼ï¼Œå°†å…¶å¯¼å…¥ï¼Œä»¥ä¾¿èƒ½å¤Ÿå¯¹å…¶è¿›è¡Œä½¿ç”¨<br>3.åœ¨ä¸€ä¸ªæ–‡ä»¶æˆ–æ¨¡å—ä¸­ï¼Œexportã€importå¯ä»¥æœ‰å¤šä¸ªï¼Œexport defaultä»…æœ‰ä¸€ä¸ª<br>4.é€šè¿‡exportæ–¹å¼å¯¼å‡ºï¼Œåœ¨å¯¼å…¥æ—¶è¦åŠ { }ï¼Œexport defaultåˆ™ä¸éœ€è¦</p>
<p>å¼•å…¥æ—¶ï¼š<br>åŠ äº†defaultçš„å˜é‡ï¼Œå¯ä»¥èµ·ä»»æ„åå­—ï¼Œ<br>édefaultçš„éœ€è¦ä¸exportæ—¶çš„åå­—ç›¸åŒã€‚</p>
<h4 id="module-exports-vs-export"><a href="#module-exports-vs-export" class="headerlink" title="module.exports vs export"></a>module.exports vs export</h4><p>commonjsï¼šmodule.exports   æ­é…çš„å¼•å…¥ï¼š require<br>es6: export               æ­é…çš„å¼•å…¥ï¼š  import</p>
<p>æ™®é€šjsç¯å¢ƒä¸‹æ˜¯ä¸æ”¯æŒes6çš„è¯­æ³•çš„ï¼Œå¦‚æœæƒ³è¿™ä¹ˆç”¨ï¼Œéœ€è¦ç”¨babelç­‰è¿›è¡Œè½¬è¯‘ã€‚</p>
<p>es6 <code>default</code> export å…¶å®æ˜¯ä¸exports ç­‰ä»·çš„ï¼Œåªä¸è¿‡ <code>default</code> åªæ˜¯ä¸€ä¸ªä¿ç•™çš„åç§°ï¼Œå¯ä»¥æƒ³è±¡ä¸ºï¼Œexports ä¸€ä¸ªå±æ€§ï¼Œå±æ€§åä¸ºdefaultã€‚æ‰€ä»¥å¦‚æœæ˜¯åœ¨node.jsç¯å¢ƒä¸‹ï¼Œç”¨çš„export defaultï¼Œ å¼•ç”¨çš„æ—¶å€™ç”¨requireçš„è¯ï¼Œéœ€è¦è¿™ä¹ˆå†™ï¼š  </p>
<p>var bar = require(â€˜./inputâ€™).default;</p>
<p><code>export</code>  vs  <code>export default</code><br>è¿™ä¸¤ä¸ªåœ¨importçš„æ—¶å€™ï¼Œå‰è€…éœ€è¦ç”¨{} æ‰©èµ·æ¥ï¼Œæœ‰ç§è§£æ„çš„æ„Ÿè§‰ã€‚åè€…ä¸éœ€è¦{}æ‰©ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;exports-å’Œ-module-exports-çš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#exports-å’Œ-module-exports-çš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;exports å’Œ module.exports çš„åŒºåˆ«&quot;&gt;&lt;/a&gt;ex
    
    </summary>
    
    
      <category term="node.js" scheme="https://misssweety.github.io/tags/node-js/"/>
    
      <category term="js" scheme="https://misssweety.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>Visual-Formatting-Model</title>
    <link href="https://misssweety.github.io/2017/04/17/Visual-Formatting-Model/"/>
    <id>https://misssweety.github.io/2017/04/17/Visual-Formatting-Model/</id>
    <published>2017-04-17T04:00:00.000Z</published>
    <updated>2017-04-26T03:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-è§†è§‰æ ¼å¼åŒ–æ¨¡å‹-introduction"><a href="#1-è§†è§‰æ ¼å¼åŒ–æ¨¡å‹-introduction" class="headerlink" title="1.è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ introduction"></a>1.è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ introduction</h2><p>è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ï¼š<code>User Agent</code> å¦‚ä½•åœ¨ <code>Visual Media</code>ä¸‹å¤„ç†æ–‡æ¡£æ ‘ã€‚</p>
<p>è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ä¸­ï¼Œæ–‡æ¡£æ ‘ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ ¹æ®ç›’æ¨¡å‹ <code>Box Model</code> äº§ç”Ÿé›¶ä¸ªæˆ–å¤šä¸ªç›’ã€‚è¿™äº›ç›’çš„å¸ƒå±€ç”±ä»¥ä¸‹å†…å®¹æ§åˆ¶ï¼š</p>
<ul>
<li>ç›’çš„å°ºå¯¸å’Œç±»å‹</li>
<li>å®šä½ä½“ç³» Positioning Scheme ï¼ˆå¸¸è§„æµï¼Œæµ®åŠ¨å’Œç»å¯¹å®šä½ï¼‰</li>
<li>æ–‡æ¡£æ ‘ä¸­å…ƒç´ ä¹‹é—´çš„å…³ç³»</li>
<li>å¤–éƒ¨ä¿¡æ¯ï¼ˆå¦‚ï¼šè§†å£å¤§å°ï¼Œå›¾ç‰‡çš„å›ºæœ‰å°ºå¯¸ç­‰ï¼‰</li>
</ul>
<h3 id="1-1-è§†å£-viewport"><a href="#1-1-è§†å£-viewport" class="headerlink" title="1.1 è§†å£ viewport"></a>1.1 è§†å£ viewport</h3><p>è¿ç»­åª’ä½“ <code>Continuous Media</code> ä¸Šå·¥ä½œçš„<code>user agent</code>ä¸€èˆ¬ä¼šå‘ç”¨æˆ·æä¾›ä¸€ä¸ª<code>viewport</code>ï¼ˆå±å¹•ä¸Šçš„ä¸€ä¸ªçª—å£æˆ–å…¶å®ƒå¯è§†åŒºåŸŸï¼‰æ¥å¸®åŠ©ç”¨æˆ·è®¿é—®æ–‡æ¡£ã€‚<code>user agent</code>å¯ä»¥åœ¨è°ƒæ•´è§†å£å¤§å°çš„åŒæ—¶æ”¹å˜æ–‡æ¡£çš„å¸ƒå±€</p>
<h3 id="1-2-åŒ…å«å—-containing-blocks"><a href="#1-2-åŒ…å«å—-containing-blocks" class="headerlink" title="1.2 åŒ…å«å— containing blocks"></a>1.2 åŒ…å«å— containing blocks</h3><p>CSS2.1ä¸­ï¼Œè®¸å¤šç›’çš„å®šä½å’Œå¤§å°éƒ½æ ¹æ®ä¸€ä¸ªåä¸ºåŒ…å«å— <code>Containing Block</code> çš„çŸ©å½¢ç›’çš„è¾¹ç¼˜æ¥è®¡ç®—ã€‚ç”Ÿæˆçš„ç›’ä¼šå……å½“å…¶åä»£ç›’çš„åŒ…å«å—ï¼›æˆ‘ä»¬ç§°ç›’ä¸ºå…¶åä»£â€œåˆ›å»ºâ€äº†åŒ…å«å—ã€‚è¯´â€œç›’çš„åŒ…å«å—â€å³æ˜¯è¯´â€œç›’æ‰€å¤„çš„åŒ…å«å—â€ï¼Œè€Œä¸æ˜¯ç›’æ‰€äº§ç”Ÿçš„åŒ…å«å—ã€‚</p>
<h2 id="2-ç›’çš„ç”Ÿæˆ-Controlling-Box-Generation"><a href="#2-ç›’çš„ç”Ÿæˆ-Controlling-Box-Generation" class="headerlink" title="2 ç›’çš„ç”Ÿæˆ Controlling Box Generation"></a>2 ç›’çš„ç”Ÿæˆ Controlling Box Generation</h2><p>displayæŒ‡å®šç›’çš„ç±»å‹</p>
<p>æœ‰å‡ ä¸ªæ¦‚å¿µï¼š  </p>
<ul>
<li><code>block-level box</code>: displayï¼šblock|table|list-item</li>
<li><code>block box</code>: é™¤äº†tableå—ç›’å’Œå¯æ›¿æ¢å…ƒç´ ï¼Œå…¶ä»–çš„éƒ½æ˜¯å—å®¹å™¨ç›’ã€‚ä¹Ÿæ˜¯å—ç›’ã€‚</li>
<li><code>block container box</code>: ä¸€ä¸ªå—å®¹å™¨ç›’è¦ä¹ˆåªåŒ…å«å—çº§ç›’ï¼Œè¦ä¹ˆåˆ›å»ºä¸€ä¸ªè¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ <code>Inline Formatting Context</code> å¹¶åªåŒ…å«è¡Œå†…çº§ç›’ <code>Inline-level Boxes</code>ã€‚ä¸ä¸€å®šæ˜¯blockçš„æ‰æ˜¯ï¼Œè¡Œå†…ä¹Ÿæ˜¯ã€‚æ‰€ä»¥å’Œå—çº§ç›’åªæ˜¯ä¸€éƒ¨åˆ†æœ‰äº¤é›†ã€‚</li>
</ul>
<h2 id="3-å®šä½ä½“ç³»-Position-schemes"><a href="#3-å®šä½ä½“ç³»-Position-schemes" class="headerlink" title="3 å®šä½ä½“ç³» Position schemes"></a>3 å®šä½ä½“ç³» Position schemes</h2><p>åœ¨<code>css2.1</code>ä¸­ï¼Œä¸€ä¸ª<code>box</code>æœ‰ä¸‰ç§æœºåˆ¶æ¥å¸ƒå±€  </p>
<ul>
<li>normal flowï¼šå—çº§formatting, è¡Œçº§formattingï¼Œç›¸å¯¹å®šä½</li>
<li>floatï¼šboxå…ˆæŒ‰ç…§normal flowæ”¾ç½®ï¼Œç„¶åä»æµä¸­è„±ç¦»å‡ºæ¥ï¼Œå¯èƒ½ä¼šå¯¹åé¢çš„æ’åºæœ‰å½±å“</li>
<li>absolute positionï¼šå®Œå…¨è„±ç¦»å‡ºæ–‡æ¡£æµï¼Œå¯¹ä¹‹åçš„å…ƒç´ æ²¡æœ‰å½±å“</li>
</ul>
<p>[<code>è„±ç¦»æ–‡æ¡£æµ</code>] floatï¼Œ absolutely positionedï¼Œ æ ¹å…ƒç´ ã€‚</p>
<h3 id="3-1-position-å±æ€§"><a href="#3-1-position-å±æ€§" class="headerlink" title="3.1 position å±æ€§"></a>3.1 position å±æ€§</h3><p>å±æ€§ï¼š  </p>
<ul>
<li>staticï¼š<br>top rightç­‰å¹¶ä¸ç”Ÿæ•ˆ</li>
<li>relativeï¼š<br>ç›’çš„å®šä½æ ¹æ®å¸¸è§„æµè®¡ç®—ï¼ˆç›’è¢«æˆä¸ºå¸¸è§„æµå†…å®šä½ï¼‰ã€‚ç›’ç›¸å¯¹å…¶å¸¸è§„ä½ç½®ç§»åŠ¨ã€‚å½“Bç›’ç›¸å¯¹å®šä½ï¼ŒBç›’ä¹‹åçš„ç›’å®šä½æ—¶å°±å½“Bæ²¡æœ‰ç§»åŠ¨ä¸€æ ·æ¥è®¡ç®—ã€‚tableç›¸å…³çš„å†…ç›’å¹¶æ²¡æœ‰relativeå±æ€§</li>
<li>absoluteï¼š<br>ä½ç½®å¤§å°é€šè¿‡topï¼Œrightç­‰å®šä¹‰ã€‚è„±ç¦»æ–‡æ¡£æµäº†ï¼Œå³ä¾¿ç»å¯¹å®šä½ç›’æœ‰å¤–è¾¹è·ï¼Œä¹Ÿä¸åŒå…¶ä»–ä»»ä½•å¤–è¾¹è·æŠ˜å ã€‚</li>
<li>fixedï¼š<br>ç›’çš„å®šä½æ ¹æ® absolute æ¨¡å‹æ¥è®¡ç®—ï¼Œä½†é™¤æ­¤ä¹‹å¤–ï¼Œç›’ç›¸å¯¹æŸäº›å‚ç…§ç‰©ä¿æŒå›ºå®šã€‚<br>ã€ç”¨æˆ·ä»£ç†ä¸å¯å°†å›ºå®šç›’çš„å†…å®¹åˆ†é¡µæ˜¾ç¤ºã€‚æ³¨æ„ç”¨æˆ·ä»£ç†å¯èƒ½ç”¨å…¶ä»–æ–¹æ³•æ‰“å°ä¸å¯è§å†…å®¹ã€‚å‚è§ç¬¬13ç« â€œé¡µç›’å¤–çš„å†…å®¹â€ã€‘</li>
</ul>
<h2 id="4-å¸¸è§„æµ-Normal-Flow"><a href="#4-å¸¸è§„æµ-Normal-Flow" class="headerlink" title="4 å¸¸è§„æµ Normal Flow"></a>4 å¸¸è§„æµ Normal Flow</h2><p>å¸¸è§„æµä¸­çš„ç›’å­éƒ½å±äºæŸä¸ª<code>æ ¼å¼åŒ–ä¸Šä¸‹æ–‡</code>ï¼Œè¦ä¹ˆ<code>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡BFC</code>ï¼Œè¦ä¹ˆ<code>è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡LFC</code>ï¼Œæ€»ä¹‹ä¸èƒ½äºŒè€…å¾—å…¼ã€‚</p>
<p>###4.1 bfc  </p>
<ul>
<li>æµ®åŠ¨</li>
<li>ç»å¯¹å®šä½å…ƒç´ ã€</li>
<li>éå—ç›’çš„å—å®¹å™¨ï¼ˆå¦‚ï¼šè¡Œå†…å— inline-block ã€è¡¨æ ¼å•å…ƒæ ¼ table-cell ä»¥åŠè¡¨æ ¼æ ‡é¢˜ table-caption ï¼‰</li>
<li>ä»¥åŠ overflow å±æ€§ä¸ä¸º visible çš„å—ç›’ï¼ˆé™¤äº†è¯¥å€¼è¢«ä¼ æ’­åˆ°è§†å£çš„æƒ…å†µï¼‰</li>
</ul>
<p>å°†ä¸ºå…¶å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚</p>
<p>åœ¨å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­:</p>
<ul>
<li>ç›’ä»åŒ…å«å—é¡¶éƒ¨ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å‚ç›´æ‘†æ”¾ã€‚</li>
<li>ä¸¤ä¸ªåŒèƒç›’é—´çš„å‚ç›´è·ç¦»å–å†³äº margin å±æ€§ã€‚</li>
<li>åŒä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­çš„ç›¸é‚»å—çº§ç›’çš„å‚ç›´å¤–è¾¹è·å°†æŠ˜å ã€‚</li>
<li>æ¯ä¸ªç›’çš„å·¦å¤–è¾¹ç¼˜ç´§è´´åŒ…å«å—çš„å·¦è¾¹ç¼˜ã€‚</li>
</ul>
<p>###4.2 lfc</p>
<p>ç›’ä»åŒ…å«å—é¡¶éƒ¨ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ°´å¹³æ‘†æ”¾ã€‚ç›’çš„å‚ç›´å¯¹é½æ–¹å¼åˆ™ä¸ä¸€ï¼šå¯èƒ½æŒ‰åº•éƒ¨æˆ–è€…é¡¶éƒ¨å¯¹é½ï¼Œåˆæˆ–è€…æŒ‰å®ƒä»¬å†…å®¹æ–‡æœ¬çš„åŸºçº¿å¯¹é½ã€‚</p>
<ul>
<li>è¡Œç›’çš„å®½åº¦å–å†³äºåŒ…å«å—ä»¥åŠæµ®åŠ¨ã€‚</li>
<li>è¡Œç›’çš„é«˜æ€»æ˜¯è¶³ä»¥å®¹çº³å…¶åŒ…å«çš„æ‰€æœ‰ç›’ï¼Œå½“ä¸€ä¸ªç›’ï¼ˆ B ï¼‰çš„é«˜åº¦å°äºåŒ…å«å®ƒçš„è¡Œç›’çš„é«˜åº¦æ—¶ï¼Œ B çš„å‚ç›´å¯¹é½æ–¹å¼ç”± vertical-align å±æ€§å†³å®šã€‚</li>
<li>å½“ä¸€è¡Œä¸èƒ½åŒ…å«æ‰€æœ‰æ—¶ï¼Œå®ƒä»¬ä¼šè¢«åˆ†é…åˆ°ä¸¤ä¸ªæˆ–è€…å¤šä¸ªå‚ç›´æ‘†æ”¾çš„è¡Œç›’ä¸­ï¼Œå˜æˆå‚ç›´å †å ã€‚è¡Œç›’çš„å †å æ²¡æœ‰å‚ç›´é—´è·ï¼ˆé™¤éæœ‰ç‰¹åˆ«å£°æ˜ï¼‰å¹¶ä¸”ä»ä¸é‡å ã€‚</li>
<li>ä¸€èˆ¬è¡Œå†…ç›’è¶…è¿‡è¡Œç›’å®½åº¦æ˜¯ï¼Œè¡Œå†…ç›’ä¼šè¢«åˆ†åœ¨å¤šä¸ªè¡Œç›’ä¸­ã€‚</li>
<li>å¦‚æœä¸€ä¸ªè¡Œå†…ç›’ä¸å¯åˆ‡å‰²ï¼ˆæ¯”å¦‚ï¼Œè¡Œå†…ç›’åŒ…å«çš„æ˜¯å•ä¸ªå­—ç¬¦æˆ–è€…è¯­è¨€æŒ‡å®šçš„æ–­å­—è§„åˆ™ä¸å…è®¸æ–­å­—ï¼Œåˆæˆ–è€…è¡Œå†…ç›’çš„ white-space å±æ€§å€¼ä¸º nowrap æˆ– pre ï¼‰ï¼Œé‚£ä¹ˆè¯¥ã€è¡Œå†…ç›’å°†æº¢å‡ºè¡Œç›’ã€‘ã€‚</li>
</ul>
<p>###4.3 ç›¸å¯¹å®šä½<br>å¯¹äºç›¸å¯¹å®šä½è€Œè¨€ï¼Œ<code>left</code> å’Œ<code>right</code>ä½¿å…¶å‘ç”Ÿæ°´å¹³ä½ç§»ã€‚è€Œä¸”æ»¡è¶³ï¼šleft = - rightã€‚æ‰€ä»¥å¦‚æœä¸¤ä¸ªéƒ½å®šä¹‰äº†ï¼Œåˆ™å¿…æœ‰ä¸€ä¸ªè¢«å¿½ç•¥ã€‚<br>top bottomåŒç†ï¼Œtopèƒœã€‚</p>
<h2 id="5-æµ®åŠ¨-floats"><a href="#5-æµ®åŠ¨-floats" class="headerlink" title="5 æµ®åŠ¨ floats"></a>5 æµ®åŠ¨ floats</h2><p>æµ®åŠ¨ç›’å°†è¢«ç§»åŠ¨è‡³å·¦ä¾§æˆ–å³ä¾§ç›´è‡³å…¶å¤–ä¾§ç´§è´´åŒ…å«ç›’çš„è¾¹ç¼˜æˆ–å¦å¤–ä¸€ä¸ªæµ®åŠ¨çš„å¤–è¾¹ç¼˜ã€‚å¦‚æœå­˜åœ¨è¡Œç›’ï¼Œæµ®åŠ¨ç›’çš„é¡¶éƒ¨å¤–è¾¹ç¼˜å°†ä¸è¡Œç›’çš„é¡¶éƒ¨å¯¹é½ã€‚</p>
<p>floatå†…å…ƒç´ çš„marginä¸ä¼šä¸åŒ…å«ä»–çš„å‘ç”Ÿå‚ç›´è¾¹è·æŠ˜å ã€‚</p>
<p>clear æ¸…é™¤æµ®åŠ¨</p>
<p><a href="https://segmentfault.com/a/1190000003096320#articleHeader5" target="_blank" rel="external">https://segmentfault.com/a/1190000003096320#articleHeader5</a></p>
<p>[link]<a href="https://www.w3.org/TR/CSS2/visuren.html#block-formatting" target="_blank" rel="external">https://www.w3.org/TR/CSS2/visuren.html#block-formatting</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-è§†è§‰æ ¼å¼åŒ–æ¨¡å‹-introduction&quot;&gt;&lt;a href=&quot;#1-è§†è§‰æ ¼å¼åŒ–æ¨¡å‹-introduction&quot; class=&quot;headerlink&quot; title=&quot;1.è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ introduction&quot;&gt;&lt;/a&gt;1.è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ introducti
    
    </summary>
    
    
      <category term="css" scheme="https://misssweety.github.io/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>thinking-with-join</title>
    <link href="https://misssweety.github.io/2017/03/09/thinking-with-join/"/>
    <id>https://misssweety.github.io/2017/03/09/thinking-with-join/</id>
    <published>2017-03-09T14:16:48.000Z</published>
    <updated>2017-04-26T04:21:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹é¢è¿™æ®µä»£ç æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ï¼Œä¸ºæ¯ä¸ªæ•°æ®ç”Ÿæˆä¸€ä¸ªcircleï¼Œè°ƒç”¨æ•°æ®é‡Œçš„xï¼Œyæ¥å®šä½ã€‚ä½†æ˜¯æˆ‘ä»¬selectAllçš„å…ƒç´ ï¼Œæ­¤æ—¶å¹¶ä¸å­˜åœ¨ï¼Œé‚£d3æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢?</p>
<blockquote>
<p>svg.selectAll(â€œcircleâ€)<br>  .data(data)<br>  .enter().append(â€œcircleâ€)<br>    .attr(â€œcxâ€, function(d) { return d.x; })<br>    .attr(â€œcyâ€, function(d) { return d.y; })<br>    .attr(â€œrâ€, 2.5);</p>
</blockquote>
<p>åœ¨d3ä¸­ï¼Œå‘Šè¯‰d3ä½ æƒ³è¦ä»€ä¹ˆï¼Œè€Œä¸æ˜¯å‘Šè¯‰d3æ€æ ·åšä»€ä¹ˆã€‚å¯¹äºä¸Šé¢è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ï¼Œæˆ‘æƒ³è¦circleå¯¹åº”äºæ•°æ®ï¼Œæ¯ä¸ªcircleå¯¹åº”äºä¸€ä¸ªæ•°æ®ï¼Œè€Œä¸æ˜¯å‘Šè¯‰d3ï¼Œä½ åº”è¯¥ç»™æˆ‘åˆ›é€ ä¸€ä¸ªcircleï¼Œç„¶åå‘Šè¯‰d3é€‰æ‹©çš„circleåº”è¯¥å’Œæ•°æ®å¯¹åº”å¥½ã€‚<br>è¿™ä¸ªåŸåˆ™å°±å«åš<strong>data join</strong></p>
<svg width="720" height="240" version="1.1" xmlns="http://www.w3.org/2000/svg"><br/>  <g transform="translate(0,128)"><br/>    <g transform="translate(300)"><br/>      <circle r="110" style="fill: rgba(49, 130, 189,.2);" stroke="black"/><br/>      <text y="-120" dy=".35em" text-anchor="middle" style="font-weight: bold;">Data</text><br/>      <text x="-50" dy=".35em" text-anchor="middle">Enter</text><br/>    </g><br/>    <text x="360" dy=".35em" text-anchor="middle">Update</text><br/>    <g transform="translate(420)"><br/>      <circle r="110" style="fill: rgba(230, 85, 13,.2);" stroke="black"/><br/>      <text y="-120" dy=".35em" text-anchor="middle" style="font-weight: bold;">Elements</text><br/>      <text x="50" dy=".35em" text-anchor="middle">Exit</text><br/>    </g><br/>  </g><br/></svg>

<p>è¿æ¥åˆ°ç°æœ‰å…ƒç´ çš„æ•°æ®ç‚¹ç”Ÿæˆupdateï¼ˆå†…éƒ¨ï¼‰é€‰æ‹©ã€‚å‰©ä½™æœªç»‘å®šæ•°æ®ç”Ÿæˆenteré€‰æ‹©ï¼ˆå·¦ï¼‰ï¼Œè¡¨ç¤ºç¼ºå°‘çš„å…ƒç´ ã€‚åŒæ ·ï¼Œä»»ä½•å‰©ä½™çš„æœªç»‘å®šå…ƒç´ ä¼šç”Ÿæˆexité€‰æ‹©ï¼ˆå³ï¼‰ï¼Œè¡¨ç¤ºè¦åˆ é™¤çš„å…ƒç´ ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡data join æ¥æ­å¼€enter-appendåºåˆ—çš„è°œå›¢äº†</p>
<ol>
<li><code>svg.selectAll(&quot;circle&quot;)</code> è¿”å›ä¸€ä¸ªæ–°çš„ç©º<code>selection</code>ï¼Œå› ä¸ºSVGå®¹å™¨æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥è¯¥<code>selection</code>çš„çˆ¶èŠ‚ç‚¹æ˜¯SVGå®¹å™¨</li>
<li>ç„¶åæ­¤<code>selection</code>è¿æ¥åˆ°æ•°æ®æ•°ç»„ï¼Œç”Ÿæˆä¸‰ä¸ªæ–°<code>selection</code>åˆ†åˆ«è¡¨ç¤ºä¸‰ç§å¯èƒ½çš„çŠ¶æ€ï¼š<code>enter</code>ï¼Œ<code>update</code>å’Œ<code>exit</code>ã€‚ç”±äº<code>selection</code>ä¸ºç©ºï¼Œæ‰€ä»¥<code>update</code>å’Œ<code>exit</code>é€‰æ‹©ä¸ºç©ºï¼Œè€Œ<code>enter selection</code>åŒ…å«æ¯ä¸ªæ–°æ•°æ®çš„å ä½ç¬¦ã€‚</li>
<li><code>update selection</code>é€šè¿‡<a href="https://github.com/d3/d3-selection/blob/master/README.md#selection_data" target="_blank" rel="external">selection.data</a>è¿”å›,è€Œ<code>enter</code>å’Œ<code>exit selection</code>æŒ‚èµ·<code>update selection</code>; <a href="https://github.com/d3/d3-selection/blob/master/README.md#selection_enter" target="_blank" rel="external">selection.enter</a>è¿”å›<code>enter selection</code>ã€‚</li>
<li>é€šè¿‡åœ¨<code>enter selection</code>ä¸Šè°ƒç”¨<a href="https://github.com/d3/d3-selection/blob/master/README.md#selection_append" target="_blank" rel="external">selection.append</a>ï¼Œå°†ç¼ºå°‘çš„å…ƒç´ æ·»åŠ åˆ°SVGå®¹å™¨ã€‚è¿™ä¼šä¸ºæ¯ä¸ªæ•°æ®ç‚¹å‘SVGå®¹å™¨æ·»åŠ ä¸€ä¸ªæ–°åœ†ã€‚</li>
</ol>
<p><em>Thinking with joins</em> æ„å‘³ç€åœ¨ä¸€ä¸ªselectionå’Œæ•°æ®é›†ä¸­å£°æ˜ä¸€ç§å…³ç³»ï¼Œç„¶åé€šè¿‡<code>enter</code>, <code>update</code>, <code>exit</code>å®ç°è¿™ä¸ªå…³ç³».</p>
<p>ä½†æ˜¯ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆéº»çƒ¦å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€å¼€å§‹å°±åˆ›å»ºå¤šä¸ªå…ƒç´ å‘¢ï¼Ÿdata joinçš„ç¾ä¸½åœ¨äºå®ƒçš„æ³›åŒ–ã€‚è™½ç„¶ä¸Šè¿°ä»£ç åªå¤„ç†<code>enter selection</code>,è¿™å°±å¯ä»¥å¤„ç†é™æ€å¯è§†åŒ–äº†ï¼Œä½†æ˜¯ä½ å¯ä»¥å°†å…¶æ‰©å±•ä¸ºæ”¯æŒåŠ¨æ€å¯è§†åŒ–ï¼Œåªéœ€å¯¹<code>update</code>å’Œ<code>exit</code>è¿›è¡Œå°‘é‡ä¿®æ”¹ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥å¯¹<a href="https://bost.ocks.org/mike/path/" target="_blank" rel="external">å®æ—¶æ•°æ®</a>è¿›è¡Œå¯è§†åŒ–ï¼Œå…è®¸<a href="http://bl.ocks.org/mbostock/4063663" target="_blank" rel="external">äº¤äº’å¼æ¢ç´¢</a>ï¼Œä»¥åŠåœ¨æ•°æ®é›†ä¹‹é—´<a href="http://bl.ocks.org/mbostock/1256572" target="_blank" rel="external">å¹³æ»‘è¿‡æ¸¡</a>ï¼</p>
<p>çœ‹ä¸‹åŒ…å«ä¸‰ä¸ªçŠ¶æ€çš„ä¾‹å­ï¼š</p>
<blockquote>
<p>var circle = svg.selectAll(â€œcircleâ€)<br>  .data(data);<br>circle.exit().remove();<br>circle.enter().append(â€œcircleâ€)<br>  .attr(â€œrâ€, 2.5)<br>  .merge(circle)<br>  .attr(â€œcxâ€, function(d) { return d.x; })<br>  .attr(â€œcyâ€, function(d) { return d.y; });</p>
</blockquote>
<p>æ— è®ºä½•æ—¶è¿è¡Œæ­¤ä»£ç ï¼Œå®ƒéƒ½ä¼šé‡æ–°è®¡ç®—æ•°æ®è¿æ¥å¹¶ä¿æŒå…ƒç´ å’Œæ•°æ®ä¹‹é—´çš„æ‰€éœ€å¯¹åº”å…³ç³»ã€‚å¦‚æœæ–°æ•°æ®é›†å°äºæ—§æ•°æ®é›†ï¼Œåˆ™å‰©ä½™å…ƒç´ å°†åœ¨é€€å‡ºé€‰æ‹©ä¸­ç»“æŸå¹¶è¢«åˆ é™¤ã€‚å¦‚æœæ–°æ•°æ®é›†è¾ƒå¤§ï¼Œå‰©ä½™æ•°æ®å°†åœ¨è¾“å…¥é€‰æ‹©ä¸­ç»“æŸï¼Œå¹¶æ·»åŠ æ–°èŠ‚ç‚¹ã€‚å¦‚æœæ–°æ•°æ®é›†çš„å¤§å°å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆæ‰€æœ‰å…ƒç´ éƒ½å°†ä½¿ç”¨æ–°ä½ç½®è¿›è¡Œæ›´æ–°ï¼Œå¹¶ä¸”ä¸ä¼šæ·»åŠ æˆ–åˆ é™¤ä»»ä½•å…ƒç´ ã€‚</p>
<p><code>thinking with join</code>ç”¨è¿æ¥æ¥æ€è€ƒæ„å‘³ç€ä½ çš„ä»£ç æ›´å…·å£°æ˜æ€§ï¼šä½ å¤„ç†è¿™ä¸‰ä¸ªçŠ¶æ€æ²¡æœ‰ä»»ä½•åˆ†æ”¯ï¼ˆifï¼‰æˆ–è¿­ä»£ï¼ˆforï¼‰ã€‚è€Œæ˜¯æè¿°å…ƒç´ åº”å¦‚ä½•å¯¹åº”æ•°æ®ã€‚å¦‚æœç»™å®šçš„<code>enter</code>ï¼Œ<code>update</code>æˆ–<code>exit selection</code>æ°å¥½æ˜¯ç©ºçš„ï¼Œåˆ™ç›¸åº”çš„ä»£ç æ˜¯æ— æ“ä½œ</p>
<p>è¿æ¥è¿˜å…è®¸å°†æ“ä½œå®šå‘åˆ°ç‰¹å®šçŠ¶æ€ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨enterè€Œä¸æ˜¯updateä¸Šè®¾ç½®å¸¸é‡å±æ€§ï¼ˆä¾‹å¦‚ç”±â€œrâ€å±æ€§å®šä¹‰çš„åœ†çš„åŠå¾„ï¼‰ã€‚é€šè¿‡é‡æ–°é€‰æ‹©å…ƒç´ å’Œæœ€å°åŒ–DOMæ›´æ”¹ï¼Œæ‚¨å¤§å¤§æé«˜äº†æ¸²æŸ“æ€§èƒ½ï¼åŒæ ·ï¼Œæ‚¨å¯ä»¥å°†åŠ¨ç”»è¿‡æ¸¡æŒ‡å®šä¸ºç‰¹å®šçŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œåœ¨enteringçŠ¶æ€ï¼ŒåŠ å…¥åŠ¨ç”»<a href="https://jsbin.com/vubibuvaqo/1/edit?html,output" target="_blank" rel="external">åœ†åœˆå±•å¼€</a></p>
<p>å¤§è‡´ç¿»è¯‘è‡ªï¼š<a href="https://bost.ocks.org/mike/join/" target="_blank" rel="external">thinking with join</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸‹é¢è¿™æ®µä»£ç æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ï¼Œä¸ºæ¯ä¸ªæ•°æ®ç”Ÿæˆä¸€ä¸ªcircleï¼Œè°ƒç”¨æ•°æ®é‡Œçš„xï¼Œyæ¥å®šä½ã€‚ä½†æ˜¯æˆ‘ä»¬selectAllçš„å…ƒç´ ï¼Œæ­¤æ—¶å¹¶ä¸å­˜åœ¨ï¼Œé‚£d3æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;svg.selectAll(â€œcircleâ€)&lt;br&gt;  .data(dat
    
    </summary>
    
    
      <category term="d3" scheme="https://misssweety.github.io/tags/d3/"/>
    
      <category term="translate" scheme="https://misssweety.github.io/tags/translate/"/>
    
  </entry>
  
  <entry>
    <title>åšå®¢æ­å»º</title>
    <link href="https://misssweety.github.io/2016/10/27/blog-publish/"/>
    <id>https://misssweety.github.io/2016/10/27/blog-publish/</id>
    <published>2016-10-27T04:00:00.000Z</published>
    <updated>2017-04-26T04:23:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>é€‚ç”¨äºmacOS</p>
<p>###1.éœ€è¦å®‰è£…gitï¼Œnpmï¼Œnode<br>å‡çº§æœ¬åœ°npm</p>
<pre><code>npm install npm@latest -g
å¦‚æœæœ‰æƒé™é—®é¢˜ï¼Œå‰é¢åŠ ä¸Šsudoå°±å¯ä»¥äº†
</code></pre><p>###2.å®‰è£…hexo</p>
<pre><code>sudo npm install -g hexo
å…¨å±€å®‰è£…äº†
</code></pre><p>###3.hexoç®¡ç†ä¸€ä¸ªç½‘ç«™</p>
<pre><code>hexo init blog
åå­—éšè‡ªå·±å–œæ¬¢ï¼Œè¿™é‡Œèµ·çš„äº‹blog
</code></pre><p>###4.è¿›å…¥è¯¥æ–‡ä»¶ï¼Œè¿›è¡Œç®¡ç†</p>
<pre><code>cd blog
hexo server //å¯åŠ¨ä½ çš„æœ¬åœ°ç½‘ç«™ï¼Œè®¿é—®localhost:4000ï¼Œå°±å¯ä»¥çœ‹åˆ°é›å½¢äº†
hexo new &quot;hello world&quot; //ç”Ÿæˆä¸€ä¸ªhello world.mdæ–‡ä»¶ï¼Œæ–°æ–°æ–‡ç« ï¼Œæ·»åŠ åˆ°ç½‘ç«™ä¸­
</code></pre><p>###5.éƒ¨ç½²åˆ°githubä¸Š</p>
<p>####gitä¸Šå»ºç«‹ä»“åº“<br>å…ˆåœ¨è‡ªå·±çš„åº“é‡Œåˆ›å»ºä¸€ä¸ªæ–°çš„repo,ä½œä¸ºç½‘ç«™çš„è¿œç«¯åº“ï¼Œä¸€èˆ¬å‘½åä¸ºè‡ªå·±çš„è´¦å·åï¼Œä¾‹å¦‚ï¼š</p>
<p>  æˆ‘çš„è´¦å·<font color="purple"><code>missSweety</code></font>ï¼Œæ–°å»ºçš„repoä¸º<font color="purple"><code>missSweety.github.io</code></font></p>
<p>####ä¿®æ”¹hexoé…ç½®æ–‡ä»¶<br>å›åˆ°hexoä¸­ï¼Œä¸ºäº†éƒ¨ç½²åˆ°githubä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹<font color="purple"><code>_config.yml</code></font>æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<pre><code>deploy:
  type: git
  repository: https://github.com/MissSweety/MissSweety.github.io.git
  branch: master
</code></pre><p>####å®‰è£…hexo deployer git<br>    npm install hexo-deployer-git â€“save<br>å¦‚æœä¸å®‰è£…è¿™ä¸ªï¼Œdeployçš„æ—¶å€™ä¼šæŠ¥é”™çš„</p>
<p>####hexo deploy<br>    hexo deploy<br>å¦‚æœæ²¡é…è¿‡sshï¼Œè¿˜æ˜¯ä¼šæŠ¥é”™çš„<br>è§£å†³æ–¹æ³•ï¼š</p>
<pre><code>ssh-keygen -t rsa -b 4096 -C â€˜emailâ€™
</code></pre><p>æŒ‰ç…§æç¤ºï¼Œè¾“å…¥è´¦å·ï¼Œå¯†ç ï¼Œå°±ä¼šç”Ÿæˆæ–‡ä»¶äº†<br>å›åˆ°githubç½‘ç«™ï¼Œåœ¨settingä¸­æŠŠå…¬é’¥æ”¾è¿›å»  </p>
<pre><code>ssh -T git@github.com
</code></pre><p>ç”¨è¯¥æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹æ˜¯å¦å·²ç»é‰´æƒäº†</p>
<font color="lightblue">å¦‚æœä»¥ä¸Šéƒ½å¥½äº†ï¼Œè¿™æ¬¡åœ¨ç”¨hexo deploy,å°±ä¼šè‡ªåŠ¨pushä»£ç ï¼Œå¹¶å‘å¸ƒäº†ï¼Œå¯ä»¥æŸ¥çœ‹ä½ çš„ç½‘ç«™äº†</font>

<p>###å¤§åŠŸå‘Šæˆ!!!</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€‚ç”¨äºmacOS&lt;/p&gt;
&lt;p&gt;###1.éœ€è¦å®‰è£…gitï¼Œnpmï¼Œnode&lt;br&gt;å‡çº§æœ¬åœ°npm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install npm@latest -g
å¦‚æœæœ‰æƒé™é—®é¢˜ï¼Œå‰é¢åŠ ä¸Šsudoå°±å¯ä»¥äº†
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;###2.å®‰è£…hex
    
    </summary>
    
    
      <category term="hexo" scheme="https://misssweety.github.io/tags/hexo/"/>
    
  </entry>
  
</feed>
