[{"title":"html5-å°æ’ä»¶","date":"2017-09-21T02:56:33.000Z","path":"2017/09/21/html5-å°æ’ä»¶/","text":"æœ‰äº›æ—¶å€™ä¼šé‡åˆ°ä¸Šä¼ æ–‡ä»¶å’Œä¸‹è½½çš„éœ€æ±‚ï¼Œä¸€èˆ¬åŸç”Ÿhtmlæ ·å¼å¹¶ä¸èƒ½æ»¡è¶³è¦æ±‚ã€‚æ‰€ä»¥æ€»ç»“äº†ä¸€ä¸‹å¹³æ—¶å¸¸ç”¨çš„å›¾ç‰‡ä¸Šä¼ ï¼Œé—®ä»·ä¸Šä¼ ä¸‹è½½ç­‰ç®€å•çš„å°éœ€æ±‚çš„å®ç°ã€‚ åŒ…å«å›¾ç‰‡ä¸Šä¼ ï¼Œé™åˆ¶å›¾ç‰‡çš„å¤§å°ã€‚æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ï¼ˆä¸ç”¨form æ ‡ç­¾ï¼‰ä¹‹å‰åšåœ°å›¾éœ€æ±‚çš„ï¼Œå­—ç¬¦é¢œè‰²è½¬rgbçš„ç®€å•è½¬åŒ–ã€‚ å¤§éƒ¨åˆ†çš„ç»„ä»¶æ¸²æŸ“æ˜¯åŸºäºreactï¼Œæ‰€ä»¥å†™æ³•éƒ½æ˜¯reactç›¸å…³çš„ã€‚ ä¸Šä¼ å›¾ç‰‡åŠæ£€æŸ¥å¤§å°æœ¬ç¤ºä¾‹æ˜¯é™åˆ¶äº†ä¸Šä¼ å›¾ç‰‡çš„å¤§å°ï¼ŒmaxWidth: 600, maxHeight: 300, maxSize: 200, ä¸Šä¼ å‰å‰ç«¯å…ˆåšæ£€æŸ¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081import React, &#123; Component, PropTypes &#125; from 'react';import imageStyles from '../styles/image.css';import &#123; imageSizeCheck, newImageSrc &#125; from '../utils/imgCheck.js';/** * Image ç»„ä»¶ï¼Œæ”¯æŒä¸Šä¼ å›¾ç‰‡ * * @props onImageChange ä¼ å›ä¸Šä¼ çš„å›¾ç‰‡çš„åœ°å€ * @props onError ä¸Šä¼ å¤±è´¥çš„å¤„ç† */class Image extends Component &#123; constructor() &#123; super(...arguments); // ç”¨äºè‡ªåŠ¨è®¾ç½®å›¾ç‰‡é«˜åº¦ this.state = &#123; imageHeight: 180, &#125;; &#125; componentDidMount() &#123; if (typeof window === 'undefined') return; const imageHeight = this.refs.imageContainer.offsetWidth * 0.618; this.setState(&#123; imageHeight &#125;); &#125; handleClick() &#123; // æ¨¡æ‹Ÿç‚¹å‡»ä¸Šä¼ å›¾ç‰‡æŒ‰é’® this.refs.file.click(); &#125; handleChange() &#123; const formData = new FormData(); formData.append('file', this.refs.file.files[0]); // æ£€éªŒå›¾ç‰‡å¤§å° this.imageCheck(this.props.subtype, this.refs.file.files[0], (err, res) =&gt; &#123; if (err) &#123; const msg = `è¯·é€‰æ‹©$&#123;res.maxWidth&#125;*$&#123;res.maxHeight&#125;åƒç´ ä¸”å¤§å°ä¸è¶…è¿‡$&#123;res.maxSize&#125;kçš„å›¾ç‰‡ä¸Šä¼ `; window.alert(`æ‚¨çš„å›¾ç‰‡ä¸º$&#123;res.height&#125;*$&#123;res.width&#125;åƒç´ ,å¤§å°ä¸º$&#123;res.size&#125;k. $&#123;msg&#125;`); &#125; else &#123; // æˆåŠŸçš„æ“ä½œ &#125; &#125;); &#125; imageCheck(subtype, file, cb) &#123; // å¯ä¿®æ”¹å›¾ç‰‡æ£€æŸ¥çš„å¤§å°å’Œå°ºå¯¸ã€‚ const sixthree = &#123; imgFile: file, maxWidth: 600, maxHeight: 300, maxSize: 200, &#125;; imageSizeCheck(sixthree, (err, res) =&gt; &#123; if (err) &#123; return cb(err, res); &#125; imageSizeCheck(&#123; imgFile: file, maxWidth: 700, maxHeight: 350, maxSize: 200, &#125;, cb); &#125;); &#125; render() &#123; return ( &lt;div ref=\"imageContainer\" className=&#123;imageStyles.imageContainer&#125;&gt; &lt;div className=&#123;imageStyles.imageUpload&#125; onClick=&#123;this.handleClick.bind(this)&#125; style=&#123;&#123; height: this.state.imageHeight, lineHeight: this.state.imageHeight + 'px', &#125;&#125; &gt;ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡ &lt;/div&gt; &lt;input ref=\"file\" className=&#123;imageStyles.inputFile&#125; onChange=&#123;this.handleChange.bind(this)&#125; type=\"file\" accept=\"image/*\"/&gt; &lt;/div&gt; ); &#125;&#125;export default Image; 123456789101112131415161718192021222324252627282930image.css.imageContainer &#123; position: relative; overflow: hidden;&#125;.imageContainerHasImg .imageUpload &#123; opacity: 0;&#125;.imageUpload &#123; opacity: 0.5; background: #999; position: absolute; top: 0; left: 0; width: 100%; color: white; text-align: center; font-size: 2em; cursor: pointer; transition: opacity 0.3s;&#125;.imageUpload:hover &#123; opacity: 0.6;&#125;input[type=\"file\"].inputFile &#123; display: none;&#125;.img &#123; width: 100%;&#125; 123456789101112131415161718192021222324252627imageCheck.jsexport function imageSizeCheck(&#123; imgFile, maxWidth, maxHeight, maxSize &#125;, cb) &#123; const res = &#123; maxWidth, maxHeight, maxSize, &#125;; const size = Math.floor(imgFile.size / 1024); const reader = new FileReader(); reader.onload = (e) =&gt; &#123; const data = e.target.result; const tempImg = document.createElement('img'); tempImg.onload = () =&gt; &#123; res.width = tempImg.width; res.height = tempImg.height; res.size = size; if (res.width &gt; maxWidth || res.height &gt; maxHeight || res.size &gt; maxSize) &#123; cb(new Error('ä¸Šä¼ å¤±è´¥'), res); &#125; else &#123; cb(null, null); &#125; &#125;; tempImg.src = data; &#125;; reader.readAsDataURL(imgFile);&#125; æ–‡ä»¶ä¸Šä¼ æ–‡ä»¶ä¸Šä¼ æœ‰é»˜è®¤çš„æ ·å¼ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸æ»¡è¶³çš„ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸‹æ–¹å¼ä¿®æ”¹ã€‚åé¢çš„spanç”¨äºå±•ç¤ºæ–‡ä»¶å†…å®¹ã€‚ 12345&lt;div className=\"monitor-clickUploader\"&gt; &lt;span className=\"monitor-upload-btn\"&gt; + ä¸Šä¼ å•†æˆ·id&lt;/span&gt; &lt;input type=\"file\" name=\"file\" ref=&#123;input =&gt; &#123; this.upload = input; &#125; &#125; onChange=&#123;() =&gt; this.handleFileChanged()&#125;/&gt; &lt;/div&gt; &lt;span&gt;&#123;this.state.fileName&#125;&lt;/span&gt; 1234567891011121314151617181920212223242526272829.monitor-clickUploader &#123; position: relative; overflow: hidden; display: inline-block; margin: 0px 10px 0px 20px; vertical-align: middle;&#125;.monitor-clickUploader input &#123; position: absolute; top: 0; left: 0; margin: 0; padding: 0; font-size: 20px; cursor: pointer; opacity: 0; filter: alpha(opacity=0);&#125;.monitor-upload-btn &#123; display: inline-block; border: 1px solid #3bb4f1; position: relative; color: #3bb4f1; padding: 4px 10px 4px 10px; font-size: 12px; border-radius: 3px; cursor: pointer;&#125; 1234567handleFileChanged() &#123; const fileList = this.upload.files; if (fileList.length &gt; 0) &#123; this.setState(&#123; fileName: fileList[0].name&#125;); &#125;&#125; å±•ç¤ºæ ·å¼ï¼š æ–‡ä»¶ä¸Šä¼ æäº¤ä¸Šä¼ æ–‡ä»¶éœ€è¦formdataæ ¼å¼ï¼Œä½†æ˜¯ä¸ç”¨è‡ªå·±æ˜¾å¼çš„å†™æ˜content-type,æœ‰æ—¶ä¼šå‡ºé—®é¢˜ã€‚ä¸éœ€è¦å†™formï¼Œå¯ä»¥è¿™æ ·å†™ã€‚ æ–‡ä»¶ä¸Šä¼ çš„htmlåŒä¸Šã€‚è§¦å‘ä¸Šä¼ ï¼š 1234567&lt;button style=&#123;&#123; marginLeft: 70, marginTop: 20 &#125;&#125; type=\"button\" className=\"btn Btn\" disabled=&#123;startDate === \"\" || endDate === \"\" || poiResultList.length &lt;=0 || monitorIndexList.length &lt;= 0&#125; onClick=&#123;() =&gt; this.handleFileUpload()&#125;&gt;å¼€å§‹ç›‘æ§&lt;/button&gt; 1234567891011handleFileUpload() &#123; const formData = new FormData(); const fileList = this.upload.files; if (fileList.length &gt; 0) &#123; formData.append('uploadFile', fileList[0]); this.props.postMonitor(&#123; formData &#125; ) &#125; &#125; //postMonitoré‡Œå‘é€formdataæ–‡ä»¶ã€‚xhrå°±è¡Œã€‚ å‰ç«¯å®ç°ä¸‹è½½åŠŸèƒ½2è¿›åˆ¶æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334// renderéƒ¨åˆ†ï¼š&lt;div style=&#123;&#123; display: canDownload ? 'inline-block' : 'none' &#125;&#125; className=&#123;listcss.download&#125; onClick=&#123;this.handleDownload&#125;&gt;å¯¼å‡ºæ•°æ®&lt;/div&gt; // å¤„ç†ï¼šhandleDownload() &#123; const &#123; download &#125; = this.props; if (download &amp;&amp; download.length &gt; 0) &#123; const u8arr = new Uint8Array(download.length); let length = download.length; while (length--) &#123; u8arr[length] = download[length]; &#125; const blob = new Blob([u8arr.buffer], &#123; type: 'application/vnd.ms-excel' &#125;); const fileName = 'orderData.xls'; downBinaryToExcel(blob, fileName); &#125; &#125; export const downBinaryToExcel = (blob, fileName) =&gt; &#123; if (window.navigator.msSaveOrOpenBlob) &#123; navigator.msSaveBlob(blob, fileName); &#125; else &#123; const link = document.createElement('a'); link.href = window.URL.createObjectURL(blob); link.download = fileName; link.click(); window.URL.revokeObjectURL(link.href); &#125;&#125;; æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²å†…å®¹ä¸‹è½½ä¸»è¦æ˜¯æ‹¼æ¥æˆexceléœ€è¦çš„æ ¼å¼, ç„¶åæ”¾åœ¨blobçš„å†…å®¹é‡Œã€‚ 1234567891011121314151617181920212223242526272829const headerInfo = `&lt;?xml version=\"1.0\"?&gt;&lt;ss:Workbook xmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\"&gt;&lt;ss:Worksheet ss:Name=\"Sheet1\"&gt;&lt;ss:Table&gt;\\n`;const footerInfo = `&lt;/ss:Table&gt;&lt;/ss:Worksheet&gt;&lt;/ss:Workbook&gt;`;// è‡ªå·±ç»„ç»‡æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ä¸€è¡Œè¡¨å¤´ï¼Œå’Œæ¯è¡Œçš„æ•°æ®ã€‚const composeRow = R.compose( item =&gt; `&lt;ss:Row&gt;\\n$&#123;item&#125;&lt;/ss:Row&gt;\\n`, R.join(''), R.map( item =&gt; ` &lt;ss:Cell&gt; &lt;ss:Data ss:Type=\"$&#123;R.is(Number, item) ? 'Number' : 'String'&#125;\"&gt;$&#123;item&#125;&lt;/ss:Data&gt; &lt;/ss:Cell&gt;` ));const rows = FUNCï¼ˆcomposeRowï¼‰// å…·ä½“çš„è‡ªå·±å†™å§const xml = `$&#123;headerInfo&#125;$&#123;rows&#125;$&#123;footerInfo&#125;`; HEX TO RGB12345678910export const hexToRgb = hex =&gt; &#123; const rgb = []; let letters = hex.substr(1); if (letters.length === 3) &#123; letters = letters.replace(/(.)/g, '$1$1'); &#125; letters.replace(/../g, color =&gt; &#123; rgb.push(parseInt(color, 0x10)); &#125;); return rgb;&#125;;","tags":[{"name":"html5","slug":"html5","permalink":"https://misssweety.github.io/tags/html5/"},{"name":"å›¾ç‰‡ä¸Šä¼ ","slug":"å›¾ç‰‡ä¸Šä¼ ","permalink":"https://misssweety.github.io/tags/å›¾ç‰‡ä¸Šä¼ /"},{"name":"æ–‡ä»¶ä¸Šä¼ ","slug":"æ–‡ä»¶ä¸Šä¼ ","permalink":"https://misssweety.github.io/tags/æ–‡ä»¶ä¸Šä¼ /"},{"name":"æ–‡ä»¶ä¸‹è½½","slug":"æ–‡ä»¶ä¸‹è½½","permalink":"https://misssweety.github.io/tags/æ–‡ä»¶ä¸‹è½½/"}]},{"title":"D3-api-transition","date":"2017-09-18T08:45:41.000Z","path":"2017/09/18/D3-api-transition/","text":"D3çš„åŠ¨æ•ˆAPI-transitionD3çš„åŠ¨æ•ˆéƒ½æ˜¯é€šè¿‡transitionæ¥å®ç°çš„ã€‚ transition æ˜¯ç±»ä¼¼äºselectionçš„æ¥å£ï¼Œå®ƒç”¨äºåŠ¨ç”»æ”¹å˜DOMç•Œé¢ã€‚transition é€šè¿‡ selection.transition è·å¾—ï¼Œä»–å’Œd3.select(â€¦)è¿”å›çš„å†…å®¹æ˜¯ä¸€æ ·çš„ã€‚ å¸¸ç”¨apiåŸºæœ¬apiï¼š selection.transition([name])selection.interrupt([name])transition.duration()transition.delay(value|func)transition.ease(name)transition.each()transition.call()transition.filter()transition.merge()transition.remove() é«˜çº§ï¼š transition.on ç›‘æ§æ§åˆ¶æµï¼Œå‡ ä¸ªçŠ¶æ€ï¼šstartï¼Œendï¼Œinterruptã€‚è¿™ä¸ªåªæ˜¯transitionå¯¹è±¡æœ‰ã€‚ transition.attrTweentransition.styleTweentransition.tween(name[, value]) æœ€ç®€å•ä¾‹å­åœ¨éœ€è¦å˜åŒ–çš„å±æ€§å‰åŠ ä¸Štransition()å³å¯~~ä¾‹å­ï¼š 12345678910111213svg.selectAll(\"rect\") .data(dataset) .transition() // &lt;-- This is new! Everything else here is unchanged. .attr(\"y\", function(d) &#123; return h - yScale(d); &#125;) .attr(\"height\", function(d) &#123; return yScale(d); &#125;) .attr(\"fill\", function(d) &#123; return \"rgb(0, 0, \" + (d * 10) + \")\"; &#125;); å¦‚æœä¸åŠ ï¼Œåˆ™ç«‹å³æ‰§è¡Œï¼ŒåŠ äº†åˆ™å»¶è¿Ÿä¸€ç‚¹ç‚¹ã€‚é»˜è®¤ï¼š250ms å¸¸ç”¨çš„transitionå†™æ³•123456.transition() .delay(function(d,i)&#123; return i * 150; &#125;) .duration(1500) .ease(d3.easeBack) æ¯ä¸ªå…ƒç´ éƒ½ä¼šæœ‰è‡ªå·±çš„delayã€‚ ease å‡½æ•°&quot;easeElastic&quot;, &quot;easeBounce&quot;, &quot;easeLinear&quot;, &quot;easeSin&quot;, &quot;easeQuad&quot;, &quot;easeCubic&quot;, &quot;easePoly&quot;, &quot;easeCircle&quot;, &quot;easeExp&quot;, &quot;easeBack&quot; è°ƒç”¨ï¼š1selection.ease(d3.easeElastic) é“¾å¼è°ƒç”¨è¿ç»­æ·»åŠ å¤šä¸ªtransition,æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€ï¼Œå°±æ˜¯åœ¨ç¬¬ä¸€ä¸ªtransitionå®Œæˆåï¼Œç»§ç»­è°ƒç”¨transitionã€‚å‚è€ƒä¾‹å­ï¼šhttps://codepen.io/akixiao/pen/BwNZRp d3.active(node, [name])è¿”å›å…·æœ‰æŒ‡å®šåç§°ï¼ˆå¦‚æœæœ‰ï¼‰çš„æŒ‡å®šèŠ‚ç‚¹ä¸Šçš„active transitionã€‚å¦‚æœæœªæŒ‡å®šåç§°ï¼Œåˆ™ä½¿ç”¨nullã€‚å¦‚æœæŒ‡å®šèŠ‚ç‚¹ä¸Šæ²¡æœ‰è¿™æ ·çš„active transitionï¼Œåˆ™è¿”å›nullã€‚æ­¤æ–¹æ³•å¯¹äºåˆ›å»ºé“¾æ¥transitionå¾ˆæœ‰ç”¨ã€‚ tween è¡¥é—´åŠ¨ç”»transitionçš„å˜åŒ–è¯¦æƒ…ï¼Œæ˜¯é€šè¿‡interpolateå®ç°çš„ã€‚é»˜è®¤æœ‰å‡ ä¸ªæƒ…å†µï¼šå¦‚æœatträ¸­çš„valueæ˜¯æ•°å­—ï¼Œåˆ™ä½¿ç”¨interpolateNumberå¦‚æœvalueæ˜¯coloræˆ–è€…å­—ç¬¦é¢œè‰²ï¼Œåˆ™ä½¿ç”¨ interpolateRgb.å…¶ä»–æƒ…å†µï¼šinterpolateString styleçš„å±æ€§ä¹Ÿæ˜¯ä¸€æ ·çš„tweenæœ‰è‡ªå·±çš„æ—¶é—´å‡½æ•°tweenç›¸å…³å‡½æ•°ä½¿ç”¨é‡ç‚¹å°±æ˜¯åœ¨ï¼Œtweenå‡½æ•°ä¸­è®¾ç½®è‡ªå·±çš„æ—¶é—´å‡½æ•°ï¼š 123456transition.tween(\"attr.fill\", function() &#123; var node = this, i = d3.interpolateRgb(node.getAttribute(\"fill\"), \"blue\"); return function(t) &#123; node.setAttribute(\"fill\", i(t)); &#125;;&#125;); å¦ä¸€ä¸ªæ•°å­—è¡¥é—´åº”ç”¨ï¼š 12345678.tween('number', function() &#123; const that = d3.select(this); const i = d3.interpolateRound(0, 200); return function(t) &#123; that.style('color', `rgb($&#123;0 + i(t)&#125;, $&#123;80 + i(t)&#125;, 232)`); that.text(i(t)); &#125;&#125;); æ¼”ç¤ºï¼šhttps://codepen.io/akixiao/pen/mBJqzO å¾ªç¯å˜æ¢ä¸€èˆ¬é€šè¿‡æ˜¯å°†transitionå†™æˆä¸€ä¸ªå‡½æ•°ã€‚ç„¶åä½¿ç”¨onç›‘å¬endäº‹ä»¶ï¼Œå®ç°é€’å½’è°ƒç”¨ã€‚ç®€å•ä¾‹å­ï¼š 1234567891011121314function repeat() &#123; show.transition() .delay(800) .duration(2000) .tween('number', function() &#123; const that = d3.select(this); const i = d3.interpolateRound(0, 200); return function(t) &#123; that.style('color', `rgb($&#123;0 + i(t)&#125;, $&#123;80 + i(t)&#125;, 232)`); that.text(i(t)); &#125; &#125;) .on('end', repeat); &#125; ä¸€äº›ä¾‹å­d3å®ç°çš„smooth scrollé«˜çº§ç©æ³•ï¼šhttps://bl.ocks.org/mbostock/70d5541b547cc222aa02 å‚è€ƒ d3 transitionworking with transitionsD3 Tips and Tricks V4.0D3 Transition Basics","tags":[{"name":"d3","slug":"d3","permalink":"https://misssweety.github.io/tags/d3/"},{"name":"transition","slug":"transition","permalink":"https://misssweety.github.io/tags/transition/"}]},{"title":"å…³äºObjectæŸ¥ç¼ºè¡¥æ¼","date":"2017-09-18T08:09:48.000Z","path":"2017/09/18/å…³äºObjectæŸ¥ç¼ºè¡¥æ¼/","text":"å†…ç½®å¯¹è±¡è¿™äº›éƒ½æ˜¯å¯¹è±¡å­ç±»å‹ï¼Œçœ‹èµ·æ¥ä¸åŸºç¡€ç±»å‹ä¸€æ ·ã€‚å¦‚ä¸‹ï¼š String Number Boolean Object Function Array Date RegExp Error ä»¥ä¸Šå†…ç½®å‡½æ•°å¯ä»¥å½“åšæ„é€ å‡½æ•°æ¥ä½¿ç”¨ã€‚ä¸€äº›å­—é¢å¯ä»¥è‡ªåŠ¨è½¬æ¢æˆå¯¹è±¡ç±»å‹è¿›è¡Œä¸€äº›æ–¹æ³•çš„æ“ä½œã€‚ æ·±å¤åˆ¶ &amp; æµ…å¤åˆ¶å¯¹äºå¯¹è±¡å’Œæ•°ç»„æ¥è¯´ï¼Œæµ…å¤åˆ¶æ˜¯å¯¹å¯¹è±¡åœ°å€çš„å¤åˆ¶ï¼Œå¹¶æ²¡æœ‰å¼€è¾Ÿæ–°çš„æ ˆï¼Œå¤åˆ¶çš„ç»“æœæ˜¯ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¼šæ”¹å˜å¦ä¸€ä¸ªå¯¹è±¡å±æ€§ã€‚æ·±å¤åˆ¶åˆ™å¼€è¾Ÿæ–°çš„æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡å¯¹åº”ä¸¤ä¸ªä¸åŒçš„åœ°å€ï¼Œå±æ€§éš”ç¦»ã€‚ æµ…å¤åˆ¶ï¼šæ‹·è´å¼•ç”¨æ·±å¤åˆ¶ï¼šæ‹·è´å®ä¾‹æ·±å¤åˆ¶æ¯”è¾ƒè€—å†…å­˜ï¼Œè€Œä¸”å¯èƒ½å‡ºç°æ­»å¾ªç¯æ ˆæº¢å‡ºçš„æƒ…å†µã€‚æ·±å¤åˆ¶æ­»å¾ªç¯çš„ä¾‹å­ï¼š const testArr = [];const myObj = { a: 2, b: testArr,}; testArr.push(myObj, true); æ¯”å¦‚æ·±å¤åˆ¶myObj, é™¤äº†å¤åˆ¶myObjå¤–ï¼Œè¿˜è¦å¤åˆ¶testArrï¼Œè€ŒtestArrå¼•ç”¨äº†myObj,æ‰€ä»¥åˆè¦å†æ¬¡å¤åˆ¶myObjï¼Œç„¶åè¿™ä¸¤ä¸ªå¼€å§‹å¾ªç¯å¼•ç”¨å¯¼è‡´æ­»å¾ªç¯äº†ã€‚ Object.assignæ˜¯es6é‡Œéå¸¸å¥½ç”¨çš„ä¸€ä¸ªæ–¹æ³•ï¼ŒObject.assign() å±æ€§æè¿°ç¬¦æ˜¯ä»es5ä»¥åï¼Œå¯¹è±¡å±æ€§æœ‰äº†å±æ€§æè¿°ç¬¦ã€‚ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ä¸ä»…åŒ…å«å±æ€§å€¼ï¼Œè¿˜åŒ…å«å¦å¤–ä¸‰ä¸ªç‰¹æ€§ï¼šwritableï¼Œenumerable å’Œ configurableä½¿ç”¨è¯¥å‡½æ•°ï¼Œå¯ä»¥è·å–ä¸€ä¸ªå¯¹è±¡å±æ€§çš„é…ç½®ä¿¡æ¯ã€‚Object.getOwnPropertyDescriptor( myObject, â€œaâ€ ); ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°ï¼Œå¯ä»¥é…ç½®å¯¹è±¡å±æ€§Object.defineProperty(obj, â€˜propâ€™, { value: 6, writable: true, configurable: true, enumerable: true,}); writable: æ§åˆ¶èƒ½å¦é‡å†™è¿™ä¸ªå±æ€§çš„å€¼enumerable: æ§åˆ¶è¿™ä¸ªå±æ€§èƒ½å¦è¢«éå†configurable: æ§åˆ¶è¿™ä¸ªå±æ€§çš„å±æ€§æè¿°ç¬¦æ˜¯å¦å¯ä»¥ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯æ§åˆ¶è¿™ä¸‰ä¸ªå±æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚configurable:false è¿˜ä¼šç¦æ­¢åˆ é™¤è¿™ä¸ªå±æ€§ æ§åˆ¶å±æ€§çš„ä¸å˜æ€§å½“æˆ‘ä»¬æƒ³æ§åˆ¶ä¸€äº›å¯¹è±¡çš„å±æ€§ï¼Œè®©ä»–æˆä¸ºä¸å¯æ”¹å˜çš„ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹å‡ ç§æ–¹æ³•ï¼š ç»“åˆwritable &amp; configurablewritable:falseconfigurable:false å¯¹åº”çš„å±æ€§å°†ä¸ä¼šè¢«æ›´æ”¹ã€‚ä¹Ÿä¸èƒ½è¢«åˆ é™¤ã€‚ ç¦æ­¢æ‰©å±•Object.preventExtensionså¯ä»¥ç¦æ­¢ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°å±æ€§ï¼Œå¹¶ä¸”ä¿ç•™å·²æœ‰å±æ€§ã€‚ 12345var obj = &#123; a: 2&#125;;Object.preventExtensions(obj);obj.b = 3;obj.b; // undefined // strict modeï¼štypeError seal å¯†å°Object.seal(..) ä¼šåˆ›å»ºä¸€ä¸ªâ€œå¯†å°â€çš„å¯¹è±¡ï¼Œç­‰ä»·äºpreventExtensions + æ¯ä¸ªå±æ€§configurable: false;ä½†æ˜¯å…¶å®è¿™ä¸ªæ˜¯å¯ä»¥ä¿®æ”¹å±æ€§å€¼çš„ã€‚ freeze å†»ç»“ç­‰ä»·äºå¯¹å¯¹è±¡ä½¿ç”¨sealï¼Œå¹¶æŠŠæ¯ä¸ªå±æ€§æ ‡è®°ä¸ºwritable:false; ä½†æ˜¯è¯¥å±æ€§å¯ä»¥ä¿®æ”¹æ·±åº¦çš„å¯¹è±¡ã€‚ å¯¹è±¡å±æ€§è·å–åŸç†å±æ€§è®¿é—®å…¶å®æ˜¯é€šè¿‡å¯¹è±¡çš„[[get]]è·å–çš„ã€‚å¯¹è±¡é»˜è®¤çš„å†…ç½® [[Get]] æ“ä½œé¦–å…ˆåœ¨å¯¹è±¡ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åç§°ç›¸åŒçš„å±æ€§ï¼Œ å¦‚æœæ‰¾åˆ°å°±ä¼šè¿”å›è¿™ä¸ªå±æ€§çš„å€¼ã€‚å¦‚æœæœ¬å¯¹è±¡ä¸­æ²¡æœ‰ï¼Œä¼šéå†åŸå‹é“¾è¿›è¡Œå¯»æ‰¾ã€‚å¦‚æœéƒ½æ²¡æœ‰åˆ™è¿”å›undefinedã€‚ åœ¨es6ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè¿™ä¸ªå†…ç½®æ“ä½œçš„ä¿®æ”¹äº†ã€‚æ¯”å¦‚Proxy ä»£ç†å¯¹è±¡ã€‚ å¯¹åº”çš„è¿˜æœ‰[[Put]]å†…ç½®æ“ä½œã€‚ä¸»è¦ç”¨æ¥è®¾ç½®å¯¹è±¡çš„å€¼ã€‚[[Put]] è¢«è§¦å‘æ—¶ï¼Œå®é™…çš„è¡Œä¸ºå–å†³äºè®¸å¤šå› ç´ ï¼ŒåŒ…æ‹¬å¯¹è±¡ä¸­æ˜¯å¦å·²ç»å­˜åœ¨è¿™ä¸ªå±æ€§(è¿™æ˜¯æœ€é‡è¦çš„å› ç´ ï¼Œæ²¡æœ‰åˆ™ä¼šå»æŸ¥åŸå‹é“¾)ã€‚å¦‚æœå·²ç»å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œ[[Put]] ç®—æ³•å¤§è‡´ä¼šæ£€æŸ¥ä¸‹é¢è¿™äº›å†…å®¹ã€‚ å±æ€§æ˜¯å¦æ˜¯è®¿é—®æè¿°ç¬¦?å¦‚æœæ˜¯å¹¶ä¸”å­˜åœ¨setterå°±è°ƒç”¨setterã€‚ å±æ€§çš„æ•°æ®æè¿°ç¬¦ä¸­writableæ˜¯å¦æ˜¯false?å¦‚æœæ˜¯ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹é™é»˜å¤±è´¥ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ›å‡º TypeError å¼‚å¸¸ã€‚ å¦‚æœéƒ½ä¸æ˜¯ï¼Œå°†è¯¥å€¼è®¾ç½®ä¸ºå±æ€§çš„å€¼ã€‚ getter &amp; setterå¯ä»¥åœ¨å¯¹è±¡çš„æŸä¸ªå±æ€§ä¸Šè¿›è¡Œä¿®æ”¹é»˜è®¤çš„getterä¸setterå‡½æ•°ã€‚ä½†æ˜¯ä¸€èˆ¬è¿™ä¸¤ä¸ªè¦ç»‘å®šåœ¨ä¸€èµ·è¾“å‡ºã€‚ä¸¤ä¸ªæ–¹æ³•ï¼š 123456789101112131415const obj = &#123; get c() &#123; return 1;&#125; &#125;;Object.definePropperty(obj, 'b', &#123; get: function() &#123; return 2;&#125;&#125;);obj.c // 1obj.b // 2 obj.b = 3;obj.b // 2// get set ç»å…¸æ­é…const myObj = &#123; get a() &#123; return this._a_; &#125; set a(val) &#123; this._a_ = val &#125;&#125; å±æ€§å­˜åœ¨æ€§æ£€éªŒä¸€ä¸ªå¯¹è±¡ä¸­æ˜¯å¦æœ‰æŸä¸ªå±æ€§ï¼Œå¯ä»¥ç”¨ in hasOwnProperty ã€‚å¯ä»¥ç”¨äºæ£€æµ‹æ˜¯å±æ€§å€¼ä¸ºundefinedï¼Œè¿˜æ˜¯ä¸ºå®šä¹‰å±æ€§ã€‚ä½†æ˜¯è¿™ä¸¤ä¸ªçš„åŒºåˆ«æ˜¯ï¼Œinæ˜¯å¯¹è±¡æœ¬èº«å’Œå…¶åŸå‹é“¾éƒ½æŸ¥ï¼Œåè€…åˆ™åªæŸ¥å¯¹è±¡æœ¬èº«ã€‚ å‚è€ƒçš„æ˜¯ã€Šä½ ä¸çŸ¥é“çš„javascriptã€‹","tags":[{"name":"javascript","slug":"javascript","permalink":"https://misssweety.github.io/tags/javascript/"},{"name":"object","slug":"object","permalink":"https://misssweety.github.io/tags/object/"}]},{"title":"Reactç”Ÿå‘½å‘¨æœŸ","date":"2017-09-12T11:07:41.000Z","path":"2017/09/12/Reactç”Ÿå‘½å‘¨æœŸ/","text":"reactç”Ÿå‘½å‘¨æœŸåœ¨è‡ªå®šä¹‰Reactç»„ä»¶æ—¶ï¼Œä¼šæ ¹æ®éœ€è¦åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µå®ç°ä¸åŒçš„é€»è¾‘ã€‚æœ¬æ–‡æºç æ˜¯ã€15.6.1ã€‘ ç”Ÿå‘½å‘¨æœŸè€Œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåœ¨ä¸åŒçŠ¶æ€ä¸‹çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š é¦–æ¬¡æŒ‚è½½ç»„ä»¶ getDefaultProps getInitialState componentWillMount render componentDidMount é‡æ–°æŒ‚è½½ç»„ä»¶ getInitialState componentWillMount render componentDidMount å†æ¬¡æ¸²æŸ“ç»„ä»¶-props CHANGE componentWillReceiveProps shouldComponentUpdate componentWillUpdate render componentDidUpdate å†æ¬¡æ¸²æŸ“ç»„ä»¶-state CHANGE shouldComponentUpdate componentWillUpdate render componentDidUpdate ä¸‹é¢å°±æ˜¯æ­ç§˜Reactä¸ºä½•ä¼šæŒ‰ç…§ä¸Šé¢è¿™ä¸ªæ‰§è¡Œç”Ÿå‘½å‘¨æœŸã€‚ ç”Ÿå‘½å‘¨æœŸè¯¦è§£è‡ªå®šä¹‰ç»„ä»¶å£°æ˜å‘¨æœŸå­˜åœ¨3ä¸ªé˜¶æ®µï¼šMOUNTING, RECEIVE_PROPS, UNMOUNTING åˆ†åˆ«å¯¹åº”3ç§æ–¹æ³•ã€‚ mountComponentï¼Œ updateComponent unmountComponent ä»¥ä¸Šæ¯ä¸ªéƒ½æä¾›äº†å‡ ç§å¤„ç†æ–¹æ³•ã€‚willå‰ç¼€çš„æ–¹æ³•åœ¨è¿›å…¥çŠ¶æ€ä¹‹å‰è°ƒç”¨ï¼Œdidåœ¨è¿›å…¥çŠ¶æ€ä¹‹åè°ƒç”¨ã€‚ ä½¿ç”¨createClassåˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶ES6ç¼–å†™Reactç»„ä»¶æ—¶ï¼š class MyComponent extends React.Component æ˜¯è°ƒç”¨createClassåˆ›å»ºç»„ä»¶ï¼Œåˆ©ç”¨åŸå‹ç»§æ‰¿ReactClassComponentçˆ¶ç±»ï¼Œåˆå¹¶mixinsï¼Œåˆå§‹åŒ–defaultPropsï¼Œè¿”å›æ„é€ å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä»£ç ã€‚ å…³äºcreateClassï¼šã€isomorphic/class/createClass.jsã€‘ &apos;use strict&apos;; var {Component} = require(&apos;ReactBaseClasses&apos;); var {isValidElement} = require(&apos;ReactElement&apos;); var ReactNoopUpdateQueue = require(&apos;ReactNoopUpdateQueue&apos;); var factory = require(&apos;create-react-class/factory&apos;); module.exports = factory(Component, isValidElement, ReactNoopUpdateQueue); factory: [react/addons/create-react-class/factory.js]; componentå¦‚ä¸Šï¼Œä½†æ˜¯createClasså®é™…ä¸Šå¯¼å‡ºçš„æ˜¯ç”±factory``åŒ…è£¹çš„å‡½æ•°ã€‚å„ç§ç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯åœ¨factoryé‡Œæ„é€ çš„ã€‚factoryé‡Œå®šä¹‰äº†ï¼ŒReactClassInterfaceï¼Œé‡Œé¢è§„å®šäº†å¥½å¤šåè®®ï¼ˆå¦‚renderç­‰ï¼‰ // Helper function to allow the creation of anonymous functions which do not // have .name set to the name of the variable being assigned to. function identity(fn) { return fn; } function factory(ReactComponent, isValidElement, ReactNoopUpdateQueue) { var injectedMixins = []; // å®šä¹‰reactclassä¸­çš„åè®®ï¼ˆå…¶å®å°±æ˜¯æ–¹æ³•ï¼‰ var ReactClassInterface = { mixins: &apos;DEFINE_MANY&apos;, statics: &apos;DEFINE_MANY&apos;, propTypes: &apos;DEFINE_MANY&apos;, contextTypes: &apos;DEFINE_MANY&apos;, childContextTypes: &apos;DEFINE_MANY&apos;, getDefaultProps: &apos;DEFINE_MANY_MERGED&apos;, getInitialState: &apos;DEFINE_MANY_MERGED&apos;, getChildContext: &apos;DEFINE_MANY_MERGED&apos;, render: &apos;DEFINE_ONCE&apos;, componentWillMount: &apos;DEFINE_MANY&apos;, componentDidMount: &apos;DEFINE_MANY&apos;, componentWillReceiveProps: &apos;DEFINE_MANY&apos;, shouldComponentUpdate: &apos;DEFINE_ONCE&apos;, componentWillUpdate: &apos;DEFINE_MANY&apos;, componentDidUpdate: &apos;DEFINE_MANY&apos;, componentWillUnmount: &apos;DEFINE_MANY&apos;, updateComponent: &apos;OVERRIDE_BASE&apos; }; var ReactClassComponent = function() {}; _assign( ReactClassComponent.prototype, ReactComponent.prototype, ReactClassMixin ); function createClass(spec) { // Constructor.name !== &apos;Constructor&apos;.ç¡®ä¿ä¸ä¼šå°†æ²¡æœ‰displayNameçš„ç±»è¯†åˆ«ä¸º&apos;Constructor&apos;ã€‚é‡å†™äº†contructorå‡½æ•°~~~~ var Constructor = identity(function(props, context, updater) { // è‡ªåŠ¨ç»‘å®š if (this.__reactAutoBindPairs.length) { bindAutoBindMethods(this); } this.props = props; this.context = context; this.refs = emptyObject; this.updater = updater || ReactNoopUpdateQueue; this.state = null; // reactClassesæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œé€šè¿‡getInitialStateï¼Œä¸componentWillMountæ¥è¿›è¡Œåˆå§‹åŒ–ã€‚ var initialState = this.getInitialState ? this.getInitialState() : null; // åŸå‹ç»§æ‰¿è‡ªçˆ¶ç±»ã€‚ Constructor.prototype = new ReactClassComponent(); Constructor.prototype.constructor = Constructor; Constructor.prototype.__reactAutoBindPairs = []; injectedMixins.forEach(mixSpecIntoComponent.bind(null, Constructor)); // æŠŠdidmountï¼Œwillunmountèµ‹ç»™åŸå‹ mixSpecIntoComponent(Constructor, IsMountedPreMixin); mixSpecIntoComponent(Constructor, spec); mixSpecIntoComponent(Constructor, IsMountedPostMixin); // Initialize the defaultProps property after all mixins have been merged. // æ‰€æœ‰mixinåˆå¹¶åï¼Œå¼€å§‹åˆå§‹åŒ–defaultProps if (Constructor.getDefaultProps) { Constructor.defaultProps = Constructor.getDefaultProps(); } // å‡å°‘æŸ¥æ‰¾å¹¶è®¾ç½®åŸå‹çš„æ—¶é—´ã€‚ for (var methodName in ReactClassInterface) { if (!Constructor.prototype[methodName]) { Constructor.prototype[methodName] = null; } } return Constructor; } return createClass; } ä»¥ä¸Šæ˜¯åˆå§‹åŒ–çš„é˜¶æ®µï¼Œç¬¬ä¸€æ¬¡mountingå‰ï¼ŒcreateClassè¿”å›Constructorå‡½æ•°ã€‚getDefaultProps æ˜¯åœ¨constructoré˜¶æ®µè°ƒç”¨çš„ï¼Œæ‰€ä»¥ç”Ÿæˆä¸€ä¸ªå®ä¾‹åï¼Œå°±ä¸ä¼šå†è°ƒç”¨äº†ã€‚æ‰€ä»¥åªæœ‰åˆæ¬¡æŒ‚è½½çš„æ—¶å€™æ‰ä¼šè°ƒç”¨ã€‚ã€‚ã€‚ mountComponenté˜¶æ®µmountComponentè´Ÿè´£ç®¡ç†ç”Ÿå‘½å‘¨æœŸçš„getInitialStateï¼ŒcomponentWillMountï¼Œrenderï¼Œå’ŒcomponentDidMount. mountComponentæŒ‚è½½ç»„ä»¶ï¼Œåˆå§‹åŒ–åºå·ï¼Œæ ‡è®°ç­‰å‚æ•°ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ— çŠ¶æ€ç»„ä»¶ï¼Œä»¥åŠåˆå§‹åŒ–æ“ä½œã€‚ä½¿ç”¨getInitialStateè·å–åˆå§‹åŒ–stateã€‚åœ¨componentWillMountä¸­è°ƒç”¨setStateï¼Œä¸è§¦å‘re-renderï¼Œè€Œæ˜¯merge stateã€‚è¿™ä¸ªçŠ¶æ€çš„this.stateå¹¶ä¸æ˜¯æœ€æ–°çš„ã€‚åœ¨renderä¸­æ‰å¯ä»¥è·å–æ›´æ–°çš„this.stateã€‚ [ä»£ç é‡Œ] // When mounting, calls to `setState` by `componentWillMount` will set // `this._pendingStateQueue` without triggering a re-render. if (this._pendingStateQueue) { inst.state = this._processPendingState(inst.props, inst.context); // merge state } åˆ©ç”¨ï¼šthis._pendingStateQueue , this._pendingReplaceState, this._pendingForceUpdate å®ç°setStateçš„å¼‚æ­¥è·Ÿæ–°æœºåˆ¶ã€‚ renderåï¼Œè‹¥å­˜åœ¨didMountï¼Œåˆ™è°ƒç”¨ã€‚ mountComponenté€šè¿‡é€’å½’æ¸²æŸ“çš„ï¼Œç”±äºæ˜¯é€’å½’ï¼Œè‚¯å®šæ˜¯çˆ¶çš„willMOUNT, çˆ¶çš„RENDER, å­çš„willMountï¼Œå­renderï¼Œå­didMountï¼Œçˆ¶didmountã€‚ mountComponent,åˆå§‹åŒ–stateï¼Œæ‰§è¡ŒinitialMountï¼Œè¿”å›markupã€‚ mountComponent: function( transaction, hostParent, hostContainerInfo, context, ){ ... var initialState = inst.state; if (initialState === undefined) { inst.state = initialState = null; } this._pendingStateQueue = null; this._pendingReplaceState = false; this._pendingForceUpdate = false; var markup; if (inst.unstable_handleError) { markup = this.performInitialMountWithErrorHandling( renderedElement, hostParent, hostContainerInfo, transaction, context, ); } else { markup = this.performInitialMount( renderedElement, hostParent, hostContainerInfo, transaction, context, ); } if (inst.componentDidMount) { if (__DEV__) { transaction.getReactMountReady().enqueue(() =&gt; { measureLifeCyclePerf( () =&gt; inst.componentDidMount(), this._debugID, &apos;componentDidMount&apos;, ); }); } else { transaction.getReactMountReady().enqueue(inst.componentDidMount, inst); } } return markup; } åœ¨performInitialMountå‡½æ•°ä¸­, ä½¿ç”¨ReactReconcilerï¼Œè¿›è¡Œé€’å½’æ¸²æŸ“ç»„ä»¶ã€‚ var markup = ReactReconciler.mountComponent( child, transaction, hostParent, hostContainerInfo, this._processChildContext(context), debugID, ); RECEIVEâ€”props updateçš„è¿‡ç¨‹æºç é‡Œé¢ï¼šupdateComponentè´Ÿè´£ç®¡ç†ç”Ÿå‘½å‘¨æœŸçš„ componentWillReceivePropsï¼ŒshouldComponentUpdate, componentWillUpdate, componentDidUpdate; é¦–å…ˆé€šè¿‡updateComponentæ›´æ–°ç»„ä»¶ï¼Œå¦‚æœå…ƒç´ ä¸ä¸€è‡´ï¼Œè¯´æ˜è¦è¿›è¡Œç»„ä»¶æ›´æ–°ã€‚ä»£ç ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå¦‚æœæœ‰componentWillReceivePropsæ‰§è¡Œï¼Œå…¶ä¸­æœ‰setStateä¼šåˆå¹¶stateï¼Œä¸”åœ¨componentWillReceivePropsï¼ŒshouldComponentUpdateï¼ŒcomponentWillUpdateä¸­ä¸ä¼šè·å–åˆ°æ–°çš„stateã€‚åªèƒ½åœ¨renderå’ŒdidçŠ¶æ€æ‰èƒ½è·å–ã€‚å‰©ä¸‹å‡ ä¸ªçŠ¶æ€ä¹Ÿæ˜¯æœ‰å°±æ‰§è¡Œï¼Œä¸”é¡ºåºä¸ºï¼šshouldComponentUpdatecomponentWillUpdaterendercomponentDidUpdate åœ¨updateComponentä¸­ updateComponent: function( transaction, prevParentElement, nextParentElement, prevUnmaskedContext, nextUnmaskedContext, ) { var inst = this._instance; â€¦ var willReceive = false; // åˆ¤æ–­contextå˜åŒ–ä¸å¦ï¼Œè®¾ç½®willReceiveã€‚ if (this._context === nextUnmaskedContext) { nextContext = inst.context; } else { nextContext = this._processContext(nextUnmaskedContext); willReceive = true; } var prevProps = prevParentElement.props; var nextProps = nextParentElement.props; // åˆ¤æ–­propså˜åŒ–ä¸å¦ï¼Œè®¾ç½®willReceiveã€‚ if (prevParentElement !== nextParentElement) { willReceive = true; } if (willReceive &amp;&amp; inst.componentWillReceiveProps) { ... åˆ¤æ–­å’Œæ‰§è¡ŒcomponentWillReceiveProps } var nextState = this._processPendingState(nextProps, nextContext); var shouldUpdate = true; ... ä¸‹é¢æ˜¯å…³äºshouldupdateçš„åˆ¤æ–­å’Œæ‰§è¡Œã€‚ shouldComponentUpdateï¼Œå¦‚æœç”¨æˆ·è‡ªå®šä¹‰äº†ï¼Œåˆ™æŒ‰ç…§è‡ªå®šä¹‰åˆ¤æ–­æ¥è¿”å›shouldUpdateï¼Œå¦åˆ™æ‰§è¡Œé»˜è®¤æ“ä½œï¼š if (!this._pendingForceUpdate) { if (inst.shouldComponentUpdate) { if (__DEV__) { shouldUpdate = measureLifeCyclePerf( () =&gt; inst.shouldComponentUpdate(nextProps, nextState, nextContext), this._debugID, &apos;shouldComponentUpdate&apos;, ); } else { shouldUpdate = inst.shouldComponentUpdate( nextProps, nextState, nextContext, ); } } else { if (this._compositeType === CompositeTypes.PureClass) { shouldUpdate = !shallowEqual(prevProps, nextProps) || !shallowEqual(inst.state, nextState); } } } åé¢renderè¦æ ¹æ®shouldUpdateçš„çŠ¶æ€æ¥æ‰§è¡Œã€‚ if (shouldUpdate) { this._pendingForceUpdate = false; // Will set `this.props`, `this.state` and `this.context`. this._performComponentUpdate( nextParentElement, nextProps, nextState, nextContext, transaction, nextUnmaskedContext, ); } else { // å¦‚æœç¡®å®šä¸æ›´æ–°ï¼Œä¹Ÿè¦è®¾ç½®propsï¼Œstateï¼Œcontext this._currentElement = nextParentElement; this._context = nextUnmaskedContext; inst.props = nextProps; inst.state = nextState; inst.context = nextContext; } å¦‚æœåº”è¯¥updateåˆ™è°ƒç”¨ä¸€ä¸‹å‡½æ•°this._performComponentUpdateè§„å®šäº†å¦‚æœæœ‰componentWillUpdateï¼Œè°ƒç”¨ã€‚ç„¶åæ˜¯_updateRenderedComponentï¼Œè¿›è¡Œre-renderï¼Œè°ƒåŠ¨renderæ–¹æ³•æ›´æ–°domæ¥ç€ï¼Œå¦‚æœæœ‰hasComponentDidUpdateï¼Œè°ƒç”¨ã€‚ _updateRenderedComponent: function(transaction, context) { // å¦‚æœéœ€è¦æ›´æ–°ï¼Œåˆ™è°ƒç”¨ReactReconciler.receiveComponentè·Ÿæ–°ç»„ä»¶ if (shouldUpdateReactComponent(prevRenderedElement, nextRenderedElement)) { ReactReconciler.receiveComponent( prevComponentInstance, nextRenderedElement, transaction, this._processChildContext(context), ); } else { // æ¸²æŸ“ç»„ä»¶ï¼Œrenderé€’å½’ var nextMarkup = ReactReconciler.mountComponent( child, transaction, this._hostParent, this._hostContainerInfo, this._processChildContext(context), debugID, ); } ä¹Ÿæ˜¯é€’å½’renderçš„ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯çˆ¶çš„å…ˆwillUpdateï¼Œç„¶åå­çš„willUpdate,å­çš„didUpdateï¼Œçˆ¶çš„DidUpdate unmountingè´Ÿè´£ç®¡ç†componentWillUnmount å¦‚æœè§„å®šäº†componentWillUnmountï¼Œåˆ™æ‰§è¡Œå¹¶é‡ç½®æ‰€æœ‰å‚æ•°ï¼Œæ›´æ–°é˜Ÿåˆ—ä»¥åŠçŠ¶æ€ã€‚æœ‰setStateï¼Œä¸ä¼šæ‰§è¡Œre-renderã€‚å¹¶æ¸…é™¤äº†å½“å‰çš„è¿™ä¸ªå®ä¾‹ã€‚ æ— çŠ¶æ€ç»„ä»¶åªæ˜¯ä¸€ä¸ªrenderæ–¹æ³•ï¼Œæ²¡æœ‰ç»„ä»¶å®ä¾‹åŒ–è¿‡ç¨‹ã€‚å› ä¸ºæ²¡æœ‰çŠ¶æ€ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ¥æ”¶propsç”Ÿæˆdomç»“æ„ã€‚","tags":[{"name":"react","slug":"react","permalink":"https://misssweety.github.io/tags/react/"},{"name":"ç”Ÿå‘½å‘¨æœŸ","slug":"ç”Ÿå‘½å‘¨æœŸ","permalink":"https://misssweety.github.io/tags/ç”Ÿå‘½å‘¨æœŸ/"}]},{"title":"d3-basic-line","date":"2017-06-29T04:19:49.000Z","path":"2017/06/29/d3-basic-line/","text":"d3-æŠ˜çº¿å›¾ä»ä¸€ä¸ªæœ€åŸºæœ¬çš„æŠ˜çº¿å›¾å¼€å§‹ï¼Œçœ‹çœ‹d3æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä»¥åŠç”¨åˆ°å“ªäº›çŸ¥è¯† éœ€è¦çš„çŸ¥è¯† scale extent transition line curve axis æ­¥éª¤ è·å–svgå®¹å™¨ &lt;svg width=&quot;500&quot; height=&quot;270&quot; class=&quot;testline&quot;&gt;&lt;/svg&gt; const svg = d3.select(&apos;.testline&apos;); const margin = {top: 20, right: 20, bottom: 20, left: 20}; const width = +svg.attr(&quot;width&quot;) - margin.left - margin.right; const height = +svg.attr(&quot;height&quot;) - margin.top - margin.bottom; const g = svg.append(&quot;g&quot;).attr(&quot;transform&quot;, `translate(${margin.left},${margin.top})`); xï¼Œyè½´ç¼©æ”¾è¿™é‡Œï¼Œå¦‚æœxè½´æ˜¯ä¸æ—¶é—´æœ‰å…³çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨d3æä¾›çš„scaleTime()æ¥å®ç°æ—¶é—´çš„è½¬æ¢ã€‚å…³äºscaleè¿˜æœ‰å¥½å¤šå†…å®¹ï¼Œå¾…æ€»ç»“ã€‚è¿™é‡Œéœ€è¦ç¡®å®šä¸¤ä¸ªè½´ï¼Œç¼©æ”¾çš„ç±»å‹ï¼Œä»¥åŠxyè½´å›¾åƒåœ¨å±å¹•ä¸­çš„å®é™…å®½é«˜å€¼ã€‚è¿™é‡Œçš„x, y å…¶å®æ˜¯å‡½æ•°ï¼ˆæ ¹æ®ç»™å‡ºçš„æ•°æ®ï¼Œå¾—å‡ºè¯¥æ•°æ®çš„xï¼Œyåæ ‡å€¼ï¼‰ã€‚ const x = d3.scaleTime().range([0, width]); const y = d3.scaleLinear().range([height, 0]); linelineçš„ç”Ÿæˆå°±éœ€è¦ä¸Šé¢çš„è½´ç¼©æ”¾å‡½æ•°ã€‚ è¿™é‡Œæ˜¯å› ä¸ºdateå‡½æ•°å¯ä»¥æ¥å—msçš„unixæ—¶é—´æˆ³ï¼Œæ‰€ä»¥ä¹˜ä»¥1000.è¿™é‡Œä¹Ÿå¯ä»¥åŠ ä¸€äº›ç‚¹ä¸ç‚¹ä¹‹é—´çš„è¿æ¥æ–¹å¼ã€‚ curveMonotoneXå¹³æ»‘, curveLinearçº¿æ€§ã€‚éœ€è¦ä¸¤æ­¥ï¼Œlineå‡½æ•°ç”Ÿæˆã€‚lineå‘ˆç°ã€‚å…³äºlineçš„å±•ç¤ºï¼Œéœ€è¦æŠŠæ•°æ®ç»‘å®šåˆ°pathæ ‡ç­¾ä¸Šï¼Œå°†lineå‡½æ•°è¿ç”¨åˆ°pathçš„då±æ€§ä¸Šã€‚å°±å¯ä»¥ç»˜åˆ¶å‡ºçº¿äº†ï¼Œtransitionè¿™é‡Œæ˜¯ä¸ºäº†å®ç°ç®€å•çš„åŠ¨ç”»æ•ˆæœã€‚æ³¨æ„ï¼Œlineå±•ç¤ºçš„æ—¶å€™ï¼Œdata([data]) ä¹Ÿå¯åº”ç”¨datum(data)ï¼Œå‰è€…åˆ äº†æ•°ç»„æ ‡è®°æ˜¯ä¸å¯ä»¥çš„ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆ const line = d3.line() .x((d, i) =&gt; x(d.ts * 1000)) .y(d =&gt; y(d.y)) .curve(d3.curveMonotoneX); // line çš„å±•ç¤ºã€‚ g.append(&apos;path&apos;) .data([data]).attr(&apos;fill&apos;, &apos;none&apos;).attr(&apos;d&apos;, line).attr(&apos;stroke&apos;, &apos;#f33155&apos;) .transition(500) .attr(&apos;stroke-width&apos;, 3); xåæ ‡è½´ï¼Œyåæ ‡è½´domainæ˜¯å°†åæ ‡è½´å¯¹åº”çš„çœŸå®æ•°æ®è¿æ¥èµ·æ¥ï¼Œä¸€èˆ¬å°±æ˜¯å°†åæ ‡è½´è¦å±•ç¤ºçš„æ•°æ®çš„æœ€å¤§æœ€å°å€¼æ”¾è¿›æ¥ã€‚d3.extentå¯ä»¥è‡ªåŠ¨çš„ç®—å‡ºæ•°ç»„å†…çš„æœ€å°ï¼Œæœ€å¤§å€¼ï¼Œå¾ˆæ–¹ä¾¿ã€‚å¦‚ä¸‹xè½´çš„è®¡ç®—ã€‚v4æ”¯æŒaxisBottomï¼ŒaxisTopï¼ŒaxisRightï¼ŒaxisLeftç­‰å¿«æ·æ“ä½œï¼Œå°±æ˜¯è¯´æ˜åæ ‡è½´çš„å±•ç°æ–¹å¼ã€‚è§„å®šå¥½domainåï¼Œå¯ä»¥å°†è½´å±•ç¤ºåœ¨å›¾åƒä¸­äº†ã€‚ç»™å‡ºselectorç„¶åè°ƒç”¨call(å¦‚æœæ˜¯xè½´ï¼Œè®°å¾—æŠŠä¸Šé¢xè½´å‡½æ•°ä¼ è¿›æ¥ï¼Œyè½´åŒç†)ï¼ŒåŒæ—¶ï¼Œè¿™é‡Œå¯ä»¥è§„å®šè½´çº¿æ ·å¼å’Œåˆ»åº¦çš„ç›¸å…³å†…å®¹ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¯è§„å®šäº†ï¼Œæœ€å¤§æœ€å°å€¼ä¸­é—´è¿˜å¯ä»¥æœ‰å¤šå°‘ä¸ªåˆ»åº¦ã€‚ x.domain(d3.extent(data, d =&gt; d.ts * 1000)); y.domain([0, d3.max(data, d =&gt; d.y * 1.1 )]); // Add the X Axis g.append(&quot;g&quot;).attr(&quot;transform&quot;, `translate(0,${height})`) .call(d3.axisBottom(x).ticks(5)); // Add the Y Axis g.append(&quot;g&quot;).attr(&quot;transform&quot;, `translate(0,0)`) .call(d3.axisLeft(y).ticks(8)); çº¿ä¸Šæ‰“ç‚¹çº¿ä¸Šæ‰“ç‚¹ï¼Œä¸»è¦æ˜¯é€šè¿‡lineå‡½æ•°ï¼Œè·å–ç‚¹çš„centerä½ç½®ã€‚éœ€è¦å°†dataç»‘å®šåˆ°circleæ ‡ç­¾ä¸Šï¼Œæœ€åæ ¹æ®lineå‡½æ•°ç»˜åˆ¶å‡ºæ¥ã€‚ g.selectAll(&quot;.dot&quot;) .data(data).enter().append(&quot;circle&quot;).attr(&apos;class&apos;, &apos;.dot&apos;) .attr(&quot;cx&quot;, line.x()).attr(&quot;cy&quot;, line.y()) .transition(500) .attr(&quot;r&quot;, 3.5).attr(&apos;fill&apos;, &apos;white&apos;).attr(&apos;stroke&apos;, &apos;#f33155&apos;); æ•°æ®labelç±»ä¼¼çš„ï¼Œlabelä¹Ÿæ˜¯æ ¹æ®lineå‡½æ•°è·å–ä½ç½®ï¼Œç„¶åå°†è¦ç°å®çš„å€¼ï¼Œç”¨textå±æ€§æ˜¾ç¤ºå‡ºæ¥ã€‚ g.selectAll(&quot;.text&quot;) .data(this.data).enter().append(&quot;text&quot;) .attr(&apos;class&apos;, &apos;.text&apos;).attr(&apos;font-size&apos;, 12) .attr(&quot;x&quot;, line.x()).attr(&quot;y&quot;, line.y()) .attr(&apos;dx&apos;, -15).attr(&apos;dy&apos;, 7) .text(function(d) { return d.y}) .transition(500) .attr(&apos;fill&apos;, &apos;#333&apos;).attr(&apos;stroke&apos;, &apos;#333&apos;); å½“ç»‘å®šäº†dataæ•°æ®åï¼Œxå‡½æ•°ï¼Œyå‡½æ•°ï¼Œä¼šè‡ªåŠ¨æŒ‰é¡ºåºè·å–æ•°æ®ã€‚ æœ€åç»“æœï¼šå‚è€ƒ","tags":[{"name":"d3","slug":"d3","permalink":"https://misssweety.github.io/tags/d3/"},{"name":"line","slug":"line","permalink":"https://misssweety.github.io/tags/line/"},{"name":"å¯è§†åŒ–","slug":"å¯è§†åŒ–","permalink":"https://misssweety.github.io/tags/å¯è§†åŒ–/"}]},{"title":"gitå®ç”¨æŒ‡ä»¤","date":"2017-06-02T02:51:14.000Z","path":"2017/06/02/gitå®ç”¨æŒ‡ä»¤/","text":"å®ç”¨æŒ‡ä»¤å›æ»šç›¸å…³æœ€è¿‘åˆå¥½å¥½å¤ä¹ äº†ä¸‹resetæŒ‡ä»¤ã€‚ä¸€èˆ¬è¿™äº›å›æ»šçš„æ“ä½œæœ€å¥½ä¸è¦ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤šäººå¼€å‘çš„æ—¶å€™ï¼Œä½†æ˜¯å¶å°”æƒ³ç”¨ï¼Œè¿˜æœ‰ç‚¹æ¨¡ç³Šäº†ï¼Œè¿™æ¬¡åœ¨è®°å½•ä¸€ä¸‹ã€‚ git resetæ­¥éª¤ï¼šreadmeä¸­åˆ†åˆ«æ·»åŠ  test1tess2test3 æ¯ä¸€å¥æ·»åŠ ä¸€ä¸ªcommitå…ˆçœ‹ä¸‹log git log æš‚å­˜åŒºæœ‰å…¶ä»–ä¿®æ”¹ï¼Œä½†æ²¡æœ‰addã€‚ æ­¤æ—¶ï¼Œæˆ‘æ”¹é”™äº†ï¼Œæƒ³å›é€€åˆ°test1çš„çŠ¶æ€ã€‚ç”¨ git reset --hard 46670a æ‰§è¡Œåï¼Œæš‚å­˜åŒºçš„å†…å®¹ä¹Ÿæ¸…ç©ºäº†ï¼Œreadmeä¸­ï¼Œåªæœ‰test1 äº†ã€‚æŸ¥çœ‹git logå‰ä¸¤ä¸ªæäº¤ä¹Ÿä¸è§äº†ã€‚ å‡å¦‚æˆ‘åæ‚”äº†ï¼Œæˆ‘åˆä¸æƒ³å›é€€äº†ï¼Œæˆ‘è¿˜æƒ³åœ¨test3çš„æƒ…å†µä¸‹ä¿®æ”¹ã€‚ git reflogå¯ä»¥çœ‹åˆ°æŒ‡ä»¤çš„logï¼Œä»è¿™é‡Œå¯ä»¥æ‰¾å›ä¹‹å‰å›é€€çš„ç›¸å…³commitè¿™é‡Œä¼šè®°å½•ç€è¿˜æœªè¢«å›æ”¶çš„commitå·ã€‚æ­¤æ¬¡ï¼Œæˆ‘æŠŠå†…å®¹æ·»åŠ åˆ°æš‚å­˜åŒºäº†ï¼Œä¹Ÿå°±æ˜¯addè¿‡äº†ï¼Œå†æ¬¡ä½¿ç”¨resetï¼Œå›æ»šåˆ°åŸæ¥çš„test3çš„çŠ¶æ€ git reset --hard 9d91688 å†…å®¹å›åˆ°test3 å¤„çš„commitï¼Œå¹¶ä¸”ï¼Œä¹‹å‰addåˆ°æš‚å­˜åŒºçš„éƒ½æ²¡äº† çœŸæƒ³å›æ»šï¼Œç”¨resetå°±å¤Ÿäº†ã€‚ revertå…¶å®æ˜¯å–æ¶ˆæŸä¸ªæäº¤çš„æ„æ€ã€‚revert åŠŸèƒ½ï¼šrevertæ˜¯æ’¤é”€æŸä¸€æ¬¡çš„æäº¤ï¼Œå¹¶ä¸æ˜¯å›æ»šåˆ°è¿™æ¬¡æäº¤æ—¶çš„çŠ¶æ€ï¼ï¼ï¼ revert çš„å†å²ä¿ç•™åœ¨commitä¸­ rebaseç”¨æ¥åˆå¹¶å¤šä¸ªcommitsåœºæ™¯ï¼Œæˆ‘ä»¬è‡ªå·±åœ¨æœ¬åœ°æ”¹äº†å¥½å¤šä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œä½†æ˜¯å¹¶ä¸æƒ³è®©æ‰€æœ‰çš„commitä¿¡æ¯ï¼Œæ¯”å¦‚fixä¹‹ç±»çš„éƒ½æäº¤ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨rebase é…åˆ squash ï¼Œåˆå¹¶commitã€‚ è¿‡ç¨‹å¦‚ä¸‹ï¼šå…ˆ git logï¼š æˆ‘ä»¬æƒ³å°†0fad78ccc3åˆ°ç°åœ¨çš„commitéƒ½åˆå¹¶, é‚£ä¹ˆå…ˆrebaseåˆ°é‚£ä¸ªä¸å˜åŠ¨çš„commit git rebase -i 4c9bc3a7 å¦‚ä¸‹ï¼š éœ€è¦ç•™ä¸€ä¸ªpickï¼Œå…¶ä»–éƒ½æ”¹æˆsquash, å¦‚ä¸‹ esc :wqä¿å­˜åï¼Œè¿™æ ·å°±æŠŠå…¶ä»–çš„æäº¤éƒ½åˆå¹¶äº†ã€‚è‡ªåŠ¨è·³åˆ°å¦‚ä¸‹ç•Œé¢(è¿™é‡Œå¯ä»¥é‡å†™åˆå¹¶çš„commitå†…å®¹äº†) ä¿®æ”¹å®Œæ¯•ï¼Œesc :wq ä¿å­˜ æœ€åï¼Œçœ‹ä¸‹git logï¼Œå¹²å‡€äº†ï¼ï¼ï¼ï¼ è¿œç«¯åˆ†æ”¯å›æ»šå¦‚æœè¿œç«¯å¯¹åº”çš„åˆ†æ”¯ä¹Ÿæƒ³ä¿®æ”¹ï¼Œå¿…é¡»è¦â€”force git push --force origin branch-name åˆªé™¤è¿œç«¯åˆ†æ”¯git push origin --delete target_branch","tags":[{"name":"git","slug":"git","permalink":"https://misssweety.github.io/tags/git/"}]},{"title":"å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½","date":"2017-05-25T02:48:54.000Z","path":"2017/05/25/ç½‘ç»œä¼˜åŒ–/","text":"å‰ç«¯é¡µé¢-ç½‘ç»œæ€§èƒ½ä¸€ä¸ªç½‘ç«™ä»å¼€å§‹è®¿é—®ï¼Œå‘é€è¯·æ±‚ï¼Œé¡µé¢æ¸²æŸ“ï¼Œå¼‚æ­¥è¯·æ±‚ï¼Œåˆ°æœ€ç»ˆå‘ˆç°ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰å„è‡ªä¸åŒçš„ä¼˜åŒ–ç‚¹ã€‚ å‰ä¸€æ®µæ—¶é—´ï¼Œè‡ªå·±é¡¹ç›®çš„ç½‘ç«™åœ¨åŠ è½½å’Œæ¸²æŸ“çš„æ—¶å€™è¡¨ç°å¾ˆå¥‡æ€ªï¼Œé‚ä»”ç»†ç”¨èµ·chromeçš„networkä»¥åŠtimelineé¢æ¿ï¼ŒæœŸå¾…æ‰¾åˆ°é—®é¢˜çš„æ ¹æºã€‚ç”¨çš„æ—¶å€™å‘ç°å¾ˆå¤šè‡ªå·±ç¼ºå¤±çš„çŸ¥è¯†ï¼Œäºæ˜¯å°±æœ‰è¿™ç¯‡æ–‡ç« è®°å½•æŸ¥ç¼ºè¡¥æ¼çš„å†…å®¹ã€‚ è¿™é‡Œå…ˆä»ç½‘ç»œæ€§èƒ½è§’åº¦æ¥çœ‹ï¼Œå®ƒå°†ä»åˆå§‹é˜¶æ®µå½±å“ç½‘ç«™çš„æ€§èƒ½ã€‚ä¸‹é¢ä¼šä»¥chromeä¸­çš„networké¢æ¿å‡ºå‘ï¼Œä»ä¸‰ç‚¹ä»‹ç»ç½‘ç»œæ€§èƒ½ç›¸å…³å†…å®¹ï¼Œåˆ†åˆ«åŒ…æ‹¬ï¼šä¸»è¦ç½‘ç»œå±æ€§ï¼Œå¦‚ä½•åœ¨chrome devtoolä¸­æŸ¥çœ‹ç½‘ç»œæ€§èƒ½ï¼Œå¦‚ä½•ä¼˜åŒ– ä¸»è¦ç½‘ç»œå±æ€§è¿™é‡Œä¸»è¦å…³æ³¨timingè¿™ä¸ªå±æ€§ã€‚æŸä¸ªè¯·æ±‚çš„timingå¦‚ä¸‹ï¼š åœ¨networké¡µé¢ç‚¹å‡»å…·ä½“çš„è¯·æ±‚urlå³å¯è¿›å…¥ä¸Šè¿°é¡µé¢ã€‚ å¯ä»¥çœ‹åˆ°ä¸€æ¡èµ„æºä»åˆ—é˜Ÿã€åœæ»ã€ä»£ç†åè®®ã€åˆå§‹åŒ–è¿æ¥ã€SSLåè®®ã€å‘é€requestã€ç­‰å¾…åŠå†…å®¹ä¸‹è½½æ‰€è€—çš„æ—¶é—´ã€‚ ä¸»è¦å±æ€§ Queueingæ—¶é—´ï¼šè¯·æ±‚æ’é˜Ÿçš„æ—¶é—´ï¼Œå‡ºç°åŸå› æœ‰ï¼šæ›´é«˜ä¼˜å…ˆçº§çš„è¯·æ±‚ï¼Œæˆ–è€…åœ¨HTTP/1.0å’ŒHTTP/1.1ä¸­ï¼Œå·²ç»æœ‰6ä¸ªåŒæºè¯·æ±‚åœ¨è¿›è¡Œä¸­ Stalledé˜»å¡æ—¶é—´ï¼šåŸå› å¦‚ä¸Šqueueing DNS Lookup. æµè§ˆå™¨è§£æè¯·æ±‚çš„ipåœ°å€éœ€è¦çš„æ—¶é—´ Proxy negotiation. ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡éœ€è¦çš„æ—¶é—´ Initial Connection / connecting: å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ï¼ŒåŒ…å«TCPæ¡æ‰‹/é‡è¯•ï¼Œå•†å®šSSL SSL: å®ŒæˆSSLæ¡æ‰‹é˜¶æ®µ Request sentï¼šå‘é€è¯·æ±‚è€—æ—¶ï¼Œé€šå¸¸åªè¦ä¸åˆ°1msçš„æ—¶é—´ ServiceWorker Preparation.æµè§ˆå™¨å¯åŠ¨æœåŠ¡workerçš„æ—¶é—´ Request to ServiceWorker.The request is being sent to the service worker. Waiting (TTFB). æ”¶åˆ°é¦–å­—èŠ‚çš„æ—¶é—´ã€‚ Content Download. æµè§ˆå™¨æ¥æ”¶å“åº”æ•°æ®çš„æ—¶é—´ã€‚ performance apiä¸Šé¢è¿™äº›èµ„æºæ•°æ®æ˜¯æ ¹æ®jsçš„æ€§èƒ½apiè®¡ç®—çš„ã€‚window.performance.getEntries() è·å–èµ„æºåŠ è½½æ—¶é—´åˆ—è¡¨ã€‚æ¯ä¸ªperformanceResourceTimingå¤§æ¦‚å¦‚ä¸‹ï¼š connectEndï¼šæµè§ˆå™¨ä¸æœåŠ¡å™¨å®Œæˆå»ºç«‹ç”¨ä»¥æ£€ç´¢èµ„æºçš„ç½‘ç»œè¿æ¥çš„æ—¶é—´æˆ³ connectStartï¼šæµè§ˆå™¨ä¸æœåŠ¡å™¨å¼€å§‹å»ºç«‹ç”¨ä»¥æ£€ç´¢èµ„æºçš„ç½‘ç»œè¿æ¥çš„æ—¶é—´æˆ³ damainLookupEndï¼šæµè§ˆå™¨å®Œæˆèµ„æºçš„åŸŸåè§£æçš„æ—¶é—´æˆ³ damainLookupStartï¼šæµè§ˆå™¨å¼€å§‹è¿›è¡Œèµ„æºçš„åŸŸåè§£æçš„æ—¶é—´æˆ³ durationï¼šèµ„æºè¯·æ±‚ä»å¼€å§‹åˆ°ç»“æŸçš„æ—¶é—´å·® entryTypeï¼šPerformanceEntryå¯¹è±¡çš„ç±»å‹ï¼Œè¯¥å¯¹è±¡å°è£…ä¸€ä¸ªå•ä¸€çš„æ€§èƒ½æŒ‡æ ‡ä½œä¸ºæ€§èƒ½è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œæ­¤ç±»å‹æ˜¯frame, mark, measure, navigation, resource,serverçš„å…¶ä¸­ä¸€ä¸ªã€‚ fetchStartï¼šæµè§ˆå™¨å¼€å§‹è·å–èµ„æºçš„æ—¶é—´æˆ³ initiatorTypeï¼šèµ„æºæ–‡ä»¶çš„ç±»å‹ nameï¼šèµ„æºçš„url redirectEndï¼šæ¥æ”¶åˆ°é‡å®šå‘èµ„æºçš„æœ€åä¸€ä¸ªå“åº”å­—èŠ‚çš„æ—¶é—´æˆ³ redirectStartï¼šå¯åŠ¨é‡å®šå‘ä»¥è·å–èµ„æºçš„å¼€å§‹æ—¶é—´æˆ³ requestStartï¼šæµè§ˆå™¨ä»æœåŠ¡å™¨è¯·æ±‚èµ„æºçš„å¼€å§‹æ—¶é—´æˆ³ responseEndï¼šæµè§ˆå™¨æ¥æ”¶åˆ°èµ„æºæœ€åä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´æˆ³ï¼Œæˆ–è€…å…³é—­ä¼ è¾“è¿æ¥çš„æ—¶é—´æˆ³ responseStartï¼šæµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´æˆ³ secureConnectionStartï¼šæµè§ˆå™¨å¼€å§‹æ¡æ‰‹åè®®ï¼Œä»¥ä¿æŠ¤å½“å‰è¿æ¥çš„å®‰å…¨æ€§ï¼Œæ¡æ‰‹å¼€å§‹çš„æ—¶é—´ startTimeï¼šæµè§ˆå™¨å¼€å§‹è·å–èµ„æºå‰çš„æ—¶é—´æˆ³(æ•´ä¸ªè¿‡ç¨‹çš„å¼€å§‹æ—¶é—´) workerStartï¼šå¦‚æœå½“å‰ä¸Šä¸‹æ–‡æ˜¯â€workerâ€ï¼Œè¿”å›å¼€å§‹è·å–èµ„æºçš„æ—¶é—´æˆ³ï¼Œå¦åˆ™è¿”å›0(åº”è¯¥æ˜¯åº”ç”¨äºåŒå·¥é€šä¿¡çš„) ä¸‹é¢è¿™å¼ å›¾å®šä¹‰äº†PerformanceResourceTiming æ¥å£çš„å„ä¸ªæ—¶é—´å±æ€§ï¼š performance.timing() è·å–é¡µé¢æ•´ä½“çš„æ—¶é—´å‚æ•° è¿™ä¸ªapiå¯ä»¥å‚è€ƒè¿™ä¸ªéæ­£å¼çš„æ ‡å‡†è§„èŒƒResouce timing - w3c old one è¯¥è§„èŒƒå®šä¹‰äº†ä¸€ä¸ªç”¨äºWebåº”ç”¨ç¨‹åºçš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£å¯ä»¥è®¿é—®æ–‡æ¡£éœ€è¦çš„èµ„æºçš„å®Œæ•´æ—¶åºä¿¡æ¯ã€‚ æ¥å£çš„è¯¦ç»†è¯´æ˜è¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œç»†èŠ‚äº†è§£éœ€è¦è‡ªå·±å»è¯»æ ‡å‡†ã€‚ ä¸‹é¢åªæŒ‘å’Œæˆ‘ä»¬ç›¸å…³çš„å†…å®¹ã€‚ ç”±ä¸Šé¢è¿™ä¸ªå›¾ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°chromeç½‘ç»œé¢æ¿ä¸­ï¼Œtimingçš„ç›¸å…³ä¿¡æ¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼š é¡µé¢æ•´ä½“çš„æ—¶é—´å‚æ•° ï¼ˆmtaåº”è¯¥æœ‰ç”¨åˆ°ä»¥ä¸‹å‚æ•°ï¼‰ pageloadtime = t.loadEventStart - t.navigationStart, dns = t.domainLookupEnd - t.domainLookupStart, tcp = t.connectEnd - t.connectStart, ttfb = t.responseStart - t.navigationStart; æŸä¸ªèµ„æºçš„æ—¶é—´å‚æ•° var r0 = performance.getEntriesByType(&quot;resource&quot;)[0], loadtime = r0.duration, dns = r0.domainLookupEnd - r0.domainLookupStart, tcp = r0.connectEnd - r0.connectStart, ttfb = r0.responseStart - r0.startTime; å‚è€ƒè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æµ‹é‡æ—¶é—´çš„é—®é¢˜ï¼Œè¯·å‚è€ƒperformanceçš„èµ„æºè®¡æ—¶ç»Ÿè®¡å…¶ä»–æ–¹æ³•ä½¿ç”¨ï¼Œå‚è€ƒåˆæ¢performance-ç›‘æ§ç½‘é¡µä¸ç¨‹åºæ€§èƒ½ å¦‚ä½•åœ¨chrome devtoolä¸­æŸ¥çœ‹ç½‘ç»œæ€§èƒ½åœ¨chrome devtoolä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå„ç§ç½‘ç»œç¯å¢ƒï¼Œå¯ä»¥è¿‡æ»¤è¯·æ±‚ï¼ŒæŸ¥çœ‹httpè¯·æ±‚ä¿¡æ¯ï¼Œäº†è§£domåŠ è½½æ—¶é—´ï¼Œcookieä¿¡æ¯ï¼Œèµ„æºçš„ä¸Šä¸‹æ¸¸ç­‰ç­‰ã€‚ å†…å®¹ç•¥å¤šï¼Œå‚è€ƒè¿™é‡Œï¼Œchrome developers å®˜ç½‘æµ‹é‡ç½‘ç»œæ€§èƒ½è‹±æ–‡ä¸å¥½çš„å¯ä»¥çœ‹è¿™ä¸ªï¼šChrome DevTools ä¹‹ Networkï¼Œç½‘ç»œåŠ è½½åˆ†æåˆ©å™¨ å¦‚ä½•ä¼˜åŒ–ç½‘ç«™åŠ è½½æ—¶é—´å¯¹ç”¨æˆ·çš„å½±å“ï¼š0.1ç§’ï¼šç§’å¼€100-300 ï¼šæ¯”è¾ƒå°çš„å¯å¯Ÿè§‰çš„å»¶è¿Ÿ300-1sï¼šMachine is working1ç§’ï¼šè¿˜èƒ½æ¥å—ï¼Œä½†æ˜¯å·²ç»ä¸å¼€å¿ƒäº†10ç§’ï¼šä»€ä¹ˆç ´ç©æ„ï¼Œä¸æƒ³çœ‹äº†chrome developeré‡Œæåˆ°ï¼Œç›®æ ‡æ˜¯250ms ä¼˜åŒ–ä¸»è¦ä»å››ä¸ªå±æ€§å…¥æ‰‹ï¼Œä»¥ä¸‹åŸºæœ¬ç¿»è¯‘è‡ªchrome devtool Queued or stalled requestsè¿™ä¸¤ä¸ªæŒ‡æ ‡å¦‚æœæ—¶é—´å¾ˆé•¿ï¼Œè¯´æ˜å¾ˆå¤šèµ„æºç­‰å¾…é€ æˆçš„åŸå› ï¼šè®¿é—®åŒä¸€ä¸ªåŸŸåçš„è¯·æ±‚å¤ªå¤šï¼Œå¯¹äºhttp1.1æ¥è¯´ï¼Œæ¯ä¸ªhostæœ€å¤šåŒæ—¶æ”¯æŒ6ä¸ªtcpè¿æ¥ã€‚ è§£å†³ï¼š åŸŸååˆ†ç‰‡ï¼šå°†èµ„æºæ”¾åœ¨ä¸åŒçš„åŸŸåä¸­ï¼Œç”¨æ¥å…‹æœæµè§ˆå™¨å¯¹åŒä¸€ä¸ªåŸŸåè®¿é—®çš„é™åˆ¶ï¼Œä½†æ˜¯ä¸èƒ½è¿‡å¤šå› ä¸ºdnsè§£æä¹Ÿéœ€è¦æ—¶é—´ [å¤‡æ³¨]domain sharding (åŸŸååˆ†ç‰‡)ï¼ˆå’Œcdnçš„ä¸åŒåŸŸååˆ†ç‰‡æ˜¯ä¸€ç§åˆ†å¸ƒæ–¹å¼ï¼Œæ˜¯å°†èµ„æºåˆ†å¸ƒåœ¨ä¸åŒçš„åŸŸåä¸­è¾¾åˆ°å…‹æœæµè§ˆå™¨è®¿é—®é™åˆ¶çš„ç›®çš„ï¼›cdnåˆ™æ˜¯åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šæ‰˜ç®¡ä¸–ç•Œå„åœ°çš„ç½‘ç«™èµ„æºã€‚ï¼‰ ä½¿ç”¨http2.0è®©é‡è¦çš„è¯·æ±‚å…ˆå‘èµ·ï¼Œä¸é‡è¦çš„removeæˆ–è€…æ¨è¿Ÿã€‚ Slow Time To First Byte (TTFB)èµ·å› ï¼š clientä¸serverçš„è¿æ¥æ…¢ï¼›serverå“åº”å¤ªæ…¢ è§£å†³ï¼š è¿æ¥æ…¢ï¼Œ ä½¿ç”¨cdnï¼Œæˆ–è€…æ¢ä¸ªæœåŠ¡å•† å¦‚æœserveræ…¢ï¼Œä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ï¼Œç”¨ç¼“å­˜ï¼Œä¿®æ”¹serveré…ç½®ç­‰ã€‚ Slow content downloadåŸå› ï¼šç½‘ç»œä¸å¥½ï¼›å†…å®¹è¿‡å¤§ è§£å†³ï¼š è¿æ¥æ…¢ï¼Œ ä½¿ç”¨cdnï¼Œæˆ–è€…æ¢ä¸ªæœåŠ¡å•†ï¼› ä¼˜åŒ–è¯·æ±‚ä½¿æ•°æ®æ›´å°‘ã€‚ ä»¥ä¸Šæ˜¯å…³äºç½‘ç»œå±‚é¢çš„ç½‘ç«™ä¼˜åŒ–å†…å®¹ï¼Œä¸å‰ç«¯äººå‘˜å¼€å‘æŠ€æœ¯èƒ½åŠ›ç›¸å…³æ€§ä¸å¤§ï¼Œéœ€è¦ä¸€äº›ç½‘ç»œå±‚é¢ä»¥åŠåå°æ¥æ”¯æŒã€‚å½“æˆ‘ä»¬å‘ç°ç½‘é¡µåŠ è½½è¿‡æ…¢çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆä»ç½‘ç»œè¿™è¾¹å…¥æ‰‹ï¼ŒæŠŠç½‘ç»œå’Œè¿æ¥çš„åŸºç¡€é—®é¢˜æ’æŸ¥åï¼Œå†ä»ä¼˜åŒ–è‡ªå·±å†™çš„ä»£ç å…¥æ‰‹ã€‚","tags":[{"name":"timing","slug":"timing","permalink":"https://misssweety.github.io/tags/timing/"}]},{"title":"é«˜å¾·åœ°å›¾apiä½¿ç”¨æ€»ç»“","date":"2017-05-18T04:28:44.000Z","path":"2017/05/18/é«˜å¾·åœ°å›¾apiä½¿ç”¨æ€»ç»“/","text":"å¸¸ç”¨çš„é«˜å¾·åœ°å›¾apiå…³äºappkeyï¼Œåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯apiè°ƒç”¨çš„keyï¼Œä¸€ä¸ªæ˜¯åœ°å›¾æœåŠ¡çš„keyï¼Œä¾‹å¦‚ï¼Œè·å–é—¨åº—ä¿¡æ¯ï¼ŒsearchåŠŸèƒ½ç­‰ç­‰ã€‚ è„šæœ¬åŠ è½½&lt;script type=&quot;text/javascript&quot; src=&quot;http://webapi.amap.com/maps?v=1.3&amp;key=æ‚¨ç”³è¯·çš„keyå€¼&quot;&gt;&lt;/script&gt; éœ€è¦æŠŠè¿™ä¸ªè„šæœ¬åŠ è½½å®Œæˆåï¼Œæ‰èƒ½ä½¿ç”¨AMapã€‚ å¯ä»¥ä½¿ç”¨map-divè¿™ä¸ªç»„ä»¶ã€‚ å¦‚æœæ­é…reactï¼Œéœ€è¦åœ¨componentDidMounté˜¶æ®µï¼Œè°ƒç”¨map-div ä¸­çš„createMapå‡½æ•°ã€‚é…å¥—çš„ï¼Œæœ€å¥½å°†è¯¥åœ°å›¾å®ä¾‹ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªflagä½œä¸ºåœ°å›¾åŠ è½½å®Œæˆçš„æ ‡å¿—ä½ï¼Œä»¥ä¾¿reactä½¿ç”¨ã€‚ ç¤ºä¾‹ï¼š mapInstance.js let __value = null; export default { getter: () =&gt; __value, setter: (val) =&gt; { __value = val; }, }; --------------------------------------- const mapConfig = { name: &apos;AMap&apos;, initOpts: { zoom: MAP_CONFIG.zoom, zooms: MAP_CONFIG.zooms, }, query: { plugin: &apos;AMap.Geocoder,AMap.CitySearch&apos;, }, }; componentDidMount() { (async () =&gt; { const mapIns = await createMap(mapConfig, &apos;mapComponent&apos;); mapInstance.setter(mapIns); this.props.setMapInstanceFlag(true); // ä¸€äº›äº‹ä»¶ç›‘å¬ mapEventHandler(mapIns, &apos;dragend&apos;, &apos;on&apos;, throttle(this.handleMapScale, 800)); mapEventHandler(mapIns, &apos;click&apos;, &apos;on&apos;, throttle(this.handleMapClick, 800)); ... })(); ... } åˆ›å»ºåœ°å›¾å¯¹è±¡éœ€è¦ç»™å‡ºä¸€ä¸ªdivä½œä¸ºåœ°å›¾çš„å®¹å™¨ã€‚ &lt;div id=&quot;container&quot; style=&quot;width:800px; height:500px&quot;&gt;&lt;/div&gt; var map = new AMap.Map(&apos;container&apos;,{ config }) æ³¨æ„ï¼š å¦‚æœä¸åŠ centerï¼Œåœ°å›¾é»˜è®¤æ˜¾ç¤ºç”¨æˆ·å½“å‰åŸå¸‚èŒƒå›´ configå¸¸ç”¨åŸºæœ¬é…ç½® options è¯´æ˜ zoom ç¼©æ”¾çº§åˆ« center åœ°å›¾ä¸­å¿ƒç‚¹åæ ‡[lon, lat] zooms åœ°å›¾å¯ä»¥ç¼©æ”¾çš„èŒƒå›´ ï¼Œæ•°ç»„æ ¼å¼[max, min] zoomEnable æ˜¯å¦å¯ç¼©æ”¾ï¼Œé»˜è®¤ä¸ºtrue dragEnable æ˜¯å¦å¯æ‹–æ‹½ï¼Œé»˜è®¤ä¸ºtrue mapStyle åœ°å›¾æ˜¾ç¤ºæ ·å¼ï¼Œnormalï¼ˆé»˜è®¤æ ·å¼ï¼‰ã€darkï¼ˆæ·±è‰²æ ·å¼ï¼‰ã€lightï¼ˆæµ…è‰²æ ·å¼ï¼‰ã€fresh(osmæ¸…æ–°é£æ ¼æ ·å¼)ã€blue_night features åœ°å›¾ä¸Šæ˜¾ç¤ºçš„å…ƒç´ ç§ç±»ï¼Œ é»˜è®¤éƒ½æ˜¾ç¤ºï¼Œæ”¯æŒâ€™bgâ€™ï¼ˆåœ°å›¾èƒŒæ™¯ï¼‰ã€â€™pointâ€™ï¼ˆPOIç‚¹ï¼‰ã€â€™roadâ€™ï¼ˆé“è·¯ï¼‰ã€â€™buildingâ€™ï¼ˆå»ºç­‘ç‰©ï¼‰ å¸¸ç”¨çš„åœ°å›¾å®ä¾‹æ–¹æ³•åœ°å›¾å¸¸ç”¨æ–¹æ³• æ–¹æ³• è¯´æ˜ getZoom()ï¼Œ setZoom() ç¼©æ”¾çº§åˆ« getCenter(), setCenter() è·å–åœ°å›¾ä¸­å¿ƒç‚¹åæ ‡[lon, lat] setZoomAndCenter åŒæ—¶è®¾å®šç¼©æ”¾çº§åˆ«å’Œä¸­å¿ƒç‚¹åæ ‡ setCity(city:Stringï¼Œcallback:Functon) é€šè¿‡è®¾ç½®åŸå¸‚åç§°æ¥è®¾ç½®åœ°å›¾æ˜¾ç¤ºçš„ä¸­å¿ƒç‚¹ zoomIn åœ°å›¾æ”¾å¤§ä¸€çº§ zoomOut åœ°å›¾ç¼©å°ä¸€çº§ åœ°å›¾å¸¸ç”¨äº‹ä»¶ç±»å‹ click: é¼ æ ‡å·¦é”®å•å‡» mapmove: åœ°å›¾å¹³ç§»æ—¶è§¦å‘ movestart: åœ°å›¾å¹³ç§»å¼€å§‹æ—¶è§¦å‘ moveend: åœ°å›¾ç§»åŠ¨ç»“æŸåè§¦å‘ï¼ŒåŒ…æ‹¬å¹³ç§»å’Œç¼©æ”¾(ç»è¯•éªŒï¼Œç¼©æ”¾å¹¶æ²¡æœ‰è§¦å‘moveend)ã€‚ zoomchange: åœ°å›¾ç¼©æ”¾çº§åˆ«æ›´æ”¹åè§¦å‘ zoomstart: ç¼©æ”¾å¼€å§‹æ—¶è§¦å‘ zoomend: ç¼©æ”¾åœæ­¢æ—¶è§¦å‘ dragstart: å¼€å§‹æ‹–æ‹½åœ°å›¾æ—¶è§¦å‘ dragend: åœæ­¢æ‹–æ‹½åœ°å›¾æ—¶è§¦å‘ dragging: æ‹–æ‹½åœ°å›¾è¿‡ç¨‹ä¸­è§¦å‘ å¦‚æœåœ°å›¾æ“ä½œåä¼šæœ‰å…¶ä»–æ“ä½œï¼Œä¸€èˆ¬ç›‘å¬ XXXend æ–¹æ³•ã€‚æ³¨æ„ï¼šsetCityï¼ŒsetCenterç­‰æ“ä½œä¸ä¼šè§¦å‘dragç›¸å…³å†…å®¹ã€‚ å…³äºamapçš„äº‹ä»¶ç»‘å®šæœ‰ä¸¤ç§æ–¹æ³•ï¼š é’ˆå¯¹Mapã€è¦†ç›–ç‰©ç­‰å¸¸ç”¨ç±»ç›´æ¥ä½¿ç”¨onï¼Œ off æ–¹æ³•æ¥å®ç°äº‹ä»¶çš„ç®€å•ç»‘å®šå’Œç§»é™¤ ä½¿ç”¨AMap.eventå‘½åç©ºé—´addDomListener(domobj, eventName, handler, context(æ²¡ç”¨è¿‡ï¼Œä¸æ¸…æ¥š))addListener(obj, eventName, handler, context(æ²¡ç”¨è¿‡ï¼Œä¸æ¸…æ¥š))removeListener(listener): å¯ä»¥ç§»é™¤domå’Œédomäº‹ä»¶ã€‚ å‚è€ƒ äº‹ä»¶eventä¸­çš„å†…å®¹ æ‰€æœ‰çš„CLICKäº‹ä»¶ç‚¹å‡»ä½ç½®çš„ç»çº¬åº¦ï¼Œå¯¹åº”åœ¨ç”»å¸ƒä¸Šçš„æ¨ªçºµåæ ‡ï¼Œäº‹ä»¶targetï¼Œ äº‹ä»¶type å…¶ä»–ç±»å‹äº‹ä»¶ï¼Œå¦‚moveendï¼Œzoomeventä¸­åªæœ‰äº‹ä»¶ç±»å‹type é’ˆå¯¹ä»¥ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åœ°å›¾äº‹ä»¶è¿›è¡Œå°è£…ï¼Œä¸€èˆ¬éœ€è¦çš„æ˜¯äº‹ä»¶å‘ç”Ÿçš„zoomï¼Œåœ°å›¾èŒƒå›´ï¼Œç‚¹å‡»ä½ç½®çš„ç»çº¬åº¦ã€‚ğŸŒ°å¦‚ä¸‹: const eventInjector = (ev, mapINS, cb) =&gt; { const bounds = mapINS.getBounds(); const param = { sw: bounds.getSouthWest(), ne: bounds.getNorthEast(), zoom: mapINS.getZoom(), type: ev.type, lng: ev.lnglat ? ev.lnglat.getLng() : &apos;&apos;, lat: ev.lnglat ? ev.lnglat.getLat() : &apos;&apos;, }; if (cb) cb(param); }; const mapEventHandler = (mapINS, type, opt, cb) =&gt; mapINS[opt](type, (ev) =&gt; eventInjector(ev, mapINS, cb)); //ä½¿ç”¨ mapEventHandler(mapIns, &apos;dragend&apos;, &apos;on&apos;, this.handleMapScale); mapEventHandler(mapIns, &apos;dragend&apos;, &apos;off&apos;,this.handleMapScale); //handleMapScale handleMapScale(ev) { console.log(ev); const { ne, sw, zoom, type } = ev; ... } ä¹‹åï¼Œå¦‚æœåœ¨åœ°å›¾ä¸Šå‘ç”Ÿdragendï¼Œeventçš„ç»“æœå¦‚ä¸‹ï¼š å¸¸ç”¨åœ°å›¾åŸºæœ¬ç±»å‹LngLat ï¼š ç»çº¬åº¦åæ ‡ï¼Œç¡®å®šåœ°å›¾ä¸Šçš„ä¸€ä¸ªç‚¹æ„é€ å‡½æ•°ï¼š AMap.LngLat(lng: 119.78, lat: 39.99);ç”Ÿæˆä¸€ä¸ªç»çº¬åº¦ä¸º[119.78, 39.99]çš„åœ°ç†åæ ‡å¯¹è±¡ã€‚å¸¸ç”¨æ–¹æ³•ï¼š - getLng() è·å–ç»åº¦ - getLat() è·å–çº¬åº¦ - offset(w:2,s:-3) wç»åº¦ï¼Œsçº¬åº¦ï¼Œå‚æ•°ä¸ºæ•°å­—ã€‚å°†å½“å‰ç»çº¬åº¦åæ ‡å€¼å˜åŒ–ã€‚ç»åº¦æ˜¯è¶Šå‘å³è¶Šå¤§ï¼Œæ‰€ä»¥å‘å³ä¸ºæ­£ã€‚åŒç†ï¼Œçº¬åº¦è¶Šå‘ä¸Šè¶Šå¤§ï¼Œæ‰€ä»¥å‘ä¸Šä¸ºæ­£ã€‚ - distance(lnglat: LngLat | [lng, lat]) å½“å‰ç»çº¬åº¦ä¸ä¼ å…¥çš„ç»çº¬åº¦çš„è¿çº¿çš„åœ°é¢è·ç¦» - equals(lnglat:LngLat) Boundsï¼šç»çº¬åº¦èŒƒå›´çŸ©å½¢æ¡†AMap.Bounds(southWest:LngLat1, northEast:LngLat2);ç”Ÿæˆä¸€ä¸ªä¸œåŒ—è§’æ˜¯LngLat2ï¼Œè¥¿å—è§’æ˜¯LngLat1 çš„çŸ©å½¢åœ°ç‰©æ¡†ã€‚å¸¸ç”¨æ–¹æ³•ï¼š - contains(point: LngLat) ç»™å‡ºçš„ç»çº¬åº¦ç‚¹æ˜¯å¦åŒ…å«åœ¨çŸ©å½¢èŒƒå›´å†… - getCenter() - getSouthWest() - getNorthEast() å¸¸ç”¨è¦†ç›–ç‰©AMap.Marker æ„é€ ï¼šAMap.Marker({ markeroptions }) å¸¸ç”¨é€‰é¡¹map:markeræ‰€åœ¨çš„åœ°å›¾position: LngLatç±»å‹ï¼Œç‚¹åœ¨åœ°å›¾ä¸Šçš„ä½ç½®offset: åƒç´ ç±»å‹(-75ï¼Œ-75)ï¼Œmarkerè·ç¦»å·¦ä¸Šè§’çš„åç§»content: string/object è¿™é‡Œå¯ä»¥è‡ªå®šä¹‰markeræ˜¾ç¤ºçš„å†…å®¹ï¼Œå›¾ç‰‡ï¼Œsvgç­‰éƒ½å¯ä»¥ã€‚bubble: å°†è¦†ç›–ç‰©çš„äº‹ä»¶å†’æ³¡åˆ°åœ°å›¾ä¸Šï¼Œé»˜è®¤falsezIndex: å åŠ é¡ºåºtitle: é¼ æ ‡æ»‘è¿‡æ—¶ï¼Œç‚¹æ ‡è®°çš„æ–‡å­—æç¤ºã€‚extData: ç”¨æˆ·è‡ªå®šä¹‰å±æ€§draggable: æ ‡è®°ç‚¹æ˜¯å¦å¯ä»¥æ‹–æ‹½ç§»åŠ¨ æ–¹æ³•ç•¥å¤šï¼Œè¿™é‡Œå°±ä¸å†™äº†ï¼ŒåŸºæœ¬å¯¹åº”æ¯ä¸ªé€‰é¡¹éƒ½ä¼šæœ‰ä¸ªgetï¼Œsetæ–¹æ³•ã€‚hideï¼Œshowæ§åˆ¶ç‚¹æ ‡è®°çš„éšè—ï¼Œè¿˜åœ¨mapä¸­ã€‚setMapæ¯”è¾ƒæœ‰ç”¨ï¼Œå¦‚æœè®¾ä¸ºnullï¼Œåˆ™åœ¨åœ°å›¾ä¸Šç§»é™¤å½“å‰Markerç›¸å…³çš„divã€‚è¿˜æœ‰ä¸€äº›ç§»åŠ¨ç±»çš„åº”ç”¨ï¼Œç›®å‰è¿˜æ²¡ä½¿ç”¨è¿‡ï¼Œè¿™é‡Œå°±ä¸è¯¦è¿°äº†ï¼Œä¸»è¦æœ‰ï¼šmoveAlong, moveTo, stopMove, pauseMove, resumeMoveã€‚ äº‹ä»¶ä¸åœ°å›¾å¯¹è±¡åŸºæœ¬ä¸€è‡´ï¼Œå°‘äº†ä¸ªreadyã€‚å¤šäº†ä¸€äº›moveçš„è¡Œä¸ºï¼Œå…·ä½“å¯å‚è€ƒ AMap.Polygon æ„é€ ï¼šAMap.Polygon({ options }) å¸¸ç”¨é€‰é¡¹map:markeræ‰€åœ¨çš„åœ°å›¾path: å‚æ•°ä¸ºï¼ŒåŒ…å«ç»çº¬åº¦æ•°ç»„çš„æ•°ç»„. egï¼š[ [116.368904, 39.913423], [116.382122, 39.901176], [116.387271, 39.912501], [116.398258, 39.904600] ] bubble: å°†è¦†ç›–ç‰©çš„äº‹ä»¶å†’æ³¡åˆ°åœ°å›¾ä¸Šï¼Œé»˜è®¤falseã€‚ zIndex: å åŠ é¡ºåº, é»˜è®¤æ¯”markerä½ã€‚ ç±»ä¼¼svgçš„å¤šè¾¹å½¢å±æ€§: strokeColorï¼ŒstrokeOpacityï¼Œ strokeWeightï¼Œ fillColorï¼Œ fillOpacityï¼Œ strokeStyleï¼Œ strokeDasharrayã€‚ extData: è‡ªå®šä¹‰å±æ€§ æ–¹æ³•ã€‚å¯¹åº”pathï¼ŒextDataï¼Œ optionséƒ½ä¼šæœ‰ä¸ªgetï¼Œsetæ–¹æ³•ã€‚hideï¼Œshowæ§åˆ¶å¤šè¾¹å½¢çš„éšè—ï¼Œå¤šè¾¹å½¢è¿˜åœ¨mapä¸­ã€‚setMapæ¯”è¾ƒæœ‰ç”¨ï¼Œå¦‚æœè®¾ä¸ºnullï¼Œåˆ™åœ¨åœ°å›¾ä¸Šç§»é™¤å½“å‰polygonç›¸å…³çš„divã€‚getBounds,çŸ©å½¢èŒƒå›´å¯¹è±¡ï¼Œè¿”å›Boundsç±»å‹ã€‚getArea,è·å–å¤šè¾¹å½¢é¢ç§¯ã€‚contains(point:LngLat)ï¼Œç‚¹æ˜¯å¦åœ¨polygonå†…ã€‚ äº‹ä»¶å¾ˆå¤šï¼Œå¸¸ç”¨çš„åˆmouseoverï¼Œ clickç­‰ã€‚å…·ä½“å¯å‚è€ƒ AMap.Circle æ„é€ ï¼šAMap.Circle({ options }) å¸¸ç”¨é€‰é¡¹map:markeræ‰€åœ¨çš„åœ°å›¾center: LngLatç±»å‹ï¼Œåœ†å¿ƒåœ¨åœ°å›¾ä¸Šçš„ä½ç½®radius: åŠå¾„ï¼Œnumberç±»å‹ï¼Œå•ä½æ˜¯ç±³bubble: å°†è¦†ç›–ç‰©çš„äº‹ä»¶å†’æ³¡åˆ°åœ°å›¾ä¸Šï¼Œé»˜è®¤falsezIndex: å åŠ é¡ºåº, é»˜è®¤æ¯”markerä½ã€‚extData: ç”¨æˆ·è‡ªå®šä¹‰å±æ€§ç±»ä¼¼svgçš„å¤šè¾¹å½¢å±æ€§ï¼š åŒä¸Špolygon æ–¹æ³•ã€‚å¯¹åº”centerï¼ŒextDataï¼Œ radiusï¼Œoptionséƒ½ä¼šæœ‰ä¸ªgetï¼Œsetæ–¹æ³•ã€‚hideï¼Œshowæ§åˆ¶éšè—ï¼Œè¿˜åœ¨mapä¸­ã€‚setMapåŒä¸Šã€‚getBoundsï¼Œåœ†å¤–åˆ‡çŸ©å½¢èŒƒå›´å¯¹è±¡ï¼Œè¿”å›Boundsç±»å‹ã€‚contains(point:LngLat)ï¼Œç‚¹æ˜¯å¦åœ¨åœ†å†…ã€‚ äº‹ä»¶ç±»å‹ç±»ä¼¼polygon å…·ä½“å¯å‚è€ƒ AMap.Polyline æ„é€ ï¼šAMap.Marker({ markeroptions }) å¸¸ç”¨é€‰é¡¹ï¼Œä¸polygonå·®ä¸å¤šã€‚å¤šä¸€äº›çº¿æ¡ç›¸å…³çš„å†…å®¹ï¼Œå…·ä½“å¯å‚è€ƒ æ–¹æ³•å’Œäº‹ä»¶ä¸polygonå·®ä¸å¤š å¸¸ç”¨å›¾å±‚å›¾å±‚æ˜¯ä½äºæœ€åº•å±‚çš„æ¨¡å—ï¼Œä»–å¯èƒ½åœ¨åœ°å›¾ä¸Šçš„å…¶ä»–ç‰©ä»¶è¿˜æ²¡åŠ è½½å®Œå°±å·²ç»ç”Ÿæˆäº†ã€‚å›¾å±‚éƒ½éœ€è¦åœ°å›¾ä»¥pluginçš„å½¢å¼å¼•è¿›ã€‚ AMap.Heatmapheatmapæ˜¯ä¸ªpluginï¼Œéœ€è¦æ·»åŠ pluginï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­ç”ŸæˆAMap.Heatmapå®ä¾‹ã€‚ const heatmap; map.plugin([&quot;AMap.Heatmap&quot;], function() { heatmap = new AMap.Heatmap(map, { radius: 25, //ç»™å®šåŠå¾„ opacity: [0, 0.8] }); }); ä¸Šé¢çš„configï¼ŒåŒ…å«radius``gradient``opacity``zooms(æ”¯æŒçš„ç¼©æ”¾çº§åˆ«ï¼Œä¸åœ¨èŒƒå›´å†…ï¼Œå°±ä¸æ˜¾ç¤ºçƒ­åŠ›å›¾äº†)æ¸å˜å¯ä»¥æŒ‰ç…§å¦‚ä¸‹è®¾ç½® gradient: { 0.4: &apos;red&apos;, 0.8: &apos;yellow&apos;, 1: &apos;blue&apos;} æ–¹æ³•ä¸è¦†ç›–ç‰©çš„å·®ä¸å¤šï¼Œé™¤äº†ï¼Œ addDataPoint(lng: Lng, lat: Lat, count: number) setDataSet(data: obj, url:jsonpæ ¼å¼æ•°æ®çš„æœåŠ¡åœ°å€ï¼ŒurlDataParser:å¯ä»¥ä¼ é€’å‡½æ•°è¿›è¡Œæ•°æ®è½¬åŒ–) // è¿™ä¸¤ä¸ªå¯ä»¥é…åˆzoomï¼Œä¸åŒçš„zoomï¼Œçƒ­åŠ›å›¾å¯¹åº”çš„æ•°æ®é›†ä¸åŒã€‚ å…¶ä¸­ï¼Œdataæ ¼å¼ä¸ºï¼š { max: number, data: [ { lng: 116.7, lat: 39.9, count: 10 }, { lng: 116.7, lat: 39.9, count: 10 }], } AMap.CustomLayeråŒæ ·éœ€è¦pluginæ¥å¼•å…¥ã€‚ ç»™å‡ºçš„å±æ€§å’Œæ–¹æ³•å¾ˆå°‘ï¼Œä½†æ˜¯åŠŸèƒ½å¼ºå¤§ï¼Œéœ€è¦è‡ªå·±å¼€å‘ï¼Œå‚è€ƒå®ä¾‹ ä¸€èˆ¬æ˜¯è‡ªå·±åšä¸€äº›canvasï¼Œç„¶åæŒ‚è½½åœ¨mapä¸Šå³å¯ã€‚è‡ªå®šä¹‰å›¾å±‚æœ‰ä¸ªrenderå±æ€§ï¼Ÿä½¿å…¶ç­‰äºç»˜åˆ¶å‡½æ•°ï¼Œå°±å¯ä»¥åœ¨åœ°å›¾ä¸Šç»˜åˆ¶å‡ºæ¥ã€‚ æœç´¢æœåŠ¡æ”¯æŒæœç´¢æœåŠ¡è„±ç¦»åœ°å›¾ä½¿ç”¨ï¼Œå³ä½¿ç”¨æœç´¢æœåŠ¡ä¸å†éœ€è¦å…ˆå®ä¾‹åŒ–åœ°å›¾ã€‚é€šè¿‡AMap.pluginæ–¹æ³•ï¼ŒåŠ è½½éœ€è¦çš„æœåŠ¡ AMap.Autocomplete å¸¸ç”¨é€‰é¡¹ï¼šcity:è¾“å…¥æç¤ºè¢«é™å®šçš„åŸå¸‚citylimit: æ˜¯å¦å¼ºåˆ¶é™åˆ¶åœ¨è®¾ç½®çš„åŸå¸‚å†…æœç´¢input:æŒ‡å®šä¸€ä¸ªè¾“å…¥æ¡†ï¼Œå†…å®¹åˆ™ä½œä¸ºinputçš„idï¼Œåœ¨inputè¾“å…¥æ–‡å­—åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªä¸‹æ‹‰é€‰æ‹©åˆ—è¡¨ã€‚ searchæ–¹æ³•ï¼Œå¯ä»¥ç»“åˆä»–çš„searchæ–¹æ³•ï¼Œè·å–æ•°æ®ï¼Œç„¶åè‡ªå·±renderæ ·å¼~~ AutocompleteResultå¯¹è±¡ï¼š { infoï¼š çŠ¶æ€è¯´æ˜, count: è¾“å…¥æç¤ºæ¡æ•°, tips: [ { name: åç§°, district: æ‰€å±åŒºåŸŸ, ,adcode: åŒºåŸŸç¼–ç }, { name: åç§°, district: æ‰€å±åŒºåŸŸ, ,adcode: åŒºåŸŸç¼–ç }... ] } é€šå¸¸autocompleteé…åˆplaceSearchè¿›è¡Œä½¿ç”¨çš„ AMap.PlaceSearch å¸¸ç”¨é€‰é¡¹ï¼šcity:è¾“å…¥æç¤ºè¢«é™å®šçš„åŸå¸‚citylimit: æ˜¯å¦å¼ºåˆ¶é™åˆ¶åœ¨è®¾ç½®çš„åŸå¸‚å†…æœç´¢type:å…´è¶£ç‚¹ç±»åˆ«ï¼Œå¯ä»¥é€šè¿‡setTypeè®¾ç½®pageSize:å•é¡µæ˜¾ç¤ºç»“æœæ¡æ•°extensions: â€˜allâ€™ è¿”å›åŸºæœ¬+è¯¦ç»†ä¿¡æ¯panel&amp;renderStyleç»“æœåˆ—è¡¨çš„htmlå®¹å™¨idï¼Œæˆ–è€…å®¹å™¨å…ƒç´ ï¼Œç»“æœåˆ—è¡¨å°†åœ¨ç»™å‡ºçš„å®¹å™¨ä¸­è¿›è¡Œå±•ç¤ºï¼Œè‡ªå·±å¯ä»¥renderæ ·å¼ã€‚ å¯ç”¨æ–¹æ³•è§å‚è€ƒå§ ä¸Šä¸ªsearchä½¿ç”¨ç¤ºä¾‹ï¼š htmlï¼š &lt;img className={styles.searchIcon} src={searchIcon} alt=&quot;search&quot; onClick={() =&gt; this.handleSearch()} /&gt; js: handleSearch() { // this.state.placeSearchæ˜¯ä¸ªAMap.Autocompleteå®ä¾‹ this.state.placeSearch.search(this.refs.searchInput.value, this.handleSearchSelect); } handleSearchSelect(search, result) { if (result.info === &apos;OK&apos;) { // mapInstanceæ˜¯ä¸ªå°è£…äº†AMapçš„å¯¹è±¡ã€‚ const mapIns = mapInstance.getter(); // è‡ªå®šä¹‰æœç´¢ç»“æœçš„markeræ ·å¼ã€‚å¹¶ç»˜åˆ¶åœ¨åœ°å›¾ä¸Š this.generateSearchMarkers(result.poiList); if (result.poiList.pois.length &gt; 0) { const { lng, lat } = result.poiList.pois[0].location; // å°†mapçš„ä¸­å¿ƒå®šä½åˆ°è·å–åˆ°çš„ç¬¬ä¸€ä¸ªpoiçš„ä½ç½®ä¸Šã€‚ mapIns.setCenter([lng, lat]); mapIns.zoomIn(); } } } å¦‚æœæŸ¥åˆ°ç»“æœsearchResultæœ‰ä»¥ä¸‹å†…å®¹ï¼š å…¶ä»–è¿˜æœ‰å¥½å¤šå…·ä½“çš„æœç´¢çš„æœåŠ¡ã€‚ç”±äºæ²¡æœ‰ç”¨åˆ°ï¼Œå°±æ²¡çœ‹ã€‚ã€‚ã€‚ ä¿¡æ¯çª—ä½“AMap.InfoWindowç”¨äºåœ¨åœ°å›¾ä¸Šå¼¹å‡ºä¸€ä¸ªè¯¦ç»†ä¿¡æ¯å±•ç¤ºçª—ä½“ï¼Œåœ°å›¾ä¸Šåªå…è®¸åŒæ—¶å±•ç¤º1ä¸ªä¿¡æ¯çª—ä½“ å±æ€§isCustomï¼š æ˜¯å¦è‡ªå®šä¹‰çª—ä½“ï¼Œtrue åˆ™å®Œå…¨æŒ‰ç…§contentä¸­çš„è§„å®šæ¥æ˜¾ç¤ºautoMoveï¼š å°†çª—ä½“å®Œå…¨å±•ç°åœ¨è§†å›¾ä¸­ã€‚closeWhenClickMap: é¼ æ ‡ç‚¹å‡»åœ°å›¾åæ˜¯å¦å…³é—­ä¿¡æ¯çª—ä½“position: ä¿¡æ¯çª—ä½“æ˜¾ç¤ºä½ç½®ï¼Œç±»å‹ä¸ºç»çº¬åº¦å¯¹è±¡ æ–¹æ³•äº‹ä»¶ç±»ä¼¼polygonï¼Œæœ‰ä¸€äº›å±æ€§çš„getï¼Œsetæ–¹æ³•ï¼Œopenï¼Œcloseæ–¹æ³•ã€‚ å®šä½AMap.CitySearché¡¹ç›®ä¸­ç”¨åˆ°è¿™ä¸ªapiã€‚å®ƒä¸»è¦æ˜¯æ ¹æ®ipè¿”å›å¯¹åº”çš„åŸå¸‚ä¿¡æ¯ï¼Œæ ¹æ®è¾“å…¥ipæˆ–è‡ªåŠ¨è·å–ipæ¥è·å–åŸå¸‚ä¿¡æ¯ã€‚è¯¥apiä¹Ÿæ˜¯ä¸ªpluginï¼Œå¯ä»¥åœ¨åˆå§‹loaderåœ°å›¾çš„æ—¶å€™ï¼Œå°±å°†å…¶é…ç½®è¿›å»ï¼Œå°†è„šæœ¬åŠ è½½æ—¶çš„ä»£ç ã€‚ ä¸¤ä¸ªæ–¹æ³•ï¼šgetLocalCity((status, citySearchResult) =&gt; {â€¦})getCityById(ip, (status, citySearchResult) =&gt; {}) ä¾‹å­ï¼š // citysearchéƒ¨åˆ†ä»£ç ï¼Œçœç•¥åœ°å›¾å®ä¾‹äº†ï¼Œç”¨mapInsä»£æ›¿ citysearch.getLocalCity((status, result) =&gt; { if (status === &apos;complete&apos; &amp;&amp; result.info === &apos;OK&apos;) { if (result &amp;&amp; result.city &amp;&amp; result.bounds) { const city = R.slice(0, -1, result.city); const cindex = R.indexOf(city, R.pluck(&apos;cityName&apos;, cityList)); const ccode = R.pluck(&apos;cityCode&apos;, cityList); if (cindex !== -1 &amp;&amp; city !== &apos;åŒ—äº¬&apos;) { mapIns.setCity(city); mapIns.setZoom(11); } } } }); citySearchResult çš„å±æ€§ï¼šcityï¼Œ bounds ä½ç½®è§£æAMap.GeocoderGeocoderæ˜¯è¿›è¡Œåœ°å€æè¿°ä¸åœ°ç†åæ ‡é—´çš„ç›¸äº’è½¬æ¢ã€‚ä¹Ÿå°±æ˜¯ï¼Œç»™å‡ºä¸€ä¸ªåœ°å€åç§°ï¼Œè½¬æ¢ä¸ºåœ°ç†åæ ‡çš„ç»çº¬åº¦ç­‰ä¿¡æ¯ã€‚æˆ–è€…ç»™å‡ºä¸€ä¸ªç»çº¬åº¦ï¼Œç¡®å®šè¿™ä¸ªç‚¹çš„åœ°å€åç§°ä¿¡æ¯ã€‚ ç›¸å…³æ–¹æ³•ï¼š è·å–åœ°ç†ç¼–ç ï¼šgetLocation(address:String, (status:String,result:info/GeocodeResult) =&gt; {}) é€†åœ°ç†ç¼–ç ï¼šgetAddress(location:LngLat|Array.,(status:String,result:info/ReGeocodeResult) =&gt; {})// æœ€å¤š20ä¸ªåœ°å€æ•°ç»„ã€‚ sç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯é€†åœ°ç†ç¼–ç ï¼Œæ¯”å¦‚è‡ªå·±åšä¸€ä¸ªåœ¨åœ°å›¾ä¸Šç‚¹å‡»ï¼Œç„¶åæ‰¾å‡ºè¯¥ä½ç½®çš„ç›¸å…³ä¿¡æ¯ã€‚é€†åœ°ç†ç¼–ç çš„è¿”å›ç»“æœå±æ€§ï¼šæƒ³å±•ç¤ºä»€ä¹ˆï¼Œå°±ä»ä»¥ä¸‹é€‰æ‹©å§","tags":[{"name":"js","slug":"js","permalink":"https://misssweety.github.io/tags/js/"},{"name":"åœ°å›¾api","slug":"åœ°å›¾api","permalink":"https://misssweety.github.io/tags/åœ°å›¾api/"},{"name":"æ€»ç»“","slug":"æ€»ç»“","permalink":"https://misssweety.github.io/tags/æ€»ç»“/"}]},{"title":"css3å®ç°3dæ•ˆæœ","date":"2017-05-15T08:34:12.000Z","path":"2017/05/15/css3å®ç°3dæ•ˆæœ/","text":"css3å®ç°3Dæ•ˆæœç›¸å…³å±æ€§ transform: rotateX(â€¦) transfrom-origin: left center; transform-style: preserve-3d; perspective: 200px; perpective-origin: left center; backface-visibility: true; 3dæ•ˆæœåŸºç¡€çŸ¥è¯†ä¸€èˆ¬æ˜¯åœ¨æ—‹è½¬åæ‰èƒ½è¡¨ç°å‡º3dæ•ˆæœï¼Œcssä¸­è§„å®šçš„æ—‹è½¬è§„åˆ™å¦‚ä¸‹ï¼š alt axis rotateXæ˜¯ä»¥å±å¹•çš„æ°´å¹³æ–¹å‘ä¸ºè½´æ—‹è½¬ï¼ŒrotateYæ˜¯ä»¥å±å¹•çš„å‚ç›´æ–¹å‘ä¸ºè½´ï¼ŒrotateZæ˜¯ä»¥ä¸å±å¹•å¹³é¢å‚ç›´çš„æ–¹å‘ä¸ºè½´ã€‚å…¶å®rotatex rotateYå·²ç»èƒ½å®ç°3dæ•ˆæœäº†ï¼Œä½†æ˜¯ä¸æ˜¯å¾ˆç›´è§‚ã€‚æ­é…ä¸Šperspectiveï¼Œperfectï¼ perspectiveå«ä¹‰ï¼šé€è§†æ•ˆæœã€‚æŒ‡å®šäº†è§‚å¯Ÿè€…ä¸z=0å¹³é¢çš„è·ç¦»ï¼Œä½¿å…·æœ‰ä¸‰ç»´ä½ç½®å˜æ¢çš„å…ƒç´ äº§ç”Ÿé€è§†æ•ˆæœã€‚ç­‰åŒäºç»˜ç”»ä¸­çš„1ç‚¹é€è§†||å¹³è¡Œé€è§†ã€‚ä¸€ä¸ªç‰©ä½“å¦‚æœz-indexä¸ºæ­£ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ç”»å¸ƒä¸­å®é™…çœ‹åˆ°çš„å°±è¦åå¤§ã€‚å¦‚ä¸‹ç¬¬ä¸€ä¸ªå›¾ã€‚å¦‚æœä¸€ä¸ªç‰©ä½“çš„z-indexä¸ºè´Ÿï¼Œé‚£ä¹ˆæ˜¾ç¤ºåœ¨ç”»å¸ƒè§†å›¾ä¸­ï¼Œåˆ™åå°ï¼Œå¦‚ç¬¬äºŒä¸ªå›¾ alt perspective ä¸¤ç§å†™æ³•:aï¼šperspectiveï¼š300px;bï¼štransform: perspective(300px) rotateX(aa); åŒºåˆ«ï¼šç¬¬ä¸€ä¸ªéœ€è¦å†™åœ¨ä¸€ä¸ªçˆ¶çº§å…ƒç´ ä¸Šï¼Œä»–è§„å®šäº†è¿™ä¸ªçˆ¶çº§å…ƒç´ çš„é€è§†ç‚¹ä½ç½®ï¼Œæ¢ä¸ªè§’åº¦è¯´ï¼Œå½“ä¸ºå…ƒç´ è§„å®šperspective å±æ€§æ—¶ï¼Œå…¶ç›´æ¥å­å…ƒç´ ä¼šè·å¾—é€è§†æ•ˆæœï¼Œè€Œä¸æ˜¯å…ƒç´ æœ¬èº«ã€‚ç¬¬äºŒä¸ªå¯ä»¥ç›´æ¥ä½œç”¨åœ¨å½“å‰å…ƒç´ ä¸Šï¼Œä¹Ÿå¯ä»¥ç»“åˆå…¶ä»–transformå±æ€§ï¼Œè§„å®šäº†å½“å‰å…ƒç´ çš„é€è§†ç‚¹ä½ç½®ï¼Œå¯¹å…¶ä»–å…ƒç´ æ— å½±å“ã€‚&nbsp;&nbsp;&nbsp;&nbsp;perspective å€¼è¶Šå¤§ï¼Œ3dæ•ˆæœè¶Šä¸æ˜æ˜¾ï¼›è¶Šå°è¶Šæ˜æ˜¾ã€‚æƒ³åƒæˆé•œå¤´åˆ°ç‰©ä½“çš„è·ç¦»ï¼Œè¶Šè¿‘è¶Šèƒ½çœ‹å‡ºé«˜ä½èµ·ä¼ï¼Œè¶Šè¿œçº¿æ¡å±•ç¤ºçš„è¶Šå¹³ç¼“ã€‚ä¸¤ç§å†™æ³•ä»¥åŠperspectiveå¯¹æ¯”ï¼ŒæŸ¥çœ‹ç¤ºä¾‹ -webkit-perspective-originæ¶ˆå¤±ç‚¹çš„ä½ç½®ï¼Œè¯­æ³•ï¼š-webkit-perspective-origin: xpos yposxpos,ypos å¯ä»¥é€‰æ‹©å…³é”®å­—ï¼Œleft|right|center top|bottom|center ã€‚å¦‚æœæ˜¯å…³é”®å­—ï¼Œåˆ™æ˜¯å¦å¯¹åº”xyæ— å…³ç´§è¦ï¼Œæµè§ˆå™¨ä¼šè‡ªå·±é€‰æ‹©ã€‚å¦‚æœæ˜¯æ•°å€¼ï¼Œç™¾åˆ†æ¯”æˆ–è€…åƒç´ ï¼Œåˆ™è¦æŒ‰ç…§xï¼Œyçš„é¡ºåºå†™ã€‚å‚è€ƒå®ä¾‹ backface-visibilitybackface-visibility å±æ€§å®šä¹‰å½“å…ƒç´ ä¸é¢å‘å±å¹•æ—¶æ˜¯å¦å¯è§ã€‚æœ‰äº›æ—¶å€™å‰é¢çš„divå¦‚æœè®¾ç½®äº†é€æ˜åº¦ï¼Œå°±ä¼šçœ‹åˆ°åé¢çš„å¯¹è±¡ï¼Œè¿™æ˜¯å¯ä»¥å°†è¯¥å±æ€§è®¾ä¸ºhiddenå°±å¯ä»¥äº†ã€‚é»˜è®¤ï¼švisible transformè¿™é‡Œä¸»è¦æå’Œ3dæœ‰å…³çš„å‡ ä¸ªå±æ€§ rotateX( angle ) rotateY( angle ) rotateZ( angle ) translateZ( tz ) scaleZ( sz ) translateZï¼ŒscaleZä¼šå°†å¯¹è±¡åœ¨ä¸å±å¹•å¹³è¡Œçš„æ–¹å‘å˜åŒ–ç‰©ä½“ã€‚ä¼šæœ‰å¤±çœŸã€‚ ä¹Ÿæœ‰ç»¼åˆçš„å†™æ³•ï¼š translate3d( tx, ty, tz ) scale3d( sx, sy, sz ) rotate3d( rx, ry, rz, angle ) rotate3dè¿™é‡Œï¼Œå‰ä¸‰ä¸ªè§„å®šæ—‹è½¬è½´åœ¨ç©ºé—´ä¸­çš„æ–¹å‘ï¼Œæ¯”å¦‚xè½´ï¼Œå°±æ˜¯ï¼ˆ1ï¼Œ0ï¼Œ0ï¼‰rotate3d(1,0,0,90deg) === rotateX(90deg) transform-originè§„å®šå˜åŒ–çš„ä¸­å¿ƒç‚¹ã€‚ä¸€èˆ¬éƒ½æ˜¯å¯¹è±¡çš„é‡å¿ƒã€‚å¯ä»¥ä¿®æ”¹æˆä»»æ„çš„å€¼ï¼Œä»¥æ—‹è½¬ä¸ºä¾‹: html &lt;div class=&quot;test1&quot;&gt;test&lt;/div&gt; &lt;div class=&quot;test2&quot;&gt;test2&lt;/div&gt; css div { width:200px; height: 200px; background: rgba(255, 0, 0,.5); margin: 20px auto; animation: mymove 3s infinite; } .test1{ transform: perspective(500px) rotateY(0deg); } .test2 { transform-origin: left; transform: perspective(500px) rotateY(0deg); } @keyframes mymove { from {transform: perspective(500px) rotateY(0deg);} to {transform:perspective(500px) rotateY(360deg);} } è¡¨ç°æ˜¯ï¼štest1å°†æ²¿ç€divçš„å®½åº¦çš„ä¸€åŠä¸ºè½´æ—‹è½¬ã€‚test2åˆ™æ²¿ç€æœ€å·¦è¾¹çš„è¾¹æ¡†ä¸ºè½´æ—‹è½¬ã€‚å‚è€ƒå®ä¾‹ å®ä¾‹ä¸€ï¼šç¿»ç‰Œæ•ˆæœ&lt;div class=&quot;container&quot;&gt; &lt;div id=&quot;card&quot;&gt; &lt;div class=&quot;front&quot;&gt;1&lt;/div&gt; &lt;div class=&quot;back&quot;&gt;2&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; //css,è®¾ç½®ä¸€ä¸ªcontainerï¼Œä»–æ˜¯ä¸ªå…·æœ‰3dæ•ˆæœçš„box .container { width: 200px; height: 200px; position: relative; perspective: 800px; border: 1px solid #888; margin: 40px auto; } #card { width: 100%; height: 100%; position: absolute; transform-style: preserve-3d; animation: flip 2s infinite; transform-origin: left center; } #card figure { display: block; width: 100%; height: 100%; position: absolute; text-align: center; color: white; font-size: 40px; line-height: 200px; backface-visibility: hidden; } .front { background: tomato; } .back { background: lightblue; transform: rotateY( 180deg ); } @keyframes flip { 0% { transform: rotateY( 0deg ); } 50% { transform: rotateY( 180deg ) translateX(-100%); } 100% { transform: rotateY( 360deg ) } } containerä¸­çš„card divå…·æœ‰3dæ•ˆæœï¼Œå¦‚æœæƒ³è®©cardä¸­çš„divç­‰ä¹Ÿæœ‰3då˜åŒ–æ•ˆæœï¼Œå¯ä»¥é€šè¿‡å¯¹cardè®¾ç½®ï¼š transform-style: preserve-3d; å°†å…¶çˆ¶å…ƒç´ çš„3dé€è§†é›†æˆä¸‹æ¥ï¼Œå¹¶ä½¿æ‰€æœ‰å­å…ƒç´ ä¿æŒåœ¨åŒä¸€ä¸ª3dç©ºé—´ä¸­ã€‚èƒŒé¢é‚£å¼ ç‰Œéœ€è¦ç¿»åˆ°èƒŒé¢å»ï¼Œä¹Ÿå°±æ˜¯rotateY( 180deg );å‚è€ƒç¤ºä¾‹ ###å®ä¾‹äºŒï¼šæ—‹è½¬çš„æ­£æ–¹ä½“å‚è€ƒç¤ºä¾‹å…­ä¸ªdivæ‹¼å‡‘èµ·æ¥çš„ã€‚åˆ†åˆ«åœ¨xyæ–¹å‘ä¸Šè¿›è¡Œç¿»è½¬ï¼Œç«‹åˆ°å¯¹åº”çš„æ–¹å‘ã€‚æ­¤æ—¶åœ¨æ·»åŠ ä¸€ä¸ªtranslateZæ‰èƒ½æ˜¾ç°å‡ºä»–ä»¬çš„æ•ˆæœã€‚å¦åˆ™éƒ½æ˜¯å †åœ¨zindexä¸º0çš„ä½ç½®ï¼Œä»€ä¹ˆéƒ½çœ‹ä¸è§. åˆ«çš„é…ç½®åŠæ€æƒ³åŒä¸Šé¢çš„ç¿»ç‰Œ ###å¸¸è§é—®é¢˜ï¼š1.è®¾äº†transfrom-style:preserve-3dä¸ºä»€ä¹ˆè¿˜ä¸å¥½ä½¿ã€‚ è¿™ä¸ªæ—¶å€™éœ€è¦æŸ¥çœ‹çˆ¶å…ƒç´ æ˜¯å¦è¿˜è®¾äº†ï¼Œoverflowï¼Œfilterï¼Œclipï¼Œisolationï¼Œclip-pathï¼Œmask-imageï¼Œmask-box-image-sourceï¼Œ mix-blend-modeï¼Œå¦‚æœä¸æ˜¯é»˜è®¤å€¼çš„ï¼Œä¼šå°†transfrom-style:preserve-3d å¤±æ•ˆã€‚åŸå› æ˜¯å‰å‡ ä¸ªå±æ€§ï¼Œä¼šåˆ›é€ ä¸€ä¸ªflattençš„boxï¼Œè€Œpreserve-3dæ˜¯ç”Ÿæˆstacking context çš„ã€‚","tags":[{"name":"css","slug":"css","permalink":"https://misssweety.github.io/tags/css/"},{"name":"perspective","slug":"perspective","permalink":"https://misssweety.github.io/tags/perspective/"},{"name":"3Dæ•ˆæœ","slug":"3Dæ•ˆæœ","permalink":"https://misssweety.github.io/tags/3Dæ•ˆæœ/"}]},{"title":"è¯»ä¹¦ç¬”è®°-é—­åŒ…","date":"2017-05-08T03:11:08.000Z","path":"2017/05/08/è¯»ä¹¦ç¬”è®°-é—­åŒ…/","text":"ç»å…¸é—­åŒ…é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå¼•ç”¨ï¼‰ï¼Œå³ä½¿ä»–æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œä»–ä¹Ÿå¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸã€‚å°±æ˜¯ç”¨è¿™ä¸ªå¼•ç”¨æ¥è®¿é—®ã€‚å‚è€ƒ function foo () { const a = 9; const bar = () =&gt; {return a;} return bar; } const aa = foo(); console.log(aa()); è¿”å›9ï¼› è§£æåœ¨foo()æ‰§è¡Œåï¼Œå…¶è¿”å›å€¼èµ‹å€¼ç»™å˜é‡aaï¼Œå¹¶æ‰§è¡Œaa()ï¼Œå…¶å®æ˜¯é€šè¿‡ä¸åŒçš„æ ‡è¯†ç¬¦å¼•ç”¨è°ƒç”¨äº†å†…éƒ¨å‡½æ•°bar()ã€‚baråœ¨å…¶è¯æ³•ä½œç”¨åŸŸå¤–è¢«æ­£å¸¸æ‰§è¡Œäº†ã€‚è€Œä¸”fooå‡½æ•°æ‰§è¡Œåï¼Œé€šå¸¸æ•´ä¸ªfooå†…éƒ¨ä½œç”¨åŸŸéƒ½è¢«é”€æ¯ï¼Œä½†æ˜¯ç”±äºbarçš„å­˜åœ¨ï¼Œæ˜¯çš„å†…éƒ¨ä½œç”¨åŸŸä¾ç„¶å­˜åœ¨ï¼Œç»„ç»‡äº†åƒåœ¾å›æ”¶ã€‚bar() æ‹¥æœ‰æ¶µç›–foo()å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œä½¿å¾—è¯¥ä½œç”¨åŸŸèƒ½ä¸€ç›´å­˜æ´»ã€‚bar()ä¾ç„¶æŒæœ‰å¯¹è¯¥ä½œç”¨åŸŸçš„é¥®ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨å°±å«åšé—­åŒ…ã€‚ å¦‚æœå°†å‡½æ•°å½“ä½œç¬¬ä¸€çº§çš„å€¼ç±»å‹è¿›è¡Œä¼ é€’ï¼Œå…¶å®å°±ä¼šæœ‰é—­åŒ…çš„å­˜åœ¨ã€‚ä¸€äº›å¼‚æ­¥æˆ–è€…åŒæ­¥æ“ä½œä¸­ï¼Œä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œä¹Ÿæ˜¯åœ¨ä½¿ç”¨é—­åŒ…ã€‚ æ— å¤„ä¸åœ¨ æœ¬è´¨ä¸Šæ— è®ºä½•æ—¶ä½•åœ°ï¼Œå¦‚æœå°†å‡½æ•°(è®¿é—®å®ƒä»¬å„è‡ªçš„è¯æ³•ä½œç”¨åŸŸ)å½“ä½œç¬¬ä¸€ çº§çš„å€¼ç±»å‹å¹¶åˆ°å¤„ä¼ é€’ï¼Œä½ å°±ä¼šçœ‹åˆ°é—­åŒ…åœ¨è¿™äº›å‡½æ•°ä¸­çš„åº”ç”¨ã€‚åœ¨å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬å™¨ã€ Ajaxè¯·æ±‚ã€è·¨çª—å£é€šä¿¡ã€Web Workersæˆ–è€…ä»»ä½•å…¶ä»–çš„å¼‚æ­¥(æˆ–è€…åŒæ­¥)ä»»åŠ¡ä¸­ï¼Œåªè¦ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ä½¿ç”¨é—­åŒ…. æœ€å¸¸è§çš„è€ƒé¢˜ for (var i = 1; i&lt;= 5; i++) { setTimeout(() =&gt;console.log(i), 1000*i); } è¾“å‡ºæ˜¯ï¼šäº”ä¸ª6 åŸå› ï¼šiæ˜¯å…¨å±€å˜é‡ï¼ŒsetTimeoutæ˜¯ç­‰å¾…æ‰§è¡Œã€‚å»¶è¿Ÿå‡½æ•°çš„å›è°ƒä¼šåœ¨å¾ªç¯ç»“æŸæ—¶æ‰æ‰§è¡Œ,æ‰§è¡Œçš„æ—¶å€™iå·²ç»è·³å‡ºå¾ªç¯ï¼Œç¬¬ä¸€ä¸ªæ»¡è¶³çš„å€¼å°±æ˜¯6.æ‰€ä»¥è¾“å‡º5ä¸ª6. ä¿®æ”¹ï¼šå°†var æ”¹ä¸ºletã€‚åªåœ¨å½“æ—¶çš„å¾ªç¯ä¸­ç”Ÿæ•ˆã€‚å¯ä»¥æ¯ç§’è¾“å‡º12345 å¦å¤–ä¸€ä¸ªåº”ç”¨ï¼šæ¨¡å— ä»æ–¹ä¾¿è§‚å¯Ÿçš„è§’åº¦çœ‹ï¼Œä¸€ä¸ªä»å‡½æ•°è°ƒç”¨ æ‰€è¿”å›çš„ï¼Œåªæœ‰æ•°æ®å±æ€§è€Œæ²¡æœ‰é—­åŒ…å‡½æ•°çš„å¯¹è±¡å¹¶ä¸æ˜¯çœŸæ­£çš„æ¨¡å—ã€‚ å®ä¾‹ï¼š function CoolModule() { var something = &quot;cool&quot;; var another = [1, 2, 3]; function doSomething() { console.log( something ); } function doAnother() { console.log( another.join( &quot; ! &quot; ) ); } return { doSomething: doSomething, doAnother: doAnother }; } var foo = CoolModule(); foo.doSomething(); // cool foo.doAnother(); // 1 ! 2 ! 3 ä¸Šä¸€ä¸ªç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸€ä¸ªå«ä½œ CoolModule() çš„ç‹¬ç«‹çš„æ¨¡å—åˆ›å»ºå™¨ï¼Œå¯ä»¥è¢«è°ƒç”¨ä»»æ„å¤šæ¬¡ï¼Œ æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—å®ä¾‹ã€‚å¦‚æœæƒ³å®ç°å•ä¾‹æ¨¡å¼ï¼šå°±æ˜¯å°†coolmodule è½¬æ¢ä¸ºiifeï¼Œå¹¶èµ‹äºˆä¸€ä¸ªæ ‡è¯†ç¬¦ï¼š var foo = (...)(); foo.doSomething(); foo.doAnother(); ç»“æœåŒä¸Š æ¨¡å—æœ‰ä¸¤ä¸ªä¸»è¦ç‰¹å¾:(1)ä¸ºåˆ›å»ºå†…éƒ¨ä½œç”¨åŸŸè€Œè°ƒç”¨äº†ä¸€ä¸ªåŒ…è£…å‡½æ•°;(2)åŒ…è£…å‡½æ•°çš„è¿”å›å€¼å¿…é¡»è‡³å°‘åŒ…æ‹¬ä¸€ä¸ªå¯¹å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šåˆ›å»ºæ¶µç›–æ•´ä¸ªåŒ…è£…å‡½æ•°å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ã€‚ è¯æ³•ä½œç”¨åŸŸfunction foo() { console.log( a ); // 2 } function bar() { var a = 3; foo(); } var a = 2; bar(); è¾“å‡ºç»“æœï¼š2ã€‚è¯æ³•ä½œç”¨åŸŸï¼Œè¿è¡Œbarï¼Œåˆ°fooçš„æ—¶å€™ï¼Œè¿™é‡Œçš„aæ˜¯å…¨å±€å˜é‡çš„aï¼Œæ‰€ä»¥ä¸º2.","tags":[{"name":"js","slug":"js","permalink":"https://misssweety.github.io/tags/js/"},{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"https://misssweety.github.io/tags/é—­åŒ…/"}]},{"title":"linux ç›®å½•ç»“æ„","date":"2017-05-08T02:46:56.000Z","path":"2017/05/08/linuxæ–‡ä»¶ç›®å½•/","text":"åŸæ¥å­¦linuxçš„æ—¶å€™ï¼Œä¸ä¸Šå¿ƒï¼Œç°åœ¨åæ‚”è«åŠï¼Œå¼€å§‹è¡¥åŸºç¡€ã€‚é¦–å…ˆæ˜¯æœ€åŸºæœ¬çš„ç›®å½•ç»“æ„ã€‚linuxæ˜¯æ ‘çŠ¶ç»“æ„ æ ‡æ©˜è‰²ä¸ºé‡è¦ç›®å½• ç›®å½• æè¿° ï¼ æ ¹ç›®å½•ï¼Œæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„çš„æ ¹ç›®å½•ï¼Œä¸€èˆ¬åªæ”¾ç›®å½• /bin/ ç±»ä¼¼ /usr/bin å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶çš„ç›®å½•ï¼Œå¸¸ç”¨çš„lsï¼Œtarï¼Œmvï¼Œ catç­‰ /boot/ å¼•å¯¼ç¨‹åºæ–‡ä»¶ï¼Œæ”¾ç½®linuxç³»ç»Ÿå¯åŠ¨æ—¶ç”¨åˆ°çš„ä¸€äº›æ–‡ä»¶ /dev/ å­˜æ”¾linuxç³»ç»Ÿä¸‹çš„è®¾å¤‡æ–‡ä»¶ï¼Œè®¿é—®è¯¥ç›®å½•ä¸‹æŸä¸ªæ–‡ä»¶ï¼Œç›¸å½“äºè®¿é—®æŸä¸ªè®¾å¤‡ /etc/ ç³»ç»Ÿé…ç½®æ–‡ä»¶å­˜æ”¾çš„ç›®å½•,ä¸å»ºè®®åœ¨æ­¤ç›®å½•ä¸‹å­˜æ”¾å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‡è¦çš„é…ç½®æ–‡ä»¶ /home/ ç³»ç»Ÿé»˜è®¤çš„ç”¨æˆ·å®¶ç›®å½•ï¼Œæ–°å¢ç”¨æˆ·è´¦å·æ—¶ï¼Œç”¨æˆ·çš„å®¶ç›®å½•éƒ½å­˜æ”¾åœ¨æ­¤ç›®å½•ä¸‹, å»ºè®®å•ç‹¬åˆ†åŒºï¼Œå¹¶è®¾ç½®è¾ƒå¤§çš„ç£ç›˜ç©ºé—´ /lib/,/usr/lib/, /usr/local/lib/ ç³»ç»Ÿä½¿ç”¨çš„å‡½æ•°åº“çš„ç›®å½•ï¼Œç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦è°ƒç”¨ä¸€äº›é¢å¤–çš„å‚æ•°æ—¶éœ€è¦å‡½æ•°åº“çš„ååŠ©ï¼Œæ¯”è¾ƒé‡è¦çš„ç›®å½•ä¸º/lib/modules /lost+fount/ ç³»ç»Ÿå¼‚å¸¸äº§ç”Ÿé”™è¯¯æ—¶ï¼Œä¼šå°†ä¸€äº›é—å¤±çš„ç‰‡æ®µæ”¾ç½®äºæ­¤ç›®å½•ä¸‹ï¼Œé€šå¸¸è¿™ä¸ªç›®å½•ä¼šè‡ªåŠ¨å‡ºç°åœ¨è£…ç½®ç›®å½•ä¸‹ã€‚ /mnt/ ä¸´æ—¶æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚cdrom,uç›˜ç­‰ï¼Œç›´æ¥æ’å…¥å…‰é©±æ— æ³•ä½¿ç”¨ï¼Œè¦å…ˆæŒ‚è½½åä½¿ç”¨ /opt/ ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•, å¯é€‰åº”ç”¨è½¯ä»¶åŒ…ã€‚ /proc/ æ­¤ç›®å½•çš„æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œå¦‚ç³»ç»Ÿæ ¸å¿ƒï¼Œå¤–éƒ¨è®¾å¤‡ï¼Œç½‘ç»œçŠ¶æ€ï¼Œç”±äºæ•°æ®éƒ½å­˜æ”¾äºå†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸å ç”¨ç£ç›˜ç©ºé—´.æ¯”è¾ƒé‡è¦çš„ç›®å½•æœ‰/proc/cpuinfoã€/proc/interruptsã€/proc/dmaã€/proc/ioportsã€/proc/net/*ç­‰ /root/ è¶…çº§æƒé™ç”¨æˆ·çš„å®¶ç›®å½• /sbin:/usr/sbin:/usr/local/sbin æ”¾ç½®ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚fdiskã€shutdownã€mountç­‰ã€‚sbinç›®å½•ä¸‹çš„å‘½ä»¤ï¼Œæ™®é€šç”¨æˆ·éƒ½æ‰§è¡Œä¸äº†ã€‚ /tmp/ ä¸€èˆ¬ç”¨æˆ·æˆ–æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºä¸´æ—¶å­˜æ”¾æ–‡ä»¶çš„ç›®å½•,ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®,é‡è¦æ•°æ®ä¸å¯æ”¾ç½®åœ¨æ­¤ç›®å½•ä¸‹,åœ¨ç³»ç»Ÿé‡å¯æ—¶ç›®å½•ä¸­æ–‡ä»¶ä¸ä¼šè¢«ä¿ç•™ã€‚ /srv/ æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦è®¿é—®çš„æ•°æ®ç›®å½•ï¼Œå¦‚wwwæœåŠ¡éœ€è¦è®¿é—®çš„ç½‘é¡µæ•°æ®å­˜æ”¾åœ¨/srv/wwwå†… /usr/ é»˜è®¤è½¯ä»¶éƒ½ä¼šå­˜äºè¯¥ç›®å½•ä¸‹ã€‚ç”¨äºå­˜å‚¨åªè¯»ç”¨æˆ·æ•°æ®çš„ç¬¬äºŒå±‚æ¬¡ï¼›åŒ…å«ç»å¤§å¤šæ•°çš„(å¤š)ç”¨æˆ·å·¥å…·å’Œåº”ç”¨ç¨‹åºã€‚ /var/ å˜é‡æ–‡ä»¶â€”â€”åœ¨æ­£å¸¸è¿è¡Œçš„ç³»ç»Ÿä¸­å…¶å†…å®¹ä¸æ–­å˜åŒ–çš„æ–‡ä»¶ï¼Œå¦‚éšæ—¶æ›´æ”¹çš„æ—¥å¿—æ–‡ä»¶ /var/logï¼Œ/var/log/messageï¼š æ‰€æœ‰çš„ç™»å½•æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œ/var/spool/mailï¼š é‚®ä»¶å­˜æ”¾çš„ç›®å½•ï¼Œ /var/run: ç¨‹åºæˆ–æœåŠ¡å¯åŠ¨ /etc/ç›®å½•æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚å‚è€ƒå‚è€ƒäºŒ","tags":[{"name":"linux","slug":"linux","permalink":"https://misssweety.github.io/tags/linux/"}]},{"title":"exportç›¸å…³","date":"2017-04-18T03:01:45.000Z","path":"2017/04/18/exports/","text":"exports å’Œ module.exports çš„åŒºåˆ«exports æ˜¯å¼•ç”¨ module.exports çš„å€¼ã€‚module.exports è¢«æ”¹å˜çš„æ—¶å€™ï¼Œexportsä¸ä¼šè¢«æ”¹å˜ï¼Œè€Œæ¨¡å—å¯¼å‡ºçš„æ—¶å€™ï¼ŒçœŸæ­£å¯¼å‡ºçš„æ‰§è¡Œæ˜¯module.exportsï¼Œè€Œä¸æ˜¯exportsã€‚ æœ‰ä»¥å‡ ç‚¹éœ€è¦è®°ä½ï¼š module.exports åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ {}exports æ˜¯æŒ‡å‘çš„ module.exports çš„å¼•ç”¨require() è¿”å›çš„æ˜¯ module.exports è€Œä¸æ˜¯ exportså¦‚æœmodule.exports å½“å‰æ²¡æœ‰ä»»ä½•å±æ€§çš„è¯ï¼Œexportsä¼šæŠŠå±æ€§æ”¶é›†èµ·æ¥èµ‹ç»™module.exportsã€‚å¦‚æœmodule.exports æœ‰å±æ€§çš„è¯, exportsä¸­çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥ã€‚ foo.js exports.a = function(){ console.log(&apos;a&apos;) } module.exports = {a: 2} exports.a = 1 test.js var x = require(&apos;./foo&apos;); console.log(x.a); è¾“å‡º ï¼š2 å¦‚æœï¼šfoo.js ä¸ºï¼š exports.a = function(){ console.log(&apos;a&apos;) } exports.a = 1 test.js è¾“å‡ºï¼š1 å¦‚æœï¼šfoo.jsä¸ºï¼š exports.a = function(){ console.log(&apos;a&apos;) } test.js è¾“å‡ºï¼š[Function] é¦–å…ˆï¼Œnodeä¸­çš„require å¼•è¿›çš„æ˜¯module.exportsã€‚ã€‚ã€‚è§ç¬¬ä¸€ä¸ªå®ä¾‹ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼çš„å†™module.exportsï¼Œåˆ™è‡ªåŠ¨è¿æ¥exportsä¸module.exportsã€‚å¦‚æœæ˜¾ç¤ºçš„å†™äº†module.exportsï¼Œåˆ™ä¼šæ–­å¼€module.exports ä¸ exports çš„è”ç³»ã€‚ åº”ç”¨çš„è¯ï¼Œå¦‚æœåªæ˜¯å¯¼å‡ºæŸä¸ªå˜é‡æˆ–è€…æŸä¸ªåŠŸèƒ½ï¼Œç”¨exports.å±æ€§|æ–¹æ³•ã€‚å¦‚æœæ˜¯å¯¼å‡ºå¤šä¸ªå±æ€§æˆ–æ–¹æ³•æˆ–ä½¿ç”¨å¯¹è±¡æ„é€ æ–¹æ³•ï¼Œmodule.module æ¯”è¾ƒå¥½ã€‚ export default å’Œ export åŒºåˆ«1.exportä¸export defaultå‡å¯ç”¨äºå¯¼å‡ºå¸¸é‡ã€å‡½æ•°ã€æ–‡ä»¶ã€æ¨¡å—ç­‰2.ä½ å¯ä»¥åœ¨å…¶å®ƒæ–‡ä»¶æˆ–æ¨¡å—ä¸­é€šè¿‡import+(å¸¸é‡ | å‡½æ•° | æ–‡ä»¶ | æ¨¡å—)åçš„æ–¹å¼ï¼Œå°†å…¶å¯¼å…¥ï¼Œä»¥ä¾¿èƒ½å¤Ÿå¯¹å…¶è¿›è¡Œä½¿ç”¨3.åœ¨ä¸€ä¸ªæ–‡ä»¶æˆ–æ¨¡å—ä¸­ï¼Œexportã€importå¯ä»¥æœ‰å¤šä¸ªï¼Œexport defaultä»…æœ‰ä¸€ä¸ª4.é€šè¿‡exportæ–¹å¼å¯¼å‡ºï¼Œåœ¨å¯¼å…¥æ—¶è¦åŠ { }ï¼Œexport defaultåˆ™ä¸éœ€è¦ å¼•å…¥æ—¶ï¼šåŠ äº†defaultçš„å˜é‡ï¼Œå¯ä»¥èµ·ä»»æ„åå­—ï¼Œédefaultçš„éœ€è¦ä¸exportæ—¶çš„åå­—ç›¸åŒã€‚ module.exports vs exportcommonjsï¼šmodule.exports æ­é…çš„å¼•å…¥ï¼š requirees6: export æ­é…çš„å¼•å…¥ï¼š import æ™®é€šjsç¯å¢ƒä¸‹æ˜¯ä¸æ”¯æŒes6çš„è¯­æ³•çš„ï¼Œå¦‚æœæƒ³è¿™ä¹ˆç”¨ï¼Œéœ€è¦ç”¨babelç­‰è¿›è¡Œè½¬è¯‘ã€‚ es6 default export å…¶å®æ˜¯ä¸exports ç­‰ä»·çš„ï¼Œåªä¸è¿‡ default åªæ˜¯ä¸€ä¸ªä¿ç•™çš„åç§°ï¼Œå¯ä»¥æƒ³è±¡ä¸ºï¼Œexports ä¸€ä¸ªå±æ€§ï¼Œå±æ€§åä¸ºdefaultã€‚æ‰€ä»¥å¦‚æœæ˜¯åœ¨node.jsç¯å¢ƒä¸‹ï¼Œç”¨çš„export defaultï¼Œ å¼•ç”¨çš„æ—¶å€™ç”¨requireçš„è¯ï¼Œéœ€è¦è¿™ä¹ˆå†™ï¼š var bar = require(â€˜./inputâ€™).default; export vs export defaultè¿™ä¸¤ä¸ªåœ¨importçš„æ—¶å€™ï¼Œå‰è€…éœ€è¦ç”¨{} æ‰©èµ·æ¥ï¼Œæœ‰ç§è§£æ„çš„æ„Ÿè§‰ã€‚åè€…ä¸éœ€è¦{}æ‰©ã€‚","tags":[{"name":"node.js","slug":"node-js","permalink":"https://misssweety.github.io/tags/node-js/"},{"name":"js","slug":"js","permalink":"https://misssweety.github.io/tags/js/"}]},{"title":"Visual-Formatting-Model","date":"2017-04-17T04:00:00.000Z","path":"2017/04/17/Visual-Formatting-Model/","text":"1.è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ introductionè§†è§‰æ ¼å¼åŒ–æ¨¡å‹ï¼šUser Agent å¦‚ä½•åœ¨ Visual Mediaä¸‹å¤„ç†æ–‡æ¡£æ ‘ã€‚ è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ä¸­ï¼Œæ–‡æ¡£æ ‘ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ ¹æ®ç›’æ¨¡å‹ Box Model äº§ç”Ÿé›¶ä¸ªæˆ–å¤šä¸ªç›’ã€‚è¿™äº›ç›’çš„å¸ƒå±€ç”±ä»¥ä¸‹å†…å®¹æ§åˆ¶ï¼š ç›’çš„å°ºå¯¸å’Œç±»å‹ å®šä½ä½“ç³» Positioning Scheme ï¼ˆå¸¸è§„æµï¼Œæµ®åŠ¨å’Œç»å¯¹å®šä½ï¼‰ æ–‡æ¡£æ ‘ä¸­å…ƒç´ ä¹‹é—´çš„å…³ç³» å¤–éƒ¨ä¿¡æ¯ï¼ˆå¦‚ï¼šè§†å£å¤§å°ï¼Œå›¾ç‰‡çš„å›ºæœ‰å°ºå¯¸ç­‰ï¼‰ 1.1 è§†å£ viewportè¿ç»­åª’ä½“ Continuous Media ä¸Šå·¥ä½œçš„user agentä¸€èˆ¬ä¼šå‘ç”¨æˆ·æä¾›ä¸€ä¸ªviewportï¼ˆå±å¹•ä¸Šçš„ä¸€ä¸ªçª—å£æˆ–å…¶å®ƒå¯è§†åŒºåŸŸï¼‰æ¥å¸®åŠ©ç”¨æˆ·è®¿é—®æ–‡æ¡£ã€‚user agentå¯ä»¥åœ¨è°ƒæ•´è§†å£å¤§å°çš„åŒæ—¶æ”¹å˜æ–‡æ¡£çš„å¸ƒå±€ 1.2 åŒ…å«å— containing blocksCSS2.1ä¸­ï¼Œè®¸å¤šç›’çš„å®šä½å’Œå¤§å°éƒ½æ ¹æ®ä¸€ä¸ªåä¸ºåŒ…å«å— Containing Block çš„çŸ©å½¢ç›’çš„è¾¹ç¼˜æ¥è®¡ç®—ã€‚ç”Ÿæˆçš„ç›’ä¼šå……å½“å…¶åä»£ç›’çš„åŒ…å«å—ï¼›æˆ‘ä»¬ç§°ç›’ä¸ºå…¶åä»£â€œåˆ›å»ºâ€äº†åŒ…å«å—ã€‚è¯´â€œç›’çš„åŒ…å«å—â€å³æ˜¯è¯´â€œç›’æ‰€å¤„çš„åŒ…å«å—â€ï¼Œè€Œä¸æ˜¯ç›’æ‰€äº§ç”Ÿçš„åŒ…å«å—ã€‚ 2 ç›’çš„ç”Ÿæˆ Controlling Box GenerationdisplayæŒ‡å®šç›’çš„ç±»å‹ æœ‰å‡ ä¸ªæ¦‚å¿µï¼š block-level box: displayï¼šblock|table|list-item block box: é™¤äº†tableå—ç›’å’Œå¯æ›¿æ¢å…ƒç´ ï¼Œå…¶ä»–çš„éƒ½æ˜¯å—å®¹å™¨ç›’ã€‚ä¹Ÿæ˜¯å—ç›’ã€‚ block container box: ä¸€ä¸ªå—å®¹å™¨ç›’è¦ä¹ˆåªåŒ…å«å—çº§ç›’ï¼Œè¦ä¹ˆåˆ›å»ºä¸€ä¸ªè¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ Inline Formatting Context å¹¶åªåŒ…å«è¡Œå†…çº§ç›’ Inline-level Boxesã€‚ä¸ä¸€å®šæ˜¯blockçš„æ‰æ˜¯ï¼Œè¡Œå†…ä¹Ÿæ˜¯ã€‚æ‰€ä»¥å’Œå—çº§ç›’åªæ˜¯ä¸€éƒ¨åˆ†æœ‰äº¤é›†ã€‚ 3 å®šä½ä½“ç³» Position schemesåœ¨css2.1ä¸­ï¼Œä¸€ä¸ªboxæœ‰ä¸‰ç§æœºåˆ¶æ¥å¸ƒå±€ normal flowï¼šå—çº§formatting, è¡Œçº§formattingï¼Œç›¸å¯¹å®šä½ floatï¼šboxå…ˆæŒ‰ç…§normal flowæ”¾ç½®ï¼Œç„¶åä»æµä¸­è„±ç¦»å‡ºæ¥ï¼Œå¯èƒ½ä¼šå¯¹åé¢çš„æ’åºæœ‰å½±å“ absolute positionï¼šå®Œå…¨è„±ç¦»å‡ºæ–‡æ¡£æµï¼Œå¯¹ä¹‹åçš„å…ƒç´ æ²¡æœ‰å½±å“ [è„±ç¦»æ–‡æ¡£æµ] floatï¼Œ absolutely positionedï¼Œ æ ¹å…ƒç´ ã€‚ 3.1 position å±æ€§å±æ€§ï¼š staticï¼štop rightç­‰å¹¶ä¸ç”Ÿæ•ˆ relativeï¼šç›’çš„å®šä½æ ¹æ®å¸¸è§„æµè®¡ç®—ï¼ˆç›’è¢«æˆä¸ºå¸¸è§„æµå†…å®šä½ï¼‰ã€‚ç›’ç›¸å¯¹å…¶å¸¸è§„ä½ç½®ç§»åŠ¨ã€‚å½“Bç›’ç›¸å¯¹å®šä½ï¼ŒBç›’ä¹‹åçš„ç›’å®šä½æ—¶å°±å½“Bæ²¡æœ‰ç§»åŠ¨ä¸€æ ·æ¥è®¡ç®—ã€‚tableç›¸å…³çš„å†…ç›’å¹¶æ²¡æœ‰relativeå±æ€§ absoluteï¼šä½ç½®å¤§å°é€šè¿‡topï¼Œrightç­‰å®šä¹‰ã€‚è„±ç¦»æ–‡æ¡£æµäº†ï¼Œå³ä¾¿ç»å¯¹å®šä½ç›’æœ‰å¤–è¾¹è·ï¼Œä¹Ÿä¸åŒå…¶ä»–ä»»ä½•å¤–è¾¹è·æŠ˜å ã€‚ fixedï¼šç›’çš„å®šä½æ ¹æ® absolute æ¨¡å‹æ¥è®¡ç®—ï¼Œä½†é™¤æ­¤ä¹‹å¤–ï¼Œç›’ç›¸å¯¹æŸäº›å‚ç…§ç‰©ä¿æŒå›ºå®šã€‚ã€ç”¨æˆ·ä»£ç†ä¸å¯å°†å›ºå®šç›’çš„å†…å®¹åˆ†é¡µæ˜¾ç¤ºã€‚æ³¨æ„ç”¨æˆ·ä»£ç†å¯èƒ½ç”¨å…¶ä»–æ–¹æ³•æ‰“å°ä¸å¯è§å†…å®¹ã€‚å‚è§ç¬¬13ç« â€œé¡µç›’å¤–çš„å†…å®¹â€ã€‘ 4 å¸¸è§„æµ Normal Flowå¸¸è§„æµä¸­çš„ç›’å­éƒ½å±äºæŸä¸ªæ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œè¦ä¹ˆå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡BFCï¼Œè¦ä¹ˆè¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡LFCï¼Œæ€»ä¹‹ä¸èƒ½äºŒè€…å¾—å…¼ã€‚ ###4.1 bfc æµ®åŠ¨ ç»å¯¹å®šä½å…ƒç´ ã€ éå—ç›’çš„å—å®¹å™¨ï¼ˆå¦‚ï¼šè¡Œå†…å— inline-block ã€è¡¨æ ¼å•å…ƒæ ¼ table-cell ä»¥åŠè¡¨æ ¼æ ‡é¢˜ table-caption ï¼‰ ä»¥åŠ overflow å±æ€§ä¸ä¸º visible çš„å—ç›’ï¼ˆé™¤äº†è¯¥å€¼è¢«ä¼ æ’­åˆ°è§†å£çš„æƒ…å†µï¼‰ å°†ä¸ºå…¶å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚ åœ¨å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­: ç›’ä»åŒ…å«å—é¡¶éƒ¨ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å‚ç›´æ‘†æ”¾ã€‚ ä¸¤ä¸ªåŒèƒç›’é—´çš„å‚ç›´è·ç¦»å–å†³äº margin å±æ€§ã€‚ åŒä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­çš„ç›¸é‚»å—çº§ç›’çš„å‚ç›´å¤–è¾¹è·å°†æŠ˜å ã€‚ æ¯ä¸ªç›’çš„å·¦å¤–è¾¹ç¼˜ç´§è´´åŒ…å«å—çš„å·¦è¾¹ç¼˜ã€‚ ###4.2 lfc ç›’ä»åŒ…å«å—é¡¶éƒ¨ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ°´å¹³æ‘†æ”¾ã€‚ç›’çš„å‚ç›´å¯¹é½æ–¹å¼åˆ™ä¸ä¸€ï¼šå¯èƒ½æŒ‰åº•éƒ¨æˆ–è€…é¡¶éƒ¨å¯¹é½ï¼Œåˆæˆ–è€…æŒ‰å®ƒä»¬å†…å®¹æ–‡æœ¬çš„åŸºçº¿å¯¹é½ã€‚ è¡Œç›’çš„å®½åº¦å–å†³äºåŒ…å«å—ä»¥åŠæµ®åŠ¨ã€‚ è¡Œç›’çš„é«˜æ€»æ˜¯è¶³ä»¥å®¹çº³å…¶åŒ…å«çš„æ‰€æœ‰ç›’ï¼Œå½“ä¸€ä¸ªç›’ï¼ˆ B ï¼‰çš„é«˜åº¦å°äºåŒ…å«å®ƒçš„è¡Œç›’çš„é«˜åº¦æ—¶ï¼Œ B çš„å‚ç›´å¯¹é½æ–¹å¼ç”± vertical-align å±æ€§å†³å®šã€‚ å½“ä¸€è¡Œä¸èƒ½åŒ…å«æ‰€æœ‰æ—¶ï¼Œå®ƒä»¬ä¼šè¢«åˆ†é…åˆ°ä¸¤ä¸ªæˆ–è€…å¤šä¸ªå‚ç›´æ‘†æ”¾çš„è¡Œç›’ä¸­ï¼Œå˜æˆå‚ç›´å †å ã€‚è¡Œç›’çš„å †å æ²¡æœ‰å‚ç›´é—´è·ï¼ˆé™¤éæœ‰ç‰¹åˆ«å£°æ˜ï¼‰å¹¶ä¸”ä»ä¸é‡å ã€‚ ä¸€èˆ¬è¡Œå†…ç›’è¶…è¿‡è¡Œç›’å®½åº¦æ˜¯ï¼Œè¡Œå†…ç›’ä¼šè¢«åˆ†åœ¨å¤šä¸ªè¡Œç›’ä¸­ã€‚ å¦‚æœä¸€ä¸ªè¡Œå†…ç›’ä¸å¯åˆ‡å‰²ï¼ˆæ¯”å¦‚ï¼Œè¡Œå†…ç›’åŒ…å«çš„æ˜¯å•ä¸ªå­—ç¬¦æˆ–è€…è¯­è¨€æŒ‡å®šçš„æ–­å­—è§„åˆ™ä¸å…è®¸æ–­å­—ï¼Œåˆæˆ–è€…è¡Œå†…ç›’çš„ white-space å±æ€§å€¼ä¸º nowrap æˆ– pre ï¼‰ï¼Œé‚£ä¹ˆè¯¥ã€è¡Œå†…ç›’å°†æº¢å‡ºè¡Œç›’ã€‘ã€‚ ###4.3 ç›¸å¯¹å®šä½å¯¹äºç›¸å¯¹å®šä½è€Œè¨€ï¼Œleft å’Œrightä½¿å…¶å‘ç”Ÿæ°´å¹³ä½ç§»ã€‚è€Œä¸”æ»¡è¶³ï¼šleft = - rightã€‚æ‰€ä»¥å¦‚æœä¸¤ä¸ªéƒ½å®šä¹‰äº†ï¼Œåˆ™å¿…æœ‰ä¸€ä¸ªè¢«å¿½ç•¥ã€‚top bottomåŒç†ï¼Œtopèƒœã€‚ 5 æµ®åŠ¨ floatsæµ®åŠ¨ç›’å°†è¢«ç§»åŠ¨è‡³å·¦ä¾§æˆ–å³ä¾§ç›´è‡³å…¶å¤–ä¾§ç´§è´´åŒ…å«ç›’çš„è¾¹ç¼˜æˆ–å¦å¤–ä¸€ä¸ªæµ®åŠ¨çš„å¤–è¾¹ç¼˜ã€‚å¦‚æœå­˜åœ¨è¡Œç›’ï¼Œæµ®åŠ¨ç›’çš„é¡¶éƒ¨å¤–è¾¹ç¼˜å°†ä¸è¡Œç›’çš„é¡¶éƒ¨å¯¹é½ã€‚ floatå†…å…ƒç´ çš„marginä¸ä¼šä¸åŒ…å«ä»–çš„å‘ç”Ÿå‚ç›´è¾¹è·æŠ˜å ã€‚ clear æ¸…é™¤æµ®åŠ¨ https://segmentfault.com/a/1190000003096320#articleHeader5 [link]https://www.w3.org/TR/CSS2/visuren.html#block-formatting","tags":[{"name":"css","slug":"css","permalink":"https://misssweety.github.io/tags/css/"}]},{"title":"thinking-with-join","date":"2017-03-09T14:16:48.000Z","path":"2017/03/09/thinking-with-join/","text":"ä¸‹é¢è¿™æ®µä»£ç æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ï¼Œä¸ºæ¯ä¸ªæ•°æ®ç”Ÿæˆä¸€ä¸ªcircleï¼Œè°ƒç”¨æ•°æ®é‡Œçš„xï¼Œyæ¥å®šä½ã€‚ä½†æ˜¯æˆ‘ä»¬selectAllçš„å…ƒç´ ï¼Œæ­¤æ—¶å¹¶ä¸å­˜åœ¨ï¼Œé‚£d3æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢? svg.selectAll(â€œcircleâ€) .data(data) .enter().append(â€œcircleâ€) .attr(â€œcxâ€, function(d) { return d.x; }) .attr(â€œcyâ€, function(d) { return d.y; }) .attr(â€œrâ€, 2.5); åœ¨d3ä¸­ï¼Œå‘Šè¯‰d3ä½ æƒ³è¦ä»€ä¹ˆï¼Œè€Œä¸æ˜¯å‘Šè¯‰d3æ€æ ·åšä»€ä¹ˆã€‚å¯¹äºä¸Šé¢è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ï¼Œæˆ‘æƒ³è¦circleå¯¹åº”äºæ•°æ®ï¼Œæ¯ä¸ªcircleå¯¹åº”äºä¸€ä¸ªæ•°æ®ï¼Œè€Œä¸æ˜¯å‘Šè¯‰d3ï¼Œä½ åº”è¯¥ç»™æˆ‘åˆ›é€ ä¸€ä¸ªcircleï¼Œç„¶åå‘Šè¯‰d3é€‰æ‹©çš„circleåº”è¯¥å’Œæ•°æ®å¯¹åº”å¥½ã€‚è¿™ä¸ªåŸåˆ™å°±å«åšdata join Data Enter Update Elements Exit è¿æ¥åˆ°ç°æœ‰å…ƒç´ çš„æ•°æ®ç‚¹ç”Ÿæˆupdateï¼ˆå†…éƒ¨ï¼‰é€‰æ‹©ã€‚å‰©ä½™æœªç»‘å®šæ•°æ®ç”Ÿæˆenteré€‰æ‹©ï¼ˆå·¦ï¼‰ï¼Œè¡¨ç¤ºç¼ºå°‘çš„å…ƒç´ ã€‚åŒæ ·ï¼Œä»»ä½•å‰©ä½™çš„æœªç»‘å®šå…ƒç´ ä¼šç”Ÿæˆexité€‰æ‹©ï¼ˆå³ï¼‰ï¼Œè¡¨ç¤ºè¦åˆ é™¤çš„å…ƒç´ ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡data join æ¥æ­å¼€enter-appendåºåˆ—çš„è°œå›¢äº† svg.selectAll(&quot;circle&quot;) è¿”å›ä¸€ä¸ªæ–°çš„ç©ºselectionï¼Œå› ä¸ºSVGå®¹å™¨æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥è¯¥selectionçš„çˆ¶èŠ‚ç‚¹æ˜¯SVGå®¹å™¨ ç„¶åæ­¤selectionè¿æ¥åˆ°æ•°æ®æ•°ç»„ï¼Œç”Ÿæˆä¸‰ä¸ªæ–°selectionåˆ†åˆ«è¡¨ç¤ºä¸‰ç§å¯èƒ½çš„çŠ¶æ€ï¼šenterï¼Œupdateå’Œexitã€‚ç”±äºselectionä¸ºç©ºï¼Œæ‰€ä»¥updateå’Œexité€‰æ‹©ä¸ºç©ºï¼Œè€Œenter selectionåŒ…å«æ¯ä¸ªæ–°æ•°æ®çš„å ä½ç¬¦ã€‚ update selectioné€šè¿‡selection.dataè¿”å›,è€Œenterå’Œexit selectionæŒ‚èµ·update selection; selection.enterè¿”å›enter selectionã€‚ é€šè¿‡åœ¨enter selectionä¸Šè°ƒç”¨selection.appendï¼Œå°†ç¼ºå°‘çš„å…ƒç´ æ·»åŠ åˆ°SVGå®¹å™¨ã€‚è¿™ä¼šä¸ºæ¯ä¸ªæ•°æ®ç‚¹å‘SVGå®¹å™¨æ·»åŠ ä¸€ä¸ªæ–°åœ†ã€‚ Thinking with joins æ„å‘³ç€åœ¨ä¸€ä¸ªselectionå’Œæ•°æ®é›†ä¸­å£°æ˜ä¸€ç§å…³ç³»ï¼Œç„¶åé€šè¿‡enter, update, exitå®ç°è¿™ä¸ªå…³ç³». ä½†æ˜¯ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆéº»çƒ¦å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸ä¸€å¼€å§‹å°±åˆ›å»ºå¤šä¸ªå…ƒç´ å‘¢ï¼Ÿdata joinçš„ç¾ä¸½åœ¨äºå®ƒçš„æ³›åŒ–ã€‚è™½ç„¶ä¸Šè¿°ä»£ç åªå¤„ç†enter selection,è¿™å°±å¯ä»¥å¤„ç†é™æ€å¯è§†åŒ–äº†ï¼Œä½†æ˜¯ä½ å¯ä»¥å°†å…¶æ‰©å±•ä¸ºæ”¯æŒåŠ¨æ€å¯è§†åŒ–ï¼Œåªéœ€å¯¹updateå’Œexitè¿›è¡Œå°‘é‡ä¿®æ”¹ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥å¯¹å®æ—¶æ•°æ®è¿›è¡Œå¯è§†åŒ–ï¼Œå…è®¸äº¤äº’å¼æ¢ç´¢ï¼Œä»¥åŠåœ¨æ•°æ®é›†ä¹‹é—´å¹³æ»‘è¿‡æ¸¡ï¼ çœ‹ä¸‹åŒ…å«ä¸‰ä¸ªçŠ¶æ€çš„ä¾‹å­ï¼š var circle = svg.selectAll(â€œcircleâ€) .data(data);circle.exit().remove();circle.enter().append(â€œcircleâ€) .attr(â€œrâ€, 2.5) .merge(circle) .attr(â€œcxâ€, function(d) { return d.x; }) .attr(â€œcyâ€, function(d) { return d.y; }); æ— è®ºä½•æ—¶è¿è¡Œæ­¤ä»£ç ï¼Œå®ƒéƒ½ä¼šé‡æ–°è®¡ç®—æ•°æ®è¿æ¥å¹¶ä¿æŒå…ƒç´ å’Œæ•°æ®ä¹‹é—´çš„æ‰€éœ€å¯¹åº”å…³ç³»ã€‚å¦‚æœæ–°æ•°æ®é›†å°äºæ—§æ•°æ®é›†ï¼Œåˆ™å‰©ä½™å…ƒç´ å°†åœ¨é€€å‡ºé€‰æ‹©ä¸­ç»“æŸå¹¶è¢«åˆ é™¤ã€‚å¦‚æœæ–°æ•°æ®é›†è¾ƒå¤§ï¼Œå‰©ä½™æ•°æ®å°†åœ¨è¾“å…¥é€‰æ‹©ä¸­ç»“æŸï¼Œå¹¶æ·»åŠ æ–°èŠ‚ç‚¹ã€‚å¦‚æœæ–°æ•°æ®é›†çš„å¤§å°å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆæ‰€æœ‰å…ƒç´ éƒ½å°†ä½¿ç”¨æ–°ä½ç½®è¿›è¡Œæ›´æ–°ï¼Œå¹¶ä¸”ä¸ä¼šæ·»åŠ æˆ–åˆ é™¤ä»»ä½•å…ƒç´ ã€‚ thinking with joinç”¨è¿æ¥æ¥æ€è€ƒæ„å‘³ç€ä½ çš„ä»£ç æ›´å…·å£°æ˜æ€§ï¼šä½ å¤„ç†è¿™ä¸‰ä¸ªçŠ¶æ€æ²¡æœ‰ä»»ä½•åˆ†æ”¯ï¼ˆifï¼‰æˆ–è¿­ä»£ï¼ˆforï¼‰ã€‚è€Œæ˜¯æè¿°å…ƒç´ åº”å¦‚ä½•å¯¹åº”æ•°æ®ã€‚å¦‚æœç»™å®šçš„enterï¼Œupdateæˆ–exit selectionæ°å¥½æ˜¯ç©ºçš„ï¼Œåˆ™ç›¸åº”çš„ä»£ç æ˜¯æ— æ“ä½œ è¿æ¥è¿˜å…è®¸å°†æ“ä½œå®šå‘åˆ°ç‰¹å®šçŠ¶æ€ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨enterè€Œä¸æ˜¯updateä¸Šè®¾ç½®å¸¸é‡å±æ€§ï¼ˆä¾‹å¦‚ç”±â€œrâ€å±æ€§å®šä¹‰çš„åœ†çš„åŠå¾„ï¼‰ã€‚é€šè¿‡é‡æ–°é€‰æ‹©å…ƒç´ å’Œæœ€å°åŒ–DOMæ›´æ”¹ï¼Œæ‚¨å¤§å¤§æé«˜äº†æ¸²æŸ“æ€§èƒ½ï¼åŒæ ·ï¼Œæ‚¨å¯ä»¥å°†åŠ¨ç”»è¿‡æ¸¡æŒ‡å®šä¸ºç‰¹å®šçŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œåœ¨enteringçŠ¶æ€ï¼ŒåŠ å…¥åŠ¨ç”»åœ†åœˆå±•å¼€ å¤§è‡´ç¿»è¯‘è‡ªï¼šthinking with join","tags":[{"name":"d3","slug":"d3","permalink":"https://misssweety.github.io/tags/d3/"},{"name":"translate","slug":"translate","permalink":"https://misssweety.github.io/tags/translate/"}]},{"title":"åšå®¢æ­å»º","date":"2016-10-27T04:00:00.000Z","path":"2016/10/27/blog-publish/","text":"é€‚ç”¨äºmacOS ###1.éœ€è¦å®‰è£…gitï¼Œnpmï¼Œnodeå‡çº§æœ¬åœ°npm npm install npm@latest -g å¦‚æœæœ‰æƒé™é—®é¢˜ï¼Œå‰é¢åŠ ä¸Šsudoå°±å¯ä»¥äº† ###2.å®‰è£…hexo sudo npm install -g hexo å…¨å±€å®‰è£…äº† ###3.hexoç®¡ç†ä¸€ä¸ªç½‘ç«™ hexo init blog åå­—éšè‡ªå·±å–œæ¬¢ï¼Œè¿™é‡Œèµ·çš„äº‹blog ###4.è¿›å…¥è¯¥æ–‡ä»¶ï¼Œè¿›è¡Œç®¡ç† cd blog hexo server //å¯åŠ¨ä½ çš„æœ¬åœ°ç½‘ç«™ï¼Œè®¿é—®localhost:4000ï¼Œå°±å¯ä»¥çœ‹åˆ°é›å½¢äº† hexo new &quot;hello world&quot; //ç”Ÿæˆä¸€ä¸ªhello world.mdæ–‡ä»¶ï¼Œæ–°æ–°æ–‡ç« ï¼Œæ·»åŠ åˆ°ç½‘ç«™ä¸­ ###5.éƒ¨ç½²åˆ°githubä¸Š ####gitä¸Šå»ºç«‹ä»“åº“å…ˆåœ¨è‡ªå·±çš„åº“é‡Œåˆ›å»ºä¸€ä¸ªæ–°çš„repo,ä½œä¸ºç½‘ç«™çš„è¿œç«¯åº“ï¼Œä¸€èˆ¬å‘½åä¸ºè‡ªå·±çš„è´¦å·åï¼Œä¾‹å¦‚ï¼š æˆ‘çš„è´¦å·missSweetyï¼Œæ–°å»ºçš„repoä¸ºmissSweety.github.io ####ä¿®æ”¹hexoé…ç½®æ–‡ä»¶å›åˆ°hexoä¸­ï¼Œä¸ºäº†éƒ¨ç½²åˆ°githubä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹_config.ymlæ–‡ä»¶å¦‚ä¸‹ï¼š deploy: type: git repository: https://github.com/MissSweety/MissSweety.github.io.git branch: master ####å®‰è£…hexo deployer git npm install hexo-deployer-git â€“saveå¦‚æœä¸å®‰è£…è¿™ä¸ªï¼Œdeployçš„æ—¶å€™ä¼šæŠ¥é”™çš„ ####hexo deploy hexo deployå¦‚æœæ²¡é…è¿‡sshï¼Œè¿˜æ˜¯ä¼šæŠ¥é”™çš„è§£å†³æ–¹æ³•ï¼š ssh-keygen -t rsa -b 4096 -C â€˜emailâ€™ æŒ‰ç…§æç¤ºï¼Œè¾“å…¥è´¦å·ï¼Œå¯†ç ï¼Œå°±ä¼šç”Ÿæˆæ–‡ä»¶äº†å›åˆ°githubç½‘ç«™ï¼Œåœ¨settingä¸­æŠŠå…¬é’¥æ”¾è¿›å» ssh -T git@github.com ç”¨è¯¥æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹æ˜¯å¦å·²ç»é‰´æƒäº† å¦‚æœä»¥ä¸Šéƒ½å¥½äº†ï¼Œè¿™æ¬¡åœ¨ç”¨hexo deploy,å°±ä¼šè‡ªåŠ¨pushä»£ç ï¼Œå¹¶å‘å¸ƒäº†ï¼Œå¯ä»¥æŸ¥çœ‹ä½ çš„ç½‘ç«™äº† ###å¤§åŠŸå‘Šæˆ!!!","tags":[{"name":"hexo","slug":"hexo","permalink":"https://misssweety.github.io/tags/hexo/"}]}]